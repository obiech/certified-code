"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.updateNxJsonIf = exports.updateProjectConfigurationIf = void 0;
const tslib_1 = require("tslib");
const devkit_1 = require("@nx/devkit");
function updateProjectConfigurationIf(tree, predicate, updater) {
    return tslib_1.__awaiter(this, void 0, void 0, function* () {
        const projects = (0, devkit_1.getProjects)(tree);
        for (const [, project] of projects) {
            if (!project || !predicate(project)) {
                continue;
            }
            updater(project);
            if (project.name)
                (0, devkit_1.updateProjectConfiguration)(tree, project.name, project);
        }
    });
}
exports.updateProjectConfigurationIf = updateProjectConfigurationIf;
function updateNxJsonIf(tree, predicate, updater) {
    return tslib_1.__awaiter(this, void 0, void 0, function* () {
        // update options from nx.json target defaults
        const nxJson = (0, devkit_1.readNxJson)(tree);
        if (!nxJson || !predicate(nxJson)) {
            return;
        }
        updater(nxJson);
        (0, devkit_1.updateNxJson)(tree, nxJson);
    });
}
exports.updateNxJsonIf = updateNxJsonIf;
//# sourceMappingURL=migration-utils.js.map