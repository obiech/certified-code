{"ast":null,"code":"/**\n * @fileoverview text\n * @author dengfuping_develop@163.com\n */\nimport { __assign, __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport { detect } from 'detect-browser';\nimport { setTransform } from '../util/svg';\nimport { SVG_ATTR_MAP } from '../constant';\nimport ShapeBase from './base';\nvar LETTER_SPACING = 0.3;\nvar BASELINE_MAP = {\n  top: 'before-edge',\n  middle: 'central',\n  bottom: 'after-edge',\n  alphabetic: 'baseline',\n  hanging: 'hanging'\n};\n// for FireFox\nvar BASELINE_MAP_FOR_FIREFOX = {\n  top: 'text-before-edge',\n  middle: 'central',\n  bottom: 'text-after-edge',\n  alphabetic: 'alphabetic',\n  hanging: 'hanging'\n};\nvar ANCHOR_MAP = {\n  left: 'left',\n  start: 'left',\n  center: 'middle',\n  right: 'end',\n  end: 'end'\n};\nvar Text = /** @class */function (_super) {\n  __extends(Text, _super);\n  function Text() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = 'text';\n    _this.canFill = true;\n    _this.canStroke = true;\n    return _this;\n  }\n  Text.prototype.getDefaultAttrs = function () {\n    var attrs = _super.prototype.getDefaultAttrs.call(this);\n    return __assign(__assign({}, attrs), {\n      x: 0,\n      y: 0,\n      text: null,\n      fontSize: 12,\n      fontFamily: 'sans-serif',\n      fontStyle: 'normal',\n      fontWeight: 'normal',\n      fontVariant: 'normal',\n      textAlign: 'start',\n      textBaseline: 'bottom'\n    });\n  };\n  Text.prototype.createPath = function (context, targetAttrs) {\n    var _this = this;\n    var attrs = this.attr();\n    var el = this.get('el');\n    this._setFont();\n    each(targetAttrs || attrs, function (value, attr) {\n      if (attr === 'text') {\n        _this._setText(\"\" + value);\n      } else if (attr === 'matrix' && value) {\n        setTransform(_this);\n      } else if (SVG_ATTR_MAP[attr]) {\n        el.setAttribute(SVG_ATTR_MAP[attr], value);\n      }\n    });\n    el.setAttribute('paint-order', 'stroke');\n    el.setAttribute('style', 'stroke-linecap:butt; stroke-linejoin:miter;');\n  };\n  Text.prototype._setFont = function () {\n    var el = this.get('el');\n    var _a = this.attr(),\n      textBaseline = _a.textBaseline,\n      textAlign = _a.textAlign;\n    var browser = detect();\n    if (browser && browser.name === 'firefox') {\n      // compatible with FireFox browser, ref: https://github.com/antvis/g/issues/119\n      el.setAttribute('dominant-baseline', BASELINE_MAP_FOR_FIREFOX[textBaseline] || 'alphabetic');\n    } else {\n      el.setAttribute('alignment-baseline', BASELINE_MAP[textBaseline] || 'baseline');\n    }\n    el.setAttribute('text-anchor', ANCHOR_MAP[textAlign] || 'left');\n  };\n  Text.prototype._setText = function (text) {\n    var el = this.get('el');\n    var _a = this.attr(),\n      x = _a.x,\n      _b = _a.textBaseline,\n      baseline = _b === void 0 ? 'bottom' : _b;\n    if (!text) {\n      el.innerHTML = '';\n    } else if (~text.indexOf('\\n')) {\n      var textArr = text.split('\\n');\n      var textLen_1 = textArr.length - 1;\n      var arr_1 = '';\n      each(textArr, function (segment, i) {\n        if (i === 0) {\n          if (baseline === 'alphabetic') {\n            arr_1 += \"<tspan x=\\\"\" + x + \"\\\" dy=\\\"\" + -textLen_1 + \"em\\\">\" + segment + \"</tspan>\";\n          } else if (baseline === 'top') {\n            arr_1 += \"<tspan x=\\\"\" + x + \"\\\" dy=\\\"0.9em\\\">\" + segment + \"</tspan>\";\n          } else if (baseline === 'middle') {\n            arr_1 += \"<tspan x=\\\"\" + x + \"\\\" dy=\\\"\" + -(textLen_1 - 1) / 2 + \"em\\\">\" + segment + \"</tspan>\";\n          } else if (baseline === 'bottom') {\n            arr_1 += \"<tspan x=\\\"\" + x + \"\\\" dy=\\\"-\" + (textLen_1 + LETTER_SPACING) + \"em\\\">\" + segment + \"</tspan>\";\n          } else if (baseline === 'hanging') {\n            arr_1 += \"<tspan x=\\\"\" + x + \"\\\" dy=\\\"\" + (-(textLen_1 - 1) - LETTER_SPACING) + \"em\\\">\" + segment + \"</tspan>\";\n          }\n        } else {\n          arr_1 += \"<tspan x=\\\"\" + x + \"\\\" dy=\\\"1em\\\">\" + segment + \"</tspan>\";\n        }\n      });\n      el.innerHTML = arr_1;\n    } else {\n      el.innerHTML = text;\n    }\n  };\n  return Text;\n}(ShapeBase);\nexport default Text;","map":{"version":3,"names":["__assign","__extends","each","detect","setTransform","SVG_ATTR_MAP","ShapeBase","LETTER_SPACING","BASELINE_MAP","top","middle","bottom","alphabetic","hanging","BASELINE_MAP_FOR_FIREFOX","ANCHOR_MAP","left","start","center","right","end","Text","_super","_this","apply","arguments","type","canFill","canStroke","prototype","getDefaultAttrs","attrs","call","x","y","text","fontSize","fontFamily","fontStyle","fontWeight","fontVariant","textAlign","textBaseline","createPath","context","targetAttrs","attr","el","get","_setFont","value","_setText","setAttribute","_a","browser","name","_b","baseline","innerHTML","indexOf","textArr","split","textLen_1","length","arr_1","segment","i"],"sources":["/Users/obiechina/Documents/ridy-flutter-full-taxi-solution 2/node_modules/@antv/g-svg/esm/shape/text.js"],"sourcesContent":["/**\n * @fileoverview text\n * @author dengfuping_develop@163.com\n */\nimport { __assign, __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport { detect } from 'detect-browser';\nimport { setTransform } from '../util/svg';\nimport { SVG_ATTR_MAP } from '../constant';\nimport ShapeBase from './base';\nvar LETTER_SPACING = 0.3;\nvar BASELINE_MAP = {\n    top: 'before-edge',\n    middle: 'central',\n    bottom: 'after-edge',\n    alphabetic: 'baseline',\n    hanging: 'hanging',\n};\n// for FireFox\nvar BASELINE_MAP_FOR_FIREFOX = {\n    top: 'text-before-edge',\n    middle: 'central',\n    bottom: 'text-after-edge',\n    alphabetic: 'alphabetic',\n    hanging: 'hanging',\n};\nvar ANCHOR_MAP = {\n    left: 'left',\n    start: 'left',\n    center: 'middle',\n    right: 'end',\n    end: 'end',\n};\nvar Text = /** @class */ (function (_super) {\n    __extends(Text, _super);\n    function Text() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'text';\n        _this.canFill = true;\n        _this.canStroke = true;\n        return _this;\n    }\n    Text.prototype.getDefaultAttrs = function () {\n        var attrs = _super.prototype.getDefaultAttrs.call(this);\n        return __assign(__assign({}, attrs), { x: 0, y: 0, text: null, fontSize: 12, fontFamily: 'sans-serif', fontStyle: 'normal', fontWeight: 'normal', fontVariant: 'normal', textAlign: 'start', textBaseline: 'bottom' });\n    };\n    Text.prototype.createPath = function (context, targetAttrs) {\n        var _this = this;\n        var attrs = this.attr();\n        var el = this.get('el');\n        this._setFont();\n        each(targetAttrs || attrs, function (value, attr) {\n            if (attr === 'text') {\n                _this._setText(\"\" + value);\n            }\n            else if (attr === 'matrix' && value) {\n                setTransform(_this);\n            }\n            else if (SVG_ATTR_MAP[attr]) {\n                el.setAttribute(SVG_ATTR_MAP[attr], value);\n            }\n        });\n        el.setAttribute('paint-order', 'stroke');\n        el.setAttribute('style', 'stroke-linecap:butt; stroke-linejoin:miter;');\n    };\n    Text.prototype._setFont = function () {\n        var el = this.get('el');\n        var _a = this.attr(), textBaseline = _a.textBaseline, textAlign = _a.textAlign;\n        var browser = detect();\n        if (browser && browser.name === 'firefox') {\n            // compatible with FireFox browser, ref: https://github.com/antvis/g/issues/119\n            el.setAttribute('dominant-baseline', BASELINE_MAP_FOR_FIREFOX[textBaseline] || 'alphabetic');\n        }\n        else {\n            el.setAttribute('alignment-baseline', BASELINE_MAP[textBaseline] || 'baseline');\n        }\n        el.setAttribute('text-anchor', ANCHOR_MAP[textAlign] || 'left');\n    };\n    Text.prototype._setText = function (text) {\n        var el = this.get('el');\n        var _a = this.attr(), x = _a.x, _b = _a.textBaseline, baseline = _b === void 0 ? 'bottom' : _b;\n        if (!text) {\n            el.innerHTML = '';\n        }\n        else if (~text.indexOf('\\n')) {\n            var textArr = text.split('\\n');\n            var textLen_1 = textArr.length - 1;\n            var arr_1 = '';\n            each(textArr, function (segment, i) {\n                if (i === 0) {\n                    if (baseline === 'alphabetic') {\n                        arr_1 += \"<tspan x=\\\"\" + x + \"\\\" dy=\\\"\" + -textLen_1 + \"em\\\">\" + segment + \"</tspan>\";\n                    }\n                    else if (baseline === 'top') {\n                        arr_1 += \"<tspan x=\\\"\" + x + \"\\\" dy=\\\"0.9em\\\">\" + segment + \"</tspan>\";\n                    }\n                    else if (baseline === 'middle') {\n                        arr_1 += \"<tspan x=\\\"\" + x + \"\\\" dy=\\\"\" + -(textLen_1 - 1) / 2 + \"em\\\">\" + segment + \"</tspan>\";\n                    }\n                    else if (baseline === 'bottom') {\n                        arr_1 += \"<tspan x=\\\"\" + x + \"\\\" dy=\\\"-\" + (textLen_1 + LETTER_SPACING) + \"em\\\">\" + segment + \"</tspan>\";\n                    }\n                    else if (baseline === 'hanging') {\n                        arr_1 += \"<tspan x=\\\"\" + x + \"\\\" dy=\\\"\" + (-(textLen_1 - 1) - LETTER_SPACING) + \"em\\\">\" + segment + \"</tspan>\";\n                    }\n                }\n                else {\n                    arr_1 += \"<tspan x=\\\"\" + x + \"\\\" dy=\\\"1em\\\">\" + segment + \"</tspan>\";\n                }\n            });\n            el.innerHTML = arr_1;\n        }\n        else {\n            el.innerHTML = text;\n        }\n    };\n    return Text;\n}(ShapeBase));\nexport default Text;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}