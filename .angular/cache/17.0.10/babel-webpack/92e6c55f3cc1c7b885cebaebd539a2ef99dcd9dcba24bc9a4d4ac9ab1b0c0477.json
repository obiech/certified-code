{"ast":null,"code":"import _asyncToGenerator from \"/Users/obiechina/Documents/ridy-flutter-full-taxi-solution 2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ActivatedRoute } from '@angular/router';\nimport { environment } from '@ridy/admin-panel/src/environments/environment';\nimport { map } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"ng-zorro-antd/core/transition-patch\";\nimport * as i4 from \"ng-zorro-antd/icon\";\nimport * as i5 from \"ng-zorro-antd/upload\";\nimport * as i6 from \"ng-zorro-antd/modal\";\nconst _c0 = () => ({\n  width: \"100%\"\n});\nfunction DriverProfileDocumentsComponent_div_0_ng_template_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 7);\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"src\", ctx_r2.previewImage, i0.ɵɵsanitizeUrl)(\"ngStyle\", i0.ɵɵpureFunction0(2, _c0));\n  }\n}\nconst _c1 = () => ({\n  showRemoveIcon: false,\n  showPreviewIcon: true,\n  showDownloadIcon: true\n});\nfunction DriverProfileDocumentsComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"nz-upload\", 2)(2, \"div\");\n    i0.ɵɵelement(3, \"span\", 3);\n    i0.ɵɵelementStart(4, \"div\", 4);\n    i0.ɵɵtext(5, \"Upload\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(6, \"nz-modal\", 5);\n    i0.ɵɵlistener(\"nzOnCancel\", function DriverProfileDocumentsComponent_div_0_Template_nz_modal_nzOnCancel_6_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.previewVisible = false);\n    });\n    i0.ɵɵtemplate(7, DriverProfileDocumentsComponent_div_0_ng_template_7_Template, 1, 3, \"ng-template\", null, 6, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const _r3 = i0.ɵɵreference(8);\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"nzFileList\", ctx_r0.files)(\"nzShowButton\", false)(\"nzPreview\", ctx_r0.handlePreview)(\"nzShowUploadList\", i0.ɵɵpureFunction0(7, _c1));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"nzVisible\", ctx_r0.previewVisible)(\"nzContent\", _r3)(\"nzFooter\", null);\n  }\n}\nexport class DriverProfileDocumentsComponent {\n  constructor(route) {\n    var _this = this;\n    this.route = route;\n    this.root = environment.root;\n    this.previewImage = '';\n    this.previewVisible = false;\n    this.files = [];\n    this.handlePreview = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (file) {\n        if (!file.url && !file.preview) {\n          file.preview = yield getBase64(file.originFileObj);\n        }\n        _this.previewImage = file.url || file.preview;\n        _this.previewVisible = true;\n      });\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n  }\n  ngOnDestroy() {\n    this.subscription?.unsubscribe();\n  }\n  ngOnInit() {\n    this.query = this.route.parent?.data.pipe(map(data => data.driver));\n    this.subscription = this.query?.subscribe(data => {\n      if (data.data?.driver?.documents == null) return;\n      this.files = this.getFileListFromDocuments(data.data?.driver);\n    });\n  }\n  getFileListFromDocuments(driver) {\n    if (driver == null) return [];\n    const files = driver.documents.map(doc => ({\n      uid: '-1',\n      name: 'image.png',\n      status: 'done',\n      url: this.root + doc.address\n    }));\n    return files;\n  }\n  static {\n    this.ɵfac = function DriverProfileDocumentsComponent_Factory(t) {\n      return new (t || DriverProfileDocumentsComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: DriverProfileDocumentsComponent,\n      selectors: [[\"app-driver-profile-documents\"]],\n      decls: 2,\n      vars: 3,\n      consts: [[\"style\", \"overflow: auto;\", 4, \"ngIf\"], [2, \"overflow\", \"auto\"], [\"nzListType\", \"picture-card\", 3, \"nzFileList\", \"nzShowButton\", \"nzPreview\", \"nzShowUploadList\"], [\"nz-icon\", \"\", \"nzType\", \"plus\"], [2, \"margin-top\", \"8px\"], [3, \"nzVisible\", \"nzContent\", \"nzFooter\", \"nzOnCancel\"], [\"modalContent\", \"\"], [3, \"src\", \"ngStyle\"]],\n      template: function DriverProfileDocumentsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵtemplate(0, DriverProfileDocumentsComponent_div_0_Template, 9, 8, \"div\", 0);\n          i0.ɵɵpipe(1, \"async\");\n        }\n        if (rf & 2) {\n          let tmp_0_0;\n          i0.ɵɵproperty(\"ngIf\", (tmp_0_0 = i0.ɵɵpipeBind1(1, 1, ctx.query)) == null ? null : tmp_0_0.data == null ? null : tmp_0_0.data.driver);\n        }\n      },\n      dependencies: [i2.NgIf, i2.NgStyle, i3.ɵNzTransitionPatchDirective, i4.NzIconDirective, i5.NzUploadComponent, i6.NzModalComponent, i2.AsyncPipe],\n      encapsulation: 2\n    });\n  }\n}\nconst getBase64 = file => new Promise((resolve, reject) => {\n  const reader = new FileReader();\n  reader.readAsDataURL(file);\n  reader.onload = () => resolve(reader.result);\n  reader.onerror = error => reject(error);\n});","map":{"version":3,"names":["ActivatedRoute","environment","map","i0","ɵɵelement","ɵɵproperty","ctx_r2","previewImage","ɵɵsanitizeUrl","ɵɵpureFunction0","_c0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","DriverProfileDocumentsComponent_div_0_Template_nz_modal_nzOnCancel_6_listener","ɵɵrestoreView","_r5","ctx_r4","ɵɵnextContext","ɵɵresetView","previewVisible","ɵɵtemplate","DriverProfileDocumentsComponent_div_0_ng_template_7_Template","ɵɵtemplateRefExtractor","ɵɵadvance","ctx_r0","files","handlePreview","_c1","_r3","DriverProfileDocumentsComponent","constructor","route","_this","root","_ref","_asyncToGenerator","file","url","preview","getBase64","originFileObj","_x","apply","arguments","ngOnDestroy","subscription","unsubscribe","ngOnInit","query","parent","data","pipe","driver","subscribe","documents","getFileListFromDocuments","doc","uid","name","status","address","ɵɵdirectiveInject","i1","selectors","decls","vars","consts","template","DriverProfileDocumentsComponent_Template","rf","ctx","DriverProfileDocumentsComponent_div_0_Template","tmp_0_0","ɵɵpipeBind1","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","error"],"sources":["/Users/obiechina/Documents/ridy-flutter-full-taxi-solution 2/apps/admin-panel/src/app/cms/drivers/driver-profile/driver-profile-documents/driver-profile-documents.component.ts","/Users/obiechina/Documents/ridy-flutter-full-taxi-solution 2/apps/admin-panel/src/app/cms/drivers/driver-profile/driver-profile-documents/driver-profile-documents.component.html"],"sourcesContent":["import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { ApolloQueryResult } from '@apollo/client/core';\nimport { ViewDriverQuery } from '@ridy/admin-panel/generated/graphql';\nimport { environment } from '@ridy/admin-panel/src/environments/environment';\nimport { NzUploadFile } from 'ng-zorro-antd/upload';\nimport { map, Observable, Subscription } from 'rxjs';\n\n@Component({\n  selector: 'app-driver-profile-documents',\n  templateUrl: './driver-profile-documents.component.html',\n})\nexport class DriverProfileDocumentsComponent implements OnInit, OnDestroy {\n  query?: Observable<ApolloQueryResult<ViewDriverQuery>>;\n  root = environment.root;\n  previewImage: string | undefined = '';\n  previewVisible = false;\n  files: NzUploadFile[] = [];\n  subscription?: Subscription;\n\n  handlePreview = async (file: NzUploadFile): Promise<void> => {\n    if (!file.url && !file.preview) {\n      file.preview = await getBase64(file.originFileObj!);\n    }\n    this.previewImage = file.url || file.preview;\n    this.previewVisible = true;\n  };\n  constructor(private route: ActivatedRoute) {}\n  ngOnDestroy(): void {\n    this.subscription?.unsubscribe();\n  }\n\n  ngOnInit(): void {\n    this.query = this.route.parent?.data.pipe(map((data) => data.driver));\n    this.subscription = this.query?.subscribe((data) => {\n      if (data.data?.driver?.documents == null) return;\n      this.files = this.getFileListFromDocuments(data.data?.driver);\n    });\n  }\n\n  getFileListFromDocuments(driver: ViewDriverQuery['driver']): NzUploadFile[] {\n    if (driver == null) return [];\n    const files: NzUploadFile[] = driver!.documents.map((doc) => ({\n      uid: '-1',\n      name: 'image.png',\n      status: 'done',\n      url: this.root + doc.address,\n    }));\n    return files;\n  }\n}\nconst getBase64 = (file: File): Promise<string | ArrayBuffer | null> =>\n  new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = () => resolve(reader.result);\n    reader.onerror = (error) => reject(error);\n  });\n","<div style=\"overflow: auto;\" *ngIf=\"(query | async)?.data?.driver as driver\">\n  <nz-upload nzListType=\"picture-card\" [nzFileList]=\"files\" [nzShowButton]=\"false\" [nzPreview]=\"handlePreview\"\n    [nzShowUploadList]=\"{showRemoveIcon: false, showPreviewIcon: true, showDownloadIcon: true}\">\n    <div>\n      <span nz-icon nzType=\"plus\"></span>\n      <div style=\"margin-top: 8px\">Upload</div>\n    </div>\n  </nz-upload>\n  <nz-modal [nzVisible]=\"previewVisible\" [nzContent]=\"modalContent\" [nzFooter]=\"null\"\n    (nzOnCancel)=\"previewVisible = false\">\n    <ng-template #modalContent>\n      <img [src]=\"previewImage\" [ngStyle]=\"{ width: '100%' }\" />\n    </ng-template>\n  </nz-modal>\n</div>\n<!-- <div *ngIf=\"(query | async)?.data?.driver?.documents as documents\">\n  <div *ngFor=\"let document of documents\">\n    <a href=\"{{root + document.address}}\" target=\"_blank\"><img src=\"{{root + document.address}}\"\n        style=\"width: 90%; margin: 10px;\"></a>\n  </div>\n</div> -->"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}