{"ast":null,"code":"import _asyncToGenerator from \"/Users/obiechina/Documents/ridy-flutter-full-taxi-solution 2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { UntypedFormBuilder, Validators } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { CreateReviewParameterGQL, UpdateReviewParameterGQL } from '@ridy/admin-panel/generated/graphql';\nimport { NzMessageService } from 'ng-zorro-antd/message';\nimport { firstValueFrom } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@ridy/admin-panel/generated/graphql\";\nimport * as i4 from \"ng-zorro-antd/message\";\nimport * as i5 from \"ng-zorro-antd/input\";\nimport * as i6 from \"ng-zorro-antd/button\";\nimport * as i7 from \"ng-zorro-antd/core/transition-patch\";\nimport * as i8 from \"ng-zorro-antd/core/wave\";\nimport * as i9 from \"ng-zorro-antd/grid\";\nimport * as i10 from \"ng-zorro-antd/form\";\nimport * as i11 from \"ng-zorro-antd/page-header\";\nimport * as i12 from \"ng-zorro-antd/card\";\nimport * as i13 from \"ng-zorro-antd/switch\";\nfunction ReviewParameterViewComponent_ng_template_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function ReviewParameterViewComponent_ng_template_14_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.onSubmit());\n    });\n    i0.ɵɵtext(1, \"Save\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"disabled\", ctx_r0.form.invalid);\n  }\n}\nconst _c0 = a0 => [a0];\nexport class ReviewParameterViewComponent {\n  constructor(route, router, fb, createGQL, updateGQL, msg) {\n    this.route = route;\n    this.router = router;\n    this.fb = fb;\n    this.createGQL = createGQL;\n    this.updateGQL = updateGQL;\n    this.msg = msg;\n    this.form = this.fb.group({\n      id: [null],\n      title: [null, Validators.required],\n      isGood: [null, Validators.required]\n    });\n  }\n  ngAfterViewInit() {\n    this.initializeDrawingManager();\n  }\n  initializeDrawingManager() {\n    this.route.data.subscribe(data => {\n      if (data.reviewParameter != null) {\n        const val = data.reviewParameter.data;\n        const reviewParameter = val.feedbackParameter;\n        if (reviewParameter != null) {\n          this.form.patchValue(reviewParameter);\n        }\n      }\n    });\n  }\n  onSubmit() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      try {\n        const {\n          id,\n          ...update\n        } = _this.form.value;\n        if (id == null) {\n          yield firstValueFrom(_this.createGQL.mutate({\n            input: update\n          }));\n        } else {\n          yield firstValueFrom(_this.updateGQL.mutate({\n            id,\n            update\n          }));\n        }\n        _this.router.navigate(['management/review-parameters'], {\n          relativeTo: _this.route.root\n        });\n      } catch (error) {\n        _this.msg.error(error.message);\n      }\n    })();\n  }\n  static {\n    this.ɵfac = function ReviewParameterViewComponent_Factory(t) {\n      return new (t || ReviewParameterViewComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.UntypedFormBuilder), i0.ɵɵdirectiveInject(i3.CreateReviewParameterGQL), i0.ɵɵdirectiveInject(i3.UpdateReviewParameterGQL), i0.ɵɵdirectiveInject(i4.NzMessageService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ReviewParameterViewComponent,\n      selectors: [[\"app-review-parameter-view\"]],\n      decls: 16,\n      vars: 5,\n      consts: [[\"nzBackIcon\", \"\", \"nzTitle\", \"New Review Parameter\", \"nzSubtitle\", \"Pramaters of reviews that rider can select for his rating.\", 3, \"nzGhost\"], [3, \"nzActions\"], [\"nz-form\", \"\", 3, \"formGroup\", \"ngSubmit\"], [\"formControlName\", \"id\", \"type\", \"hidden\", \"hidden\", \"\"], [\"nzRequired\", \"\", \"nzFor\", \"title\"], [\"nzErrorTip\", \"The input is not valid name\"], [\"nz-input\", \"\", \"formControlName\", \"title\", \"id\", \"title\"], [\"nzFor\", \"isGood\", \"nzRequired\", \"\"], [\"formControlName\", \"isGood\", \"id\", \"isGood\"], [\"tmplActions\", \"\"], [\"nz-button\", \"\", \"nzType\", \"primary\", 3, \"disabled\", \"click\"]],\n      template: function ReviewParameterViewComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelement(0, \"nz-page-header\", 0);\n          i0.ɵɵelementStart(1, \"nz-card\", 1)(2, \"form\", 2);\n          i0.ɵɵlistener(\"ngSubmit\", function ReviewParameterViewComponent_Template_form_ngSubmit_2_listener() {\n            return ctx.onSubmit();\n          });\n          i0.ɵɵelement(3, \"input\", 3);\n          i0.ɵɵelementStart(4, \"nz-form-item\")(5, \"nz-form-label\", 4);\n          i0.ɵɵtext(6, \"Title\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"nz-form-control\", 5);\n          i0.ɵɵelement(8, \"input\", 6);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(9, \"nz-form-item\")(10, \"nz-form-label\", 7);\n          i0.ɵɵtext(11, \"Is Good\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"nz-form-control\");\n          i0.ɵɵelement(13, \"nz-switch\", 8);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(14, ReviewParameterViewComponent_ng_template_14_Template, 2, 1, \"ng-template\", null, 9, i0.ɵɵtemplateRefExtractor);\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          const _r1 = i0.ɵɵreference(15);\n          i0.ɵɵproperty(\"nzGhost\", false);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"nzActions\", i0.ɵɵpureFunction1(3, _c0, _r1));\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"formGroup\", ctx.form);\n        }\n      },\n      dependencies: [i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName, i5.NzInputDirective, i6.NzButtonComponent, i7.ɵNzTransitionPatchDirective, i8.NzWaveDirective, i9.NzColDirective, i9.NzRowDirective, i10.NzFormDirective, i10.NzFormItemComponent, i10.NzFormLabelComponent, i10.NzFormControlComponent, i11.NzPageHeaderComponent, i12.NzCardComponent, i13.NzSwitchComponent],\n      encapsulation: 2\n    });\n  }\n}","map":{"version":3,"names":["UntypedFormBuilder","Validators","ActivatedRoute","Router","CreateReviewParameterGQL","UpdateReviewParameterGQL","NzMessageService","firstValueFrom","i0","ɵɵelementStart","ɵɵlistener","ReviewParameterViewComponent_ng_template_14_Template_button_click_0_listener","ɵɵrestoreView","_r3","ctx_r2","ɵɵnextContext","ɵɵresetView","onSubmit","ɵɵtext","ɵɵelementEnd","ɵɵproperty","ctx_r0","form","invalid","ReviewParameterViewComponent","constructor","route","router","fb","createGQL","updateGQL","msg","group","id","title","required","isGood","ngAfterViewInit","initializeDrawingManager","data","subscribe","reviewParameter","val","feedbackParameter","patchValue","_this","_asyncToGenerator","update","value","mutate","input","navigate","relativeTo","root","error","message","ɵɵdirectiveInject","i1","i2","i3","i4","selectors","decls","vars","consts","template","ReviewParameterViewComponent_Template","rf","ctx","ɵɵelement","ReviewParameterViewComponent_Template_form_ngSubmit_2_listener","ɵɵtemplate","ReviewParameterViewComponent_ng_template_14_Template","ɵɵtemplateRefExtractor","ɵɵadvance","ɵɵpureFunction1","_c0","_r1"],"sources":["/Users/obiechina/Documents/ridy-flutter-full-taxi-solution 2/apps/admin-panel/src/app/cms/management/management-review-parameters/review-parameter-view/review-parameter-view.component.ts","/Users/obiechina/Documents/ridy-flutter-full-taxi-solution 2/apps/admin-panel/src/app/cms/management/management-review-parameters/review-parameter-view/review-parameter-view.component.html"],"sourcesContent":["import { AfterViewInit, Component } from '@angular/core';\nimport { UntypedFormBuilder, Validators } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { CreateReviewParameterGQL, ReviewParameterViewQuery, UpdateReviewParameterGQL } from '@ridy/admin-panel/generated/graphql';\nimport { NzMessageService } from 'ng-zorro-antd/message';\nimport { firstValueFrom } from 'rxjs';\n\n@Component({\n  selector: 'app-review-parameter-view',\n  templateUrl: './review-parameter-view.component.html'\n})\nexport class ReviewParameterViewComponent implements AfterViewInit {\n  form = this.fb.group({\n    id: [null],\n    title: [null, Validators.required],\n    isGood: [null, Validators.required],\n  });\n\n  constructor(\n    private route: ActivatedRoute,\n    private router: Router,\n    private fb: UntypedFormBuilder,\n    private createGQL: CreateReviewParameterGQL,\n    private updateGQL: UpdateReviewParameterGQL,\n    private msg: NzMessageService) { }\n\n  ngAfterViewInit(): void {\n    this.initializeDrawingManager();\n  }\n\n  initializeDrawingManager() {\n    this.route.data.subscribe(data => {\n      if (data.reviewParameter != null) {\n        const val: ReviewParameterViewQuery = data.reviewParameter.data;\n        const reviewParameter = val.feedbackParameter;\n        if (reviewParameter != null) {\n          this.form.patchValue(reviewParameter);\n        }\n      }\n    });\n  }\n\n  async onSubmit() {\n    try {\n      const { id, ...update } = this.form.value;\n      if (id == null) {\n        await firstValueFrom(this.createGQL.mutate({ input: update }));\n      } else {\n        await firstValueFrom(this.updateGQL.mutate({ id, update }));\n      }\n      this.router.navigate(['management/review-parameters'], { relativeTo: this.route.root });\n    } catch(error: any) {\n      this.msg.error(error.message);\n    }\n    \n  }\n}\n","<nz-page-header [nzGhost]=\"false\" nzBackIcon nzTitle=\"New Review Parameter\" nzSubtitle=\"Pramaters of reviews that rider can select for his rating.\">\n</nz-page-header>\n<nz-card [nzActions]=\"[tmplActions]\" style=\"mt-16\">\n  <form nz-form [formGroup]=\"form\" (ngSubmit)=\"onSubmit()\">\n    <input formControlName=\"id\" type=\"hidden\" hidden>\n    <nz-form-item>\n      <nz-form-label nzRequired nzFor=\"title\">Title</nz-form-label>\n      <nz-form-control nzErrorTip=\"The input is not valid name\">\n        <input nz-input formControlName=\"title\" id=\"title\" />\n      </nz-form-control>\n    </nz-form-item>\n    <nz-form-item>\n      <nz-form-label nzFor=\"isGood\" nzRequired>Is Good</nz-form-label>\n      <nz-form-control>\n        <nz-switch formControlName=\"isGood\" id=\"isGood\"></nz-switch>\n      </nz-form-control>\n    </nz-form-item>\n    \n    <ng-template #tmplActions>\n      <button nz-button nzType=\"primary\" [disabled]=\"form.invalid\" (click)=\"onSubmit()\">Save</button>\n    </ng-template>\n  </form>\n</nz-card>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}