{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport { deepMix, get, isArray } from '@antv/util';\nimport { getAngleByPoint } from '../../util/coordinate';\nimport { polarToCartesian } from '../../util/graphics';\nimport PolarLabel from './polar';\n/**\n * 饼图 label\n */\nvar PieLabel = /** @class */function (_super) {\n  __extends(PieLabel, _super);\n  function PieLabel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.defaultLayout = 'distribute';\n    return _this;\n  }\n  PieLabel.prototype.getDefaultLabelCfg = function (offset, position) {\n    var cfg = _super.prototype.getDefaultLabelCfg.call(this, offset, position);\n    return deepMix({}, cfg, get(this.geometry.theme, 'pieLabels', {}));\n  };\n  /** @override */\n  PieLabel.prototype.getLabelOffset = function (offset) {\n    return _super.prototype.getLabelOffset.call(this, offset) || 0;\n  };\n  PieLabel.prototype.getLabelRotate = function (angle, offset, isLabelLimit) {\n    var rotate;\n    if (offset < 0) {\n      rotate = angle;\n      if (rotate > Math.PI / 2) {\n        rotate = rotate - Math.PI;\n      }\n      if (rotate < -Math.PI / 2) {\n        rotate = rotate + Math.PI;\n      }\n    }\n    return rotate;\n  };\n  PieLabel.prototype.getLabelAlign = function (point) {\n    var coordinate = this.getCoordinate();\n    var center = coordinate.getCenter();\n    var align;\n    if (point.angle <= Math.PI / 2 && point.x >= center.x) {\n      align = 'left';\n    } else {\n      align = 'right';\n    }\n    if (point.offset <= 0) {\n      if (align === 'right') {\n        align = 'left';\n      } else {\n        align = 'right';\n      }\n    }\n    return align;\n  };\n  PieLabel.prototype.getArcPoint = function (point) {\n    return point;\n  };\n  PieLabel.prototype.getPointAngle = function (point) {\n    var coordinate = this.getCoordinate();\n    var startPoint = {\n      x: isArray(point.x) ? point.x[0] : point.x,\n      y: point.y[0]\n    };\n    var endPoint = {\n      x: isArray(point.x) ? point.x[1] : point.x,\n      y: point.y[1]\n    };\n    var angle;\n    var startAngle = getAngleByPoint(coordinate, startPoint);\n    if (point.points && point.points[0].y === point.points[1].y) {\n      angle = startAngle;\n    } else {\n      var endAngle = getAngleByPoint(coordinate, endPoint);\n      if (startAngle >= endAngle) {\n        // 100% pie slice\n        endAngle = endAngle + Math.PI * 2;\n      }\n      angle = startAngle + (endAngle - startAngle) / 2;\n    }\n    return angle;\n  };\n  /** @override */\n  PieLabel.prototype.getCirclePoint = function (angle, offset) {\n    var coordinate = this.getCoordinate();\n    var center = coordinate.getCenter();\n    var r = coordinate.getRadius() + offset;\n    return __assign(__assign({}, polarToCartesian(center.x, center.y, r, angle)), {\n      angle: angle,\n      r: r\n    });\n  };\n  return PieLabel;\n}(PolarLabel);\nexport default PieLabel;","map":{"version":3,"names":["__assign","__extends","deepMix","get","isArray","getAngleByPoint","polarToCartesian","PolarLabel","PieLabel","_super","_this","apply","arguments","defaultLayout","prototype","getDefaultLabelCfg","offset","position","cfg","call","geometry","theme","getLabelOffset","getLabelRotate","angle","isLabelLimit","rotate","Math","PI","getLabelAlign","point","coordinate","getCoordinate","center","getCenter","align","x","getArcPoint","getPointAngle","startPoint","y","endPoint","startAngle","points","endAngle","getCirclePoint","r","getRadius"],"sources":["/Users/obiechina/Documents/ridy-flutter-full-taxi-solution 2/node_modules/@antv/g2/esm/geometry/label/pie.js"],"sourcesContent":["import { __assign, __extends } from \"tslib\";\nimport { deepMix, get, isArray } from '@antv/util';\nimport { getAngleByPoint } from '../../util/coordinate';\nimport { polarToCartesian } from '../../util/graphics';\nimport PolarLabel from './polar';\n/**\n * 饼图 label\n */\nvar PieLabel = /** @class */ (function (_super) {\n    __extends(PieLabel, _super);\n    function PieLabel() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.defaultLayout = 'distribute';\n        return _this;\n    }\n    PieLabel.prototype.getDefaultLabelCfg = function (offset, position) {\n        var cfg = _super.prototype.getDefaultLabelCfg.call(this, offset, position);\n        return deepMix({}, cfg, get(this.geometry.theme, 'pieLabels', {}));\n    };\n    /** @override */\n    PieLabel.prototype.getLabelOffset = function (offset) {\n        return _super.prototype.getLabelOffset.call(this, offset) || 0;\n    };\n    PieLabel.prototype.getLabelRotate = function (angle, offset, isLabelLimit) {\n        var rotate;\n        if (offset < 0) {\n            rotate = angle;\n            if (rotate > Math.PI / 2) {\n                rotate = rotate - Math.PI;\n            }\n            if (rotate < -Math.PI / 2) {\n                rotate = rotate + Math.PI;\n            }\n        }\n        return rotate;\n    };\n    PieLabel.prototype.getLabelAlign = function (point) {\n        var coordinate = this.getCoordinate();\n        var center = coordinate.getCenter();\n        var align;\n        if (point.angle <= Math.PI / 2 && point.x >= center.x) {\n            align = 'left';\n        }\n        else {\n            align = 'right';\n        }\n        if (point.offset <= 0) {\n            if (align === 'right') {\n                align = 'left';\n            }\n            else {\n                align = 'right';\n            }\n        }\n        return align;\n    };\n    PieLabel.prototype.getArcPoint = function (point) {\n        return point;\n    };\n    PieLabel.prototype.getPointAngle = function (point) {\n        var coordinate = this.getCoordinate();\n        var startPoint = {\n            x: isArray(point.x) ? point.x[0] : point.x,\n            y: point.y[0],\n        };\n        var endPoint = {\n            x: isArray(point.x) ? point.x[1] : point.x,\n            y: point.y[1],\n        };\n        var angle;\n        var startAngle = getAngleByPoint(coordinate, startPoint);\n        if (point.points && point.points[0].y === point.points[1].y) {\n            angle = startAngle;\n        }\n        else {\n            var endAngle = getAngleByPoint(coordinate, endPoint);\n            if (startAngle >= endAngle) {\n                // 100% pie slice\n                endAngle = endAngle + Math.PI * 2;\n            }\n            angle = startAngle + (endAngle - startAngle) / 2;\n        }\n        return angle;\n    };\n    /** @override */\n    PieLabel.prototype.getCirclePoint = function (angle, offset) {\n        var coordinate = this.getCoordinate();\n        var center = coordinate.getCenter();\n        var r = coordinate.getRadius() + offset;\n        return __assign(__assign({}, polarToCartesian(center.x, center.y, r, angle)), { angle: angle, r: r });\n    };\n    return PieLabel;\n}(PolarLabel));\nexport default PieLabel;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}