{"ast":null,"code":"import { each, isNil } from '@antv/util';\n// 求以a为次幂，结果为b的基数，如 x^^a = b;求x\n// 虽然数学上 b 不支持负数，但是这里需要支持 负数\nexport function calBase(a, b) {\n  var e = Math.E;\n  var value;\n  if (b >= 0) {\n    value = Math.pow(e, Math.log(b) / a); // 使用换底公式求底\n  } else {\n    value = Math.pow(e, Math.log(-b) / a) * -1; // 使用换底公式求底\n  }\n\n  return value;\n}\nexport function log(a, b) {\n  if (a === 1) {\n    return 1;\n  }\n  return Math.log(b) / Math.log(a);\n}\nexport function getLogPositiveMin(values, base, max) {\n  if (isNil(max)) {\n    max = Math.max.apply(null, values);\n  }\n  var positiveMin = max;\n  each(values, function (value) {\n    if (value > 0 && value < positiveMin) {\n      positiveMin = value;\n    }\n  });\n  if (positiveMin === max) {\n    positiveMin = max / base;\n  }\n  if (positiveMin > 1) {\n    positiveMin = 1;\n  }\n  return positiveMin;\n}\nfunction digitLength(num) {\n  // Get digit length of e\n  var eSplit = num.toString().split(/[eE]/);\n  var len = (eSplit[0].split('.')[1] || '').length - +(eSplit[1] || 0);\n  return len > 0 ? len : 0;\n}\n/**\n * 高精度加法，解决 0.1 + 0.2 !== 0.3 的经典问题\n *\n * @param num1 加数\n * @param num2 被加数\n * @return {number} 返回值\n */\nexport function precisionAdd(num1, num2) {\n  var num1Digits = digitLength(num1);\n  var num2Digits = digitLength(num2);\n  var baseNum = Math.pow(10, Math.max(num1Digits, num2Digits));\n  return (num1 * baseNum + num2 * baseNum) / baseNum;\n}","map":{"version":3,"names":["each","isNil","calBase","a","b","e","Math","E","value","pow","log","getLogPositiveMin","values","base","max","apply","positiveMin","digitLength","num","eSplit","toString","split","len","length","precisionAdd","num1","num2","num1Digits","num2Digits","baseNum"],"sources":["/Users/obiechina/Documents/ridy-flutter-full-taxi-solution 2/node_modules/@antv/scale/esm/util/math.js"],"sourcesContent":["import { each, isNil } from '@antv/util';\n// 求以a为次幂，结果为b的基数，如 x^^a = b;求x\n// 虽然数学上 b 不支持负数，但是这里需要支持 负数\nexport function calBase(a, b) {\n    var e = Math.E;\n    var value;\n    if (b >= 0) {\n        value = Math.pow(e, Math.log(b) / a); // 使用换底公式求底\n    }\n    else {\n        value = Math.pow(e, Math.log(-b) / a) * -1; // 使用换底公式求底\n    }\n    return value;\n}\nexport function log(a, b) {\n    if (a === 1) {\n        return 1;\n    }\n    return Math.log(b) / Math.log(a);\n}\nexport function getLogPositiveMin(values, base, max) {\n    if (isNil(max)) {\n        max = Math.max.apply(null, values);\n    }\n    var positiveMin = max;\n    each(values, function (value) {\n        if (value > 0 && value < positiveMin) {\n            positiveMin = value;\n        }\n    });\n    if (positiveMin === max) {\n        positiveMin = max / base;\n    }\n    if (positiveMin > 1) {\n        positiveMin = 1;\n    }\n    return positiveMin;\n}\nfunction digitLength(num) {\n    // Get digit length of e\n    var eSplit = num.toString().split(/[eE]/);\n    var len = (eSplit[0].split('.')[1] || '').length - +(eSplit[1] || 0);\n    return len > 0 ? len : 0;\n}\n/**\n * 高精度加法，解决 0.1 + 0.2 !== 0.3 的经典问题\n *\n * @param num1 加数\n * @param num2 被加数\n * @return {number} 返回值\n */\nexport function precisionAdd(num1, num2) {\n    var num1Digits = digitLength(num1);\n    var num2Digits = digitLength(num2);\n    var baseNum = Math.pow(10, Math.max(num1Digits, num2Digits));\n    return (num1 * baseNum + num2 * baseNum) / baseNum;\n}\n"],"mappings":"AAAA,SAASA,IAAI,EAAEC,KAAK,QAAQ,YAAY;AACxC;AACA;AACA,OAAO,SAASC,OAAOA,CAACC,CAAC,EAAEC,CAAC,EAAE;EAC1B,IAAIC,CAAC,GAAGC,IAAI,CAACC,CAAC;EACd,IAAIC,KAAK;EACT,IAAIJ,CAAC,IAAI,CAAC,EAAE;IACRI,KAAK,GAAGF,IAAI,CAACG,GAAG,CAACJ,CAAC,EAAEC,IAAI,CAACI,GAAG,CAACN,CAAC,CAAC,GAAGD,CAAC,CAAC,CAAC,CAAC;EAC1C,CAAC,MACI;IACDK,KAAK,GAAGF,IAAI,CAACG,GAAG,CAACJ,CAAC,EAAEC,IAAI,CAACI,GAAG,CAAC,CAACN,CAAC,CAAC,GAAGD,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EAChD;;EACA,OAAOK,KAAK;AAChB;AACA,OAAO,SAASE,GAAGA,CAACP,CAAC,EAAEC,CAAC,EAAE;EACtB,IAAID,CAAC,KAAK,CAAC,EAAE;IACT,OAAO,CAAC;EACZ;EACA,OAAOG,IAAI,CAACI,GAAG,CAACN,CAAC,CAAC,GAAGE,IAAI,CAACI,GAAG,CAACP,CAAC,CAAC;AACpC;AACA,OAAO,SAASQ,iBAAiBA,CAACC,MAAM,EAAEC,IAAI,EAAEC,GAAG,EAAE;EACjD,IAAIb,KAAK,CAACa,GAAG,CAAC,EAAE;IACZA,GAAG,GAAGR,IAAI,CAACQ,GAAG,CAACC,KAAK,CAAC,IAAI,EAAEH,MAAM,CAAC;EACtC;EACA,IAAII,WAAW,GAAGF,GAAG;EACrBd,IAAI,CAACY,MAAM,EAAE,UAAUJ,KAAK,EAAE;IAC1B,IAAIA,KAAK,GAAG,CAAC,IAAIA,KAAK,GAAGQ,WAAW,EAAE;MAClCA,WAAW,GAAGR,KAAK;IACvB;EACJ,CAAC,CAAC;EACF,IAAIQ,WAAW,KAAKF,GAAG,EAAE;IACrBE,WAAW,GAAGF,GAAG,GAAGD,IAAI;EAC5B;EACA,IAAIG,WAAW,GAAG,CAAC,EAAE;IACjBA,WAAW,GAAG,CAAC;EACnB;EACA,OAAOA,WAAW;AACtB;AACA,SAASC,WAAWA,CAACC,GAAG,EAAE;EACtB;EACA,IAAIC,MAAM,GAAGD,GAAG,CAACE,QAAQ,CAAC,CAAC,CAACC,KAAK,CAAC,MAAM,CAAC;EACzC,IAAIC,GAAG,GAAG,CAACH,MAAM,CAAC,CAAC,CAAC,CAACE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,EAAEE,MAAM,GAAG,EAAEJ,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;EACpE,OAAOG,GAAG,GAAG,CAAC,GAAGA,GAAG,GAAG,CAAC;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASE,YAAYA,CAACC,IAAI,EAAEC,IAAI,EAAE;EACrC,IAAIC,UAAU,GAAGV,WAAW,CAACQ,IAAI,CAAC;EAClC,IAAIG,UAAU,GAAGX,WAAW,CAACS,IAAI,CAAC;EAClC,IAAIG,OAAO,GAAGvB,IAAI,CAACG,GAAG,CAAC,EAAE,EAAEH,IAAI,CAACQ,GAAG,CAACa,UAAU,EAAEC,UAAU,CAAC,CAAC;EAC5D,OAAO,CAACH,IAAI,GAAGI,OAAO,GAAGH,IAAI,GAAGG,OAAO,IAAIA,OAAO;AACtD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}