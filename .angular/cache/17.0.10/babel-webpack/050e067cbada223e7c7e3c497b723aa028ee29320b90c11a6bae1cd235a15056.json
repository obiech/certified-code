{"ast":null,"code":"import { __extends, __read } from \"tslib\";\nimport { deepMix, each, filter, get } from '@antv/util';\nimport { DIRECTION } from '../constant';\nimport { getAnglePoint, getFactTitleConfig } from '../util/facet';\nimport { Facet } from './facet';\n/**\n * @ignore\n * 镜像分面\n */\nvar Circle = /** @class */function (_super) {\n  __extends(Circle, _super);\n  function Circle() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  Circle.prototype.getDefaultCfg = function () {\n    return deepMix({}, _super.prototype.getDefaultCfg.call(this), {\n      type: 'circle',\n      showTitle: true,\n      title: _super.prototype.getDefaultTitleCfg.call(this)\n    });\n  };\n  Circle.prototype.render = function () {\n    _super.prototype.render.call(this);\n    if (this.cfg.showTitle) {\n      this.renderTitle();\n    }\n  };\n  /**\n   * 根据总数和当前索引，计算分面的 region\n   * @param count\n   * @param index\n   */\n  Circle.prototype.getRegion = function (count, index) {\n    var r = 1 / 2; // 画布半径\n    // 画布圆心\n    var center = {\n      x: 0.5,\n      y: 0.5\n    };\n    // 每隔分面间隔的弧度\n    var avgAngle = Math.PI * 2 / count;\n    // 当前分面所在的弧度\n    var angle = -1 * Math.PI / 2 + avgAngle * index;\n    // TODO 没看懂\n    var facetR = r / (1 + 1 / Math.sin(avgAngle / 2));\n    // 分面的中心点\n    var middle = getAnglePoint(center, r - facetR, angle);\n    var startAngle = Math.PI * 5 / 4; // 右上角\n    var endAngle = Math.PI * 1 / 4; // 左下角\n    return {\n      start: getAnglePoint(middle, facetR, startAngle),\n      end: getAnglePoint(middle, facetR, endAngle)\n    };\n  };\n  Circle.prototype.afterEachView = function (view, facet) {\n    this.processAxis(view, facet);\n  };\n  Circle.prototype.beforeEachView = function (view, facet) {};\n  Circle.prototype.generateFacets = function (data) {\n    var _this = this;\n    var _a = this.cfg,\n      fields = _a.fields,\n      type = _a.type;\n    var _b = __read(fields, 1),\n      field = _b[0];\n    if (!field) {\n      throw new Error('No `fields` specified!');\n    }\n    var values = this.getFieldValues(data, field);\n    var count = values.length;\n    var rst = [];\n    values.forEach(function (value, index) {\n      var conditions = [{\n        field: field,\n        value: value,\n        values: values\n      }];\n      var facetData = filter(data, _this.getFacetDataFilter(conditions));\n      var facet = {\n        type: type,\n        data: facetData,\n        region: _this.getRegion(count, index),\n        columnValue: value,\n        columnField: field,\n        columnIndex: index,\n        columnValuesLength: count,\n        rowValue: null,\n        rowField: null,\n        rowIndex: 0,\n        rowValuesLength: 1\n      };\n      rst.push(facet);\n    });\n    return rst;\n  };\n  Circle.prototype.getXAxisOption = function (x, axes, option, facet) {\n    // 不做任何处理\n    return option;\n  };\n  /**\n   * 设置 y 坐标轴的文本、title 是否显示\n   * @param y\n   * @param axes\n   * @param option\n   * @param facet\n   */\n  Circle.prototype.getYAxisOption = function (y, axes, option, facet) {\n    // 不做任何处理\n    return option;\n  };\n  /**\n   * facet title\n   */\n  Circle.prototype.renderTitle = function () {\n    var _this = this;\n    each(this.facets, function (facet) {\n      var columnValue = facet.columnValue,\n        view = facet.view;\n      var formatter = get(_this.cfg.title, 'formatter');\n      var config = deepMix({\n        position: ['50%', '0%'],\n        content: formatter ? formatter(columnValue) : columnValue\n      }, getFactTitleConfig(DIRECTION.TOP), _this.cfg.title);\n      view.annotation().text(config);\n    });\n  };\n  return Circle;\n}(Facet);\nexport default Circle;","map":{"version":3,"names":["__extends","__read","deepMix","each","filter","get","DIRECTION","getAnglePoint","getFactTitleConfig","Facet","Circle","_super","apply","arguments","prototype","getDefaultCfg","call","type","showTitle","title","getDefaultTitleCfg","render","cfg","renderTitle","getRegion","count","index","r","center","x","y","avgAngle","Math","PI","angle","facetR","sin","middle","startAngle","endAngle","start","end","afterEachView","view","facet","processAxis","beforeEachView","generateFacets","data","_this","_a","fields","_b","field","Error","values","getFieldValues","length","rst","forEach","value","conditions","facetData","getFacetDataFilter","region","columnValue","columnField","columnIndex","columnValuesLength","rowValue","rowField","rowIndex","rowValuesLength","push","getXAxisOption","axes","option","getYAxisOption","facets","formatter","config","position","content","TOP","annotation","text"],"sources":["/Users/obiechina/Documents/ridy-flutter-full-taxi-solution 2/node_modules/@antv/g2/esm/facet/circle.js"],"sourcesContent":["import { __extends, __read } from \"tslib\";\nimport { deepMix, each, filter, get } from '@antv/util';\nimport { DIRECTION } from '../constant';\nimport { getAnglePoint, getFactTitleConfig } from '../util/facet';\nimport { Facet } from './facet';\n/**\n * @ignore\n * 镜像分面\n */\nvar Circle = /** @class */ (function (_super) {\n    __extends(Circle, _super);\n    function Circle() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Circle.prototype.getDefaultCfg = function () {\n        return deepMix({}, _super.prototype.getDefaultCfg.call(this), {\n            type: 'circle',\n            showTitle: true,\n            title: _super.prototype.getDefaultTitleCfg.call(this),\n        });\n    };\n    Circle.prototype.render = function () {\n        _super.prototype.render.call(this);\n        if (this.cfg.showTitle) {\n            this.renderTitle();\n        }\n    };\n    /**\n     * 根据总数和当前索引，计算分面的 region\n     * @param count\n     * @param index\n     */\n    Circle.prototype.getRegion = function (count, index) {\n        var r = 1 / 2; // 画布半径\n        // 画布圆心\n        var center = { x: 0.5, y: 0.5 };\n        // 每隔分面间隔的弧度\n        var avgAngle = (Math.PI * 2) / count;\n        // 当前分面所在的弧度\n        var angle = (-1 * Math.PI) / 2 + avgAngle * index;\n        // TODO 没看懂\n        var facetR = r / (1 + 1 / Math.sin(avgAngle / 2));\n        // 分面的中心点\n        var middle = getAnglePoint(center, r - facetR, angle);\n        var startAngle = (Math.PI * 5) / 4; // 右上角\n        var endAngle = (Math.PI * 1) / 4; // 左下角\n        return {\n            start: getAnglePoint(middle, facetR, startAngle),\n            end: getAnglePoint(middle, facetR, endAngle),\n        };\n    };\n    Circle.prototype.afterEachView = function (view, facet) {\n        this.processAxis(view, facet);\n    };\n    Circle.prototype.beforeEachView = function (view, facet) { };\n    Circle.prototype.generateFacets = function (data) {\n        var _this = this;\n        var _a = this.cfg, fields = _a.fields, type = _a.type;\n        var _b = __read(fields, 1), field = _b[0];\n        if (!field) {\n            throw new Error('No `fields` specified!');\n        }\n        var values = this.getFieldValues(data, field);\n        var count = values.length;\n        var rst = [];\n        values.forEach(function (value, index) {\n            var conditions = [{ field: field, value: value, values: values }];\n            var facetData = filter(data, _this.getFacetDataFilter(conditions));\n            var facet = {\n                type: type,\n                data: facetData,\n                region: _this.getRegion(count, index),\n                columnValue: value,\n                columnField: field,\n                columnIndex: index,\n                columnValuesLength: count,\n                rowValue: null,\n                rowField: null,\n                rowIndex: 0,\n                rowValuesLength: 1,\n            };\n            rst.push(facet);\n        });\n        return rst;\n    };\n    Circle.prototype.getXAxisOption = function (x, axes, option, facet) {\n        // 不做任何处理\n        return option;\n    };\n    /**\n     * 设置 y 坐标轴的文本、title 是否显示\n     * @param y\n     * @param axes\n     * @param option\n     * @param facet\n     */\n    Circle.prototype.getYAxisOption = function (y, axes, option, facet) {\n        // 不做任何处理\n        return option;\n    };\n    /**\n     * facet title\n     */\n    Circle.prototype.renderTitle = function () {\n        var _this = this;\n        each(this.facets, function (facet) {\n            var columnValue = facet.columnValue, view = facet.view;\n            var formatter = get(_this.cfg.title, 'formatter');\n            var config = deepMix({\n                position: ['50%', '0%'],\n                content: formatter ? formatter(columnValue) : columnValue,\n            }, getFactTitleConfig(DIRECTION.TOP), _this.cfg.title);\n            view.annotation().text(config);\n        });\n    };\n    return Circle;\n}(Facet));\nexport default Circle;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}