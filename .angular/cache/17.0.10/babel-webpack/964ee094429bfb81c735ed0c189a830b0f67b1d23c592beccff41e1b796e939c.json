{"ast":null,"code":"import { ActivatedRoute, Router } from '@angular/router';\nimport { TranslateService } from '@ngx-translate/core';\nimport { NzMessageService } from 'ng-zorro-antd/message';\nimport { NzModalService } from 'ng-zorro-antd/modal';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"ng-zorro-antd/message\";\nimport * as i3 from \"ng-zorro-antd/modal\";\nimport * as i4 from \"@ngx-translate/core\";\nimport * as i5 from \"ng-zorro-antd/card\";\nimport * as i6 from \"ng-zorro-antd/steps\";\nexport class DispatcherComponent {\n  constructor(router, route, messageService, modal, translate) {\n    this.router = router;\n    this.route = route;\n    this.messageService = messageService;\n    this.modal = modal;\n    this.translate = translate;\n    this.current = 0;\n    this.services = [];\n    this.tripDistance = 0;\n    this.tripDuration = 0;\n    this.isLoadingRiders = false;\n  }\n  ngOnInit() {\n    this.route.queryParams.subscribe(x => {\n      if (x['serviceId'] != null) {\n        this.current = 3;\n      } else if (x['points'] != null) {\n        this.current = 2;\n      } else if (x['riderId'] != null) {\n        this.selectedRiderId = parseInt(x['riderId']);\n        this.current = 1;\n      }\n    });\n    // this.socket.on('driverAccepted', async (request: Request) => {\n    //   let modal = this.modal.create({\n    //     nzTitle: await this.translate.get('message.success.title').toPromise(),\n    //     nzContent: await this.translate.get('dispatcher.message.requestAssigned').toPromise(),\n    //     nzFooter: [\n    //       {\n    //         label: await this.translate.get('dispatcher.viewRequest').toPromise(),\n    //         type: 'primary',\n    //         onClick: () => {\n    //           this.viewRequest(request.id);\n    //           modal.close();\n    //         }\n    //       },\n    //       {\n    //         label: await this.translate.get('profile.cancel').toPromise(),\n    //         onClick: () => {\n    //           modal.close();\n    //         }\n    //       }\n    //     ]\n    //   });\n    // });\n  }\n\n  viewRequest(id) {\n    this.router.navigate(['../../../requests/view', id], {\n      relativeTo: this.route\n    });\n  }\n  refreshDrivers() {\n    // this.socket.emit('getDriversLocation', null, (result: GetAllDriversLocationResult[]) => {\n    //   this.drivers = result;\n    //   this.centerMap();\n    // });\n  }\n  static {\n    this.ɵfac = function DispatcherComponent_Factory(t) {\n      return new (t || DispatcherComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.NzMessageService), i0.ɵɵdirectiveInject(i3.NzModalService), i0.ɵɵdirectiveInject(i4.TranslateService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: DispatcherComponent,\n      selectors: [[\"app-dispatcher\"]],\n      decls: 17,\n      vars: 25,\n      consts: [[1, \"grid\", \"grid-cols-1\"], [3, \"nzCurrent\"], [3, \"nzTitle\", \"nzDescription\"], [1, \"h-4\", \"w-full\"]],\n      template: function DispatcherComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"nz-card\");\n          i0.ɵɵelement(1, \"div\", 0);\n          i0.ɵɵelementStart(2, \"nz-steps\", 1);\n          i0.ɵɵelement(3, \"nz-step\", 2);\n          i0.ɵɵpipe(4, \"translate\");\n          i0.ɵɵpipe(5, \"translate\");\n          i0.ɵɵelement(6, \"nz-step\", 2);\n          i0.ɵɵpipe(7, \"translate\");\n          i0.ɵɵpipe(8, \"translate\");\n          i0.ɵɵelement(9, \"nz-step\", 2);\n          i0.ɵɵpipe(10, \"translate\");\n          i0.ɵɵpipe(11, \"translate\");\n          i0.ɵɵelement(12, \"nz-step\", 2);\n          i0.ɵɵpipe(13, \"translate\");\n          i0.ɵɵpipe(14, \"translate\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(15, \"div\", 3)(16, \"router-outlet\");\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"nzCurrent\", ctx.current);\n          i0.ɵɵadvance();\n          i0.ɵɵpropertyInterpolate(\"nzTitle\", i0.ɵɵpipeBind1(4, 9, \"dispatcher.rider.title\"));\n          i0.ɵɵpropertyInterpolate(\"nzDescription\", i0.ɵɵpipeBind1(5, 11, \"dispatcher.rider.description\"));\n          i0.ɵɵadvance(3);\n          i0.ɵɵpropertyInterpolate(\"nzTitle\", i0.ɵɵpipeBind1(7, 13, \"dispatcher.location.title\"));\n          i0.ɵɵpropertyInterpolate(\"nzDescription\", i0.ɵɵpipeBind1(8, 15, \"dispatcher.location.description\"));\n          i0.ɵɵadvance(3);\n          i0.ɵɵpropertyInterpolate(\"nzTitle\", i0.ɵɵpipeBind1(10, 17, \"dispatcher.service.title\"));\n          i0.ɵɵpropertyInterpolate(\"nzDescription\", i0.ɵɵpipeBind1(11, 19, \"dispatcher.service.description\"));\n          i0.ɵɵadvance(3);\n          i0.ɵɵpropertyInterpolate(\"nzTitle\", i0.ɵɵpipeBind1(13, 21, \"dispatcher.looking.title\"));\n          i0.ɵɵpropertyInterpolate(\"nzDescription\", i0.ɵɵpipeBind1(14, 23, \"dispatcher.looking.description\"));\n        }\n      },\n      dependencies: [i1.RouterOutlet, i5.NzCardComponent, i6.NzStepsComponent, i6.NzStepComponent, i4.TranslatePipe],\n      encapsulation: 2\n    });\n  }\n}","map":{"version":3,"names":["ActivatedRoute","Router","TranslateService","NzMessageService","NzModalService","DispatcherComponent","constructor","router","route","messageService","modal","translate","current","services","tripDistance","tripDuration","isLoadingRiders","ngOnInit","queryParams","subscribe","x","selectedRiderId","parseInt","viewRequest","id","navigate","relativeTo","refreshDrivers","i0","ɵɵdirectiveInject","i1","i2","i3","i4","selectors","decls","vars","consts","template","DispatcherComponent_Template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","ɵɵpropertyInterpolate","ɵɵpipeBind1"],"sources":["/Users/obiechina/Documents/ridy-flutter-full-taxi-solution 2/apps/admin-panel/src/app/cms/home/dispatcher/dispatcher.component.ts","/Users/obiechina/Documents/ridy-flutter-full-taxi-solution 2/apps/admin-panel/src/app/cms/home/dispatcher/dispatcher.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { TranslateService } from '@ngx-translate/core';\nimport { NzMessageService } from 'ng-zorro-antd/message';\nimport { NzModalService } from 'ng-zorro-antd/modal';\n\n@Component({\n  selector: 'app-dispatcher',\n  templateUrl: './dispatcher.component.html',\n})\nexport class DispatcherComponent implements OnInit {\n  current = 0;\n  selectedRiderId!: number;\n  services: any[] = [];\n  currency!: string;\n  tripDistance = 0;\n  tripDuration = 0;\n  isLoadingRiders = false;\n\n  constructor(\n    private router: Router,\n    private route: ActivatedRoute,\n    private messageService: NzMessageService,\n    private modal: NzModalService,\n    private translate: TranslateService\n  ) {}\n\n  ngOnInit(): void {\n    this.route.queryParams.subscribe((x) => {\n      if (x['serviceId'] != null) {\n        this.current = 3;\n      } else if (x['points'] != null) {\n        this.current = 2;\n      } else if (x['riderId'] != null) {\n        this.selectedRiderId = parseInt(x['riderId']);\n        this.current = 1;\n      }\n    });\n    // this.socket.on('driverAccepted', async (request: Request) => {\n    //   let modal = this.modal.create({\n    //     nzTitle: await this.translate.get('message.success.title').toPromise(),\n    //     nzContent: await this.translate.get('dispatcher.message.requestAssigned').toPromise(),\n    //     nzFooter: [\n    //       {\n    //         label: await this.translate.get('dispatcher.viewRequest').toPromise(),\n    //         type: 'primary',\n    //         onClick: () => {\n    //           this.viewRequest(request.id);\n    //           modal.close();\n    //         }\n    //       },\n    //       {\n    //         label: await this.translate.get('profile.cancel').toPromise(),\n    //         onClick: () => {\n    //           modal.close();\n    //         }\n    //       }\n    //     ]\n    //   });\n    // });\n  }\n\n  viewRequest(id: number) {\n    this.router.navigate(['../../../requests/view', id], {\n      relativeTo: this.route,\n    });\n  }\n\n  refreshDrivers() {\n    // this.socket.emit('getDriversLocation', null, (result: GetAllDriversLocationResult[]) => {\n    //   this.drivers = result;\n    //   this.centerMap();\n    // });\n  }\n}\n","<nz-card>\n  <div class=\"grid grid-cols-1\"></div>\n  <nz-steps [nzCurrent]=\"current\">\n    <nz-step nzTitle=\"{{ 'dispatcher.rider.title' | translate }}\" nzDescription=\"{{ 'dispatcher.rider.description' | translate }}\"></nz-step>\n    <nz-step nzTitle=\"{{ 'dispatcher.location.title' | translate }}\" nzDescription=\"{{ 'dispatcher.location.description' | translate }}\"></nz-step>\n    <nz-step nzTitle=\"{{ 'dispatcher.service.title' | translate }}\" nzDescription=\"{{ 'dispatcher.service.description' | translate }}\"></nz-step>\n    <nz-step nzTitle=\"{{ 'dispatcher.looking.title' | translate }}\" nzDescription=\"{{ 'dispatcher.looking.description' | translate }}\"></nz-step>\n  </nz-steps>\n  <div class=\"h-4 w-full\"></div>\n  <router-outlet></router-outlet>\n</nz-card>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}