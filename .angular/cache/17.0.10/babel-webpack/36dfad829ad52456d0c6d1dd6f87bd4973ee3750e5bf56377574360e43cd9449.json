{"ast":null,"code":"import { __values } from \"tslib\";\nimport { isObject, each, get, groupBy, isNil, filter } from '@antv/util';\nimport { polarToCartesian } from '../../../../util/graphics';\nimport { antiCollision } from './util';\n/** label text和line距离 4px */\nvar MARGIN = 4;\n/**\n * 配置 labelline\n * @param item PolarLabelItem\n */\nfunction drawLabelline(item /** PolarLabelItem */, coordinate) {\n  /** 坐标圆心 */\n  var center = coordinate.getCenter();\n  /** 圆半径 */\n  var radius = coordinate.getRadius();\n  if (item && item.labelLine) {\n    var angle = item.angle,\n      labelOffset = item.offset;\n    // 贴近圆周\n    var startPoint = polarToCartesian(center.x, center.y, radius, angle);\n    var itemX = item.x + get(item, 'offsetX', 0) * (Math.cos(angle) > 0 ? 1 : -1);\n    var itemY = item.y + get(item, 'offsetY', 0) * (Math.sin(angle) > 0 ? 1 : -1);\n    var endPoint = {\n      x: itemX - Math.cos(angle) * MARGIN,\n      y: itemY - Math.sin(angle) * MARGIN\n    };\n    var smoothConnector = item.labelLine.smooth;\n    var path = [];\n    var dx = endPoint.x - center.x;\n    var dy = endPoint.y - center.y;\n    var endAngle = Math.atan(dy / dx);\n    // 第三象限 & 第四象限\n    if (dx < 0) {\n      endAngle += Math.PI;\n    }\n    // 默认 smooth, undefined 也为 smooth\n    if (smoothConnector === false) {\n      if (!isObject(item.labelLine)) {\n        // labelLine: true\n        item.labelLine = {};\n      }\n      // 表示弧线的方向，0 表示从起点到终点沿逆时针画弧, 1 表示顺时针\n      var sweepFlag = 0;\n      // 第一象限\n      if (angle < 0 && angle > -Math.PI / 2 || angle > Math.PI * 1.5) {\n        if (endPoint.y > startPoint.y) {\n          sweepFlag = 1;\n        }\n      }\n      // 第二象限\n      if (angle >= 0 && angle < Math.PI / 2) {\n        if (endPoint.y > startPoint.y) {\n          sweepFlag = 1;\n        }\n      }\n      // 第三象限\n      if (angle >= Math.PI / 2 && angle < Math.PI) {\n        if (startPoint.y > endPoint.y) {\n          sweepFlag = 1;\n        }\n      }\n      // 第四象限\n      if (angle < -Math.PI / 2 || angle >= Math.PI && angle < Math.PI * 1.5) {\n        if (startPoint.y > endPoint.y) {\n          sweepFlag = 1;\n        }\n      }\n      var distance = labelOffset / 2 > 4 ? 4 : Math.max(labelOffset / 2 - 1, 0);\n      var breakPoint = polarToCartesian(center.x, center.y, radius + distance, angle);\n      // 圆弧的结束点\n      var breakPoint3 = polarToCartesian(center.x, center.y, radius + labelOffset / 2, endAngle);\n      /**\n       * @example\n       * M 100 100 L100 90 A 50 50 0 0 0 150 50\n       * 移动至 (100, 100), 连接到 (100, 90), 以 (50, 50) 为圆心，绘制圆弧至 (150, 50);\n       * A 命令的第 4 个参数 large-arc-flag, 决定弧线是大于还是小于 180 度: 0 表示小角度弧，1 表示大角\n       * 第 5 个参数: 是否顺时针绘制\n       */\n      // 默认小弧\n      var largeArcFlag = 0;\n      // step1: 移动至起点\n      path.push(\"M \".concat(startPoint.x, \" \").concat(startPoint.y));\n      // step2: 连接拐点\n      path.push(\"L \".concat(breakPoint.x, \" \").concat(breakPoint.y));\n      // step3: 绘制圆弧 至 结束点\n      path.push(\"A \".concat(center.x, \" \").concat(center.y, \" 0 \").concat(largeArcFlag, \" \").concat(sweepFlag, \" \").concat(breakPoint3.x, \" \").concat(breakPoint3.y));\n      // step4: 连接结束点\n      path.push(\"L \".concat(endPoint.x, \" \").concat(endPoint.y));\n    } else {\n      var breakPoint = polarToCartesian(center.x, center.y, radius + (labelOffset / 2 > 4 ? 4 : Math.max(labelOffset / 2 - 1, 0)), angle);\n      // G2 旧的拉线\n      // path.push('Q', `${breakPoint.x}`, `${breakPoint.y}`, `${endPoint.x}`, `${endPoint.y}`);\n      var xSign = startPoint.x < center.x ? 1 : -1;\n      // step1: 连接结束点\n      path.push(\"M \".concat(endPoint.x, \" \").concat(endPoint.y));\n      var slope1 = (startPoint.y - center.y) / (startPoint.x - center.x);\n      var slope2 = (endPoint.y - center.y) / (endPoint.x - center.x);\n      if (Math.abs(slope1 - slope2) > Math.pow(Math.E, -16)) {\n        // step2: 绘制 curve line (起点 & 结合点与圆心的斜率不等时, 由于存在误差, 使用近似处理)\n        path.push.apply(path, ['C', endPoint.x + xSign * 4, endPoint.y, 2 * breakPoint.x - startPoint.x, 2 * breakPoint.y - startPoint.y, startPoint.x, startPoint.y]);\n      }\n      // step3: 连接至起点\n      path.push(\"L \".concat(startPoint.x, \" \").concat(startPoint.y));\n    }\n    item.labelLine.path = path.join(' ');\n  }\n}\n/**\n * 饼图 outer-label 布局, 适用于 type = pie 且 label offset > 0 的标签\n */\nexport function pieOuterLabelLayout(originalItems, labels, shapes, region) {\n  var e_1, _a;\n  var items = filter(originalItems, function (item) {\n    return !isNil(item);\n  });\n  /** 坐标系 */\n  var coordinate = labels[0] && labels[0].get('coordinate');\n  if (!coordinate) {\n    return;\n  }\n  /** 坐标圆心 */\n  var center = coordinate.getCenter();\n  /** 圆半径 */\n  var radius = coordinate.getRadius();\n  /** label shapes */\n  var labelsMap = {};\n  try {\n    for (var labels_1 = __values(labels), labels_1_1 = labels_1.next(); !labels_1_1.done; labels_1_1 = labels_1.next()) {\n      var labelShape = labels_1_1.value;\n      labelsMap[labelShape.get('id')] = labelShape;\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (labels_1_1 && !labels_1_1.done && (_a = labels_1.return)) _a.call(labels_1);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n  // note labelHeight 可以控制 label 的行高\n  var labelHeight = get(items[0], 'labelHeight', 14);\n  var labelOffset = get(items[0], 'offset', 0);\n  if (labelOffset <= 0) {\n    return;\n  }\n  var LEFT_HALF_KEY = 'left';\n  var RIGHT_HALF_KEY = 'right';\n  // step 1: separate labels\n  var separateLabels = groupBy(items, function (item) {\n    return item.x < center.x ? LEFT_HALF_KEY : RIGHT_HALF_KEY;\n  });\n  var start = coordinate.start,\n    end = coordinate.end;\n  // step2: calculate totalHeight\n  var totalHeight = Math.min((radius + labelOffset + labelHeight) * 2, coordinate.getHeight());\n  var totalR = totalHeight / 2;\n  /** labels 容器的范围(后续根据组件的布局设计进行调整) */\n  var labelsContainerRange = {\n    minX: start.x,\n    maxX: end.x,\n    minY: center.y - totalR,\n    maxY: center.y + totalR\n  };\n  // step 3: antiCollision\n  each(separateLabels, function (half, key) {\n    var maxLabelsCountForOneSide = Math.floor(totalHeight / labelHeight);\n    if (half.length > maxLabelsCountForOneSide) {\n      half.sort(function (a, b) {\n        // sort by percentage DESC\n        return b.percent - a.percent;\n      });\n      each(half, function (labelItem, idx) {\n        if (idx + 1 > maxLabelsCountForOneSide) {\n          labelsMap[labelItem.id].set('visible', false);\n          labelItem.invisible = true;\n        }\n      });\n    }\n    antiCollision(half, labelHeight, labelsContainerRange);\n  });\n  each(separateLabels, function (half, key) {\n    each(half, function (item) {\n      var isRight = key === RIGHT_HALF_KEY;\n      var labelShape = labelsMap[item.id];\n      // because group could not effect content-shape, should set content-shape position manually\n      var content = labelShape.getChildByIndex(0);\n      // textShape 发生过调整\n      if (content) {\n        var r = radius + labelOffset;\n        // (x - cx)^2 + (y - cy)^2 = totalR^2\n        var dy = item.y - center.y;\n        var rPow2 = Math.pow(r, 2);\n        var dyPow2 = Math.pow(dy, 2);\n        var dxPow2 = rPow2 - dyPow2 > 0 ? rPow2 - dyPow2 : 0;\n        var dx = Math.sqrt(dxPow2);\n        var dx_offset = Math.abs(Math.cos(item.angle) * r);\n        if (!isRight) {\n          // left\n          item.x = center.x - Math.max(dx, dx_offset);\n        } else {\n          // right\n          item.x = center.x + Math.max(dx, dx_offset);\n        }\n      }\n      // adjust labelShape\n      if (content) {\n        content.attr('y', item.y);\n        content.attr('x', item.x);\n      }\n      drawLabelline(item, coordinate);\n    });\n  });\n}","map":{"version":3,"names":["__values","isObject","each","get","groupBy","isNil","filter","polarToCartesian","antiCollision","MARGIN","drawLabelline","item","coordinate","center","getCenter","radius","getRadius","labelLine","angle","labelOffset","offset","startPoint","x","y","itemX","Math","cos","itemY","sin","endPoint","smoothConnector","smooth","path","dx","dy","endAngle","atan","PI","sweepFlag","distance","max","breakPoint","breakPoint3","largeArcFlag","push","concat","xSign","slope1","slope2","abs","pow","E","apply","join","pieOuterLabelLayout","originalItems","labels","shapes","region","e_1","_a","items","labelsMap","labels_1","labels_1_1","next","done","labelShape","value","e_1_1","error","return","call","labelHeight","LEFT_HALF_KEY","RIGHT_HALF_KEY","separateLabels","start","end","totalHeight","min","getHeight","totalR","labelsContainerRange","minX","maxX","minY","maxY","half","key","maxLabelsCountForOneSide","floor","length","sort","a","b","percent","labelItem","idx","id","set","invisible","isRight","content","getChildByIndex","r","rPow2","dyPow2","dxPow2","sqrt","dx_offset","attr"],"sources":["/Users/obiechina/Documents/ridy-flutter-full-taxi-solution 2/node_modules/@antv/g2/esm/geometry/label/layout/pie/outer.js"],"sourcesContent":["import { __values } from \"tslib\";\nimport { isObject, each, get, groupBy, isNil, filter } from '@antv/util';\nimport { polarToCartesian } from '../../../../util/graphics';\nimport { antiCollision } from './util';\n/** label text和line距离 4px */\nvar MARGIN = 4;\n/**\n * 配置 labelline\n * @param item PolarLabelItem\n */\nfunction drawLabelline(item /** PolarLabelItem */, coordinate) {\n    /** 坐标圆心 */\n    var center = coordinate.getCenter();\n    /** 圆半径 */\n    var radius = coordinate.getRadius();\n    if (item && item.labelLine) {\n        var angle = item.angle, labelOffset = item.offset;\n        // 贴近圆周\n        var startPoint = polarToCartesian(center.x, center.y, radius, angle);\n        var itemX = item.x + get(item, 'offsetX', 0) * (Math.cos(angle) > 0 ? 1 : -1);\n        var itemY = item.y + get(item, 'offsetY', 0) * (Math.sin(angle) > 0 ? 1 : -1);\n        var endPoint = {\n            x: itemX - Math.cos(angle) * MARGIN,\n            y: itemY - Math.sin(angle) * MARGIN,\n        };\n        var smoothConnector = item.labelLine.smooth;\n        var path = [];\n        var dx = endPoint.x - center.x;\n        var dy = endPoint.y - center.y;\n        var endAngle = Math.atan(dy / dx);\n        // 第三象限 & 第四象限\n        if (dx < 0) {\n            endAngle += Math.PI;\n        }\n        // 默认 smooth, undefined 也为 smooth\n        if (smoothConnector === false) {\n            if (!isObject(item.labelLine)) {\n                // labelLine: true\n                item.labelLine = {};\n            }\n            // 表示弧线的方向，0 表示从起点到终点沿逆时针画弧, 1 表示顺时针\n            var sweepFlag = 0;\n            // 第一象限\n            if ((angle < 0 && angle > -Math.PI / 2) || angle > Math.PI * 1.5) {\n                if (endPoint.y > startPoint.y) {\n                    sweepFlag = 1;\n                }\n            }\n            // 第二象限\n            if (angle >= 0 && angle < Math.PI / 2) {\n                if (endPoint.y > startPoint.y) {\n                    sweepFlag = 1;\n                }\n            }\n            // 第三象限\n            if (angle >= Math.PI / 2 && angle < Math.PI) {\n                if (startPoint.y > endPoint.y) {\n                    sweepFlag = 1;\n                }\n            }\n            // 第四象限\n            if (angle < -Math.PI / 2 || (angle >= Math.PI && angle < Math.PI * 1.5)) {\n                if (startPoint.y > endPoint.y) {\n                    sweepFlag = 1;\n                }\n            }\n            var distance = labelOffset / 2 > 4 ? 4 : Math.max(labelOffset / 2 - 1, 0);\n            var breakPoint = polarToCartesian(center.x, center.y, radius + distance, angle);\n            // 圆弧的结束点\n            var breakPoint3 = polarToCartesian(center.x, center.y, radius + labelOffset / 2, endAngle);\n            /**\n             * @example\n             * M 100 100 L100 90 A 50 50 0 0 0 150 50\n             * 移动至 (100, 100), 连接到 (100, 90), 以 (50, 50) 为圆心，绘制圆弧至 (150, 50);\n             * A 命令的第 4 个参数 large-arc-flag, 决定弧线是大于还是小于 180 度: 0 表示小角度弧，1 表示大角\n             * 第 5 个参数: 是否顺时针绘制\n             */\n            // 默认小弧\n            var largeArcFlag = 0;\n            // step1: 移动至起点\n            path.push(\"M \".concat(startPoint.x, \" \").concat(startPoint.y));\n            // step2: 连接拐点\n            path.push(\"L \".concat(breakPoint.x, \" \").concat(breakPoint.y));\n            // step3: 绘制圆弧 至 结束点\n            path.push(\"A \".concat(center.x, \" \").concat(center.y, \" 0 \").concat(largeArcFlag, \" \").concat(sweepFlag, \" \").concat(breakPoint3.x, \" \").concat(breakPoint3.y));\n            // step4: 连接结束点\n            path.push(\"L \".concat(endPoint.x, \" \").concat(endPoint.y));\n        }\n        else {\n            var breakPoint = polarToCartesian(center.x, center.y, radius + (labelOffset / 2 > 4 ? 4 : Math.max(labelOffset / 2 - 1, 0)), angle);\n            // G2 旧的拉线\n            // path.push('Q', `${breakPoint.x}`, `${breakPoint.y}`, `${endPoint.x}`, `${endPoint.y}`);\n            var xSign = startPoint.x < center.x ? 1 : -1;\n            // step1: 连接结束点\n            path.push(\"M \".concat(endPoint.x, \" \").concat(endPoint.y));\n            var slope1 = (startPoint.y - center.y) / (startPoint.x - center.x);\n            var slope2 = (endPoint.y - center.y) / (endPoint.x - center.x);\n            if (Math.abs(slope1 - slope2) > Math.pow(Math.E, -16)) {\n                // step2: 绘制 curve line (起点 & 结合点与圆心的斜率不等时, 由于存在误差, 使用近似处理)\n                path.push.apply(path, [\n                    'C',\n                    endPoint.x + xSign * 4,\n                    endPoint.y,\n                    2 * breakPoint.x - startPoint.x,\n                    2 * breakPoint.y - startPoint.y,\n                    startPoint.x,\n                    startPoint.y,\n                ]);\n            }\n            // step3: 连接至起点\n            path.push(\"L \".concat(startPoint.x, \" \").concat(startPoint.y));\n        }\n        item.labelLine.path = path.join(' ');\n    }\n}\n/**\n * 饼图 outer-label 布局, 适用于 type = pie 且 label offset > 0 的标签\n */\nexport function pieOuterLabelLayout(originalItems, labels, shapes, region) {\n    var e_1, _a;\n    var items = filter(originalItems, function (item) { return !isNil(item); });\n    /** 坐标系 */\n    var coordinate = labels[0] && labels[0].get('coordinate');\n    if (!coordinate) {\n        return;\n    }\n    /** 坐标圆心 */\n    var center = coordinate.getCenter();\n    /** 圆半径 */\n    var radius = coordinate.getRadius();\n    /** label shapes */\n    var labelsMap = {};\n    try {\n        for (var labels_1 = __values(labels), labels_1_1 = labels_1.next(); !labels_1_1.done; labels_1_1 = labels_1.next()) {\n            var labelShape = labels_1_1.value;\n            labelsMap[labelShape.get('id')] = labelShape;\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (labels_1_1 && !labels_1_1.done && (_a = labels_1.return)) _a.call(labels_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    // note labelHeight 可以控制 label 的行高\n    var labelHeight = get(items[0], 'labelHeight', 14);\n    var labelOffset = get(items[0], 'offset', 0);\n    if (labelOffset <= 0) {\n        return;\n    }\n    var LEFT_HALF_KEY = 'left';\n    var RIGHT_HALF_KEY = 'right';\n    // step 1: separate labels\n    var separateLabels = groupBy(items, function (item) { return (item.x < center.x ? LEFT_HALF_KEY : RIGHT_HALF_KEY); });\n    var start = coordinate.start, end = coordinate.end;\n    // step2: calculate totalHeight\n    var totalHeight = Math.min((radius + labelOffset + labelHeight) * 2, coordinate.getHeight());\n    var totalR = totalHeight / 2;\n    /** labels 容器的范围(后续根据组件的布局设计进行调整) */\n    var labelsContainerRange = {\n        minX: start.x,\n        maxX: end.x,\n        minY: center.y - totalR,\n        maxY: center.y + totalR,\n    };\n    // step 3: antiCollision\n    each(separateLabels, function (half, key) {\n        var maxLabelsCountForOneSide = Math.floor(totalHeight / labelHeight);\n        if (half.length > maxLabelsCountForOneSide) {\n            half.sort(function (a, b) {\n                // sort by percentage DESC\n                return b.percent - a.percent;\n            });\n            each(half, function (labelItem, idx) {\n                if (idx + 1 > maxLabelsCountForOneSide) {\n                    labelsMap[labelItem.id].set('visible', false);\n                    labelItem.invisible = true;\n                }\n            });\n        }\n        antiCollision(half, labelHeight, labelsContainerRange);\n    });\n    each(separateLabels, function (half, key) {\n        each(half, function (item) {\n            var isRight = key === RIGHT_HALF_KEY;\n            var labelShape = labelsMap[item.id];\n            // because group could not effect content-shape, should set content-shape position manually\n            var content = labelShape.getChildByIndex(0);\n            // textShape 发生过调整\n            if (content) {\n                var r = radius + labelOffset;\n                // (x - cx)^2 + (y - cy)^2 = totalR^2\n                var dy = item.y - center.y;\n                var rPow2 = Math.pow(r, 2);\n                var dyPow2 = Math.pow(dy, 2);\n                var dxPow2 = rPow2 - dyPow2 > 0 ? rPow2 - dyPow2 : 0;\n                var dx = Math.sqrt(dxPow2);\n                var dx_offset = Math.abs(Math.cos(item.angle) * r);\n                if (!isRight) {\n                    // left\n                    item.x = center.x - Math.max(dx, dx_offset);\n                }\n                else {\n                    // right\n                    item.x = center.x + Math.max(dx, dx_offset);\n                }\n            }\n            // adjust labelShape\n            if (content) {\n                content.attr('y', item.y);\n                content.attr('x', item.x);\n            }\n            drawLabelline(item, coordinate);\n        });\n    });\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}