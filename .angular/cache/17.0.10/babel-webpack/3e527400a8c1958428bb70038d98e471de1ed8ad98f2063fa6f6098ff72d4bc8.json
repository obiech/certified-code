{"ast":null,"code":"import { each, get, isArray } from '@antv/util';\nimport { doAnimate } from '../animate';\nimport { getReplaceAttrs } from '../util/graphics';\n/**\n * @desc 更新 label (目前没有根据 id 索引，还是会存在一点小问题的，只能根据 idx 索引)\n * @done shape 属性更新\n * @done shape delete\n * @done shape append\n *\n * @param fromShape old labelShape\n * @param toShape new labelShape\n * @param cfg\n */\nexport function updateLabel(fromShape, toShape, cfg) {\n  var data = cfg.data,\n    origin = cfg.origin,\n    animateCfg = cfg.animateCfg,\n    coordinate = cfg.coordinate;\n  var updateAnimateCfg = get(animateCfg, 'update');\n  fromShape.set('data', data);\n  fromShape.set('origin', origin);\n  fromShape.set('animateCfg', animateCfg);\n  fromShape.set('coordinate', coordinate);\n  fromShape.set('visible', toShape.get('visible'));\n  (fromShape.getChildren() || []).forEach(function (fromChild, idx) {\n    var toChild = toShape.getChildByIndex(idx);\n    if (!toChild) {\n      fromShape.removeChild(fromChild);\n      fromChild.remove(true);\n    } else {\n      fromChild.set('data', data);\n      fromChild.set('origin', origin);\n      fromChild.set('animateCfg', animateCfg);\n      fromChild.set('coordinate', coordinate);\n      var newAttrs = getReplaceAttrs(fromChild, toChild);\n      if (updateAnimateCfg) {\n        doAnimate(fromChild, updateAnimateCfg, {\n          toAttrs: newAttrs,\n          coordinate: coordinate\n        });\n      } else {\n        fromChild.attr(newAttrs);\n      }\n      if (toChild.isGroup()) {\n        updateLabel(fromChild, toChild, cfg);\n      }\n    }\n  });\n  // append\n  each(toShape.getChildren(), function (child, idx) {\n    if (isArray(fromShape.getChildren()) && idx >= fromShape.getCount()) {\n      if (!child.destroyed) {\n        fromShape.add(child);\n      }\n    }\n  });\n}","map":{"version":3,"names":["each","get","isArray","doAnimate","getReplaceAttrs","updateLabel","fromShape","toShape","cfg","data","origin","animateCfg","coordinate","updateAnimateCfg","set","getChildren","forEach","fromChild","idx","toChild","getChildByIndex","removeChild","remove","newAttrs","toAttrs","attr","isGroup","child","getCount","destroyed","add"],"sources":["/Users/obiechina/Documents/ridy-flutter-full-taxi-solution 2/node_modules/@antv/g2/esm/component/update-label.js"],"sourcesContent":["import { each, get, isArray } from '@antv/util';\nimport { doAnimate } from '../animate';\nimport { getReplaceAttrs } from '../util/graphics';\n/**\n * @desc 更新 label (目前没有根据 id 索引，还是会存在一点小问题的，只能根据 idx 索引)\n * @done shape 属性更新\n * @done shape delete\n * @done shape append\n *\n * @param fromShape old labelShape\n * @param toShape new labelShape\n * @param cfg\n */\nexport function updateLabel(fromShape, toShape, cfg) {\n    var data = cfg.data, origin = cfg.origin, animateCfg = cfg.animateCfg, coordinate = cfg.coordinate;\n    var updateAnimateCfg = get(animateCfg, 'update');\n    fromShape.set('data', data);\n    fromShape.set('origin', origin);\n    fromShape.set('animateCfg', animateCfg);\n    fromShape.set('coordinate', coordinate);\n    fromShape.set('visible', toShape.get('visible'));\n    (fromShape.getChildren() || []).forEach(function (fromChild, idx) {\n        var toChild = toShape.getChildByIndex(idx);\n        if (!toChild) {\n            fromShape.removeChild(fromChild);\n            fromChild.remove(true);\n        }\n        else {\n            fromChild.set('data', data);\n            fromChild.set('origin', origin);\n            fromChild.set('animateCfg', animateCfg);\n            fromChild.set('coordinate', coordinate);\n            var newAttrs = getReplaceAttrs(fromChild, toChild);\n            if (updateAnimateCfg) {\n                doAnimate(fromChild, updateAnimateCfg, {\n                    toAttrs: newAttrs,\n                    coordinate: coordinate,\n                });\n            }\n            else {\n                fromChild.attr(newAttrs);\n            }\n            if (toChild.isGroup()) {\n                updateLabel(fromChild, toChild, cfg);\n            }\n        }\n    });\n    // append\n    each(toShape.getChildren(), function (child, idx) {\n        if (isArray(fromShape.getChildren()) && idx >= fromShape.getCount()) {\n            if (!child.destroyed) {\n                fromShape.add(child);\n            }\n        }\n    });\n}\n"],"mappings":"AAAA,SAASA,IAAI,EAAEC,GAAG,EAAEC,OAAO,QAAQ,YAAY;AAC/C,SAASC,SAAS,QAAQ,YAAY;AACtC,SAASC,eAAe,QAAQ,kBAAkB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,WAAWA,CAACC,SAAS,EAAEC,OAAO,EAAEC,GAAG,EAAE;EACjD,IAAIC,IAAI,GAAGD,GAAG,CAACC,IAAI;IAAEC,MAAM,GAAGF,GAAG,CAACE,MAAM;IAAEC,UAAU,GAAGH,GAAG,CAACG,UAAU;IAAEC,UAAU,GAAGJ,GAAG,CAACI,UAAU;EAClG,IAAIC,gBAAgB,GAAGZ,GAAG,CAACU,UAAU,EAAE,QAAQ,CAAC;EAChDL,SAAS,CAACQ,GAAG,CAAC,MAAM,EAAEL,IAAI,CAAC;EAC3BH,SAAS,CAACQ,GAAG,CAAC,QAAQ,EAAEJ,MAAM,CAAC;EAC/BJ,SAAS,CAACQ,GAAG,CAAC,YAAY,EAAEH,UAAU,CAAC;EACvCL,SAAS,CAACQ,GAAG,CAAC,YAAY,EAAEF,UAAU,CAAC;EACvCN,SAAS,CAACQ,GAAG,CAAC,SAAS,EAAEP,OAAO,CAACN,GAAG,CAAC,SAAS,CAAC,CAAC;EAChD,CAACK,SAAS,CAACS,WAAW,CAAC,CAAC,IAAI,EAAE,EAAEC,OAAO,CAAC,UAAUC,SAAS,EAAEC,GAAG,EAAE;IAC9D,IAAIC,OAAO,GAAGZ,OAAO,CAACa,eAAe,CAACF,GAAG,CAAC;IAC1C,IAAI,CAACC,OAAO,EAAE;MACVb,SAAS,CAACe,WAAW,CAACJ,SAAS,CAAC;MAChCA,SAAS,CAACK,MAAM,CAAC,IAAI,CAAC;IAC1B,CAAC,MACI;MACDL,SAAS,CAACH,GAAG,CAAC,MAAM,EAAEL,IAAI,CAAC;MAC3BQ,SAAS,CAACH,GAAG,CAAC,QAAQ,EAAEJ,MAAM,CAAC;MAC/BO,SAAS,CAACH,GAAG,CAAC,YAAY,EAAEH,UAAU,CAAC;MACvCM,SAAS,CAACH,GAAG,CAAC,YAAY,EAAEF,UAAU,CAAC;MACvC,IAAIW,QAAQ,GAAGnB,eAAe,CAACa,SAAS,EAAEE,OAAO,CAAC;MAClD,IAAIN,gBAAgB,EAAE;QAClBV,SAAS,CAACc,SAAS,EAAEJ,gBAAgB,EAAE;UACnCW,OAAO,EAAED,QAAQ;UACjBX,UAAU,EAAEA;QAChB,CAAC,CAAC;MACN,CAAC,MACI;QACDK,SAAS,CAACQ,IAAI,CAACF,QAAQ,CAAC;MAC5B;MACA,IAAIJ,OAAO,CAACO,OAAO,CAAC,CAAC,EAAE;QACnBrB,WAAW,CAACY,SAAS,EAAEE,OAAO,EAAEX,GAAG,CAAC;MACxC;IACJ;EACJ,CAAC,CAAC;EACF;EACAR,IAAI,CAACO,OAAO,CAACQ,WAAW,CAAC,CAAC,EAAE,UAAUY,KAAK,EAAET,GAAG,EAAE;IAC9C,IAAIhB,OAAO,CAACI,SAAS,CAACS,WAAW,CAAC,CAAC,CAAC,IAAIG,GAAG,IAAIZ,SAAS,CAACsB,QAAQ,CAAC,CAAC,EAAE;MACjE,IAAI,CAACD,KAAK,CAACE,SAAS,EAAE;QAClBvB,SAAS,CAACwB,GAAG,CAACH,KAAK,CAAC;MACxB;IACJ;EACJ,CAAC,CAAC;AACN","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}