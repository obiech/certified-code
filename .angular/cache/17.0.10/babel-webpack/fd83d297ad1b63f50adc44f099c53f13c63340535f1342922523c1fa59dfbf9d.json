{"ast":null,"code":"import _asyncToGenerator from \"/Users/obiechina/Documents/ridy-flutter-full-taxi-solution 2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { TranslateService } from '@ngx-translate/core';\nimport { Router } from '@angular/router';\nimport { CurrentConfigService } from './cms/current-config.service';\nimport { ThemeService } from './@services/theme.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngx-translate/core\";\nimport * as i2 from \"./cms/current-config.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"./@services/theme.service\";\nimport * as i5 from \"@angular/common\";\nfunction AppComponent_router_outlet_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"router-outlet\");\n  }\n}\nexport class AppComponent {\n  constructor(translate, currentConfigService, router, themeService) {\n    this.translate = translate;\n    this.currentConfigService = currentConfigService;\n    this.router = router;\n    this.themeService = themeService;\n    this.isDarkMode = false;\n    this.isCollapsed = false;\n    this.isLoaded = false;\n    translate.use(localStorage.getItem('lang') ?? 'en');\n  }\n  ngOnInit() {\n    this.themeService.updateTheme();\n    this.loadConfiguration();\n  }\n  loadConfiguration() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      const currentConfig = yield _this.currentConfigService.getConfig();\n      if (currentConfig.currentConfiguration.purchaseCode == null) {\n        _this.router.navigateByUrl('config');\n        _this.isLoaded = true;\n        return;\n      }\n      if (currentConfig.currentConfiguration.adminPanelAPIKey != null) {\n        yield _this.loadScript(`https://maps.googleapis.com/maps/api/js?key=${currentConfig.currentConfiguration.adminPanelAPIKey}&libraries=drawing,places&callback=initMap`);\n        _this.isLoaded = true;\n      } else if (currentConfig.currentConfiguration.firebaseProjectPrivateKey == null) {\n        _this.router.navigateByUrl('config');\n        _this.isLoaded = true;\n      }\n    })();\n  }\n  loadScript(name) {\n    return new Promise((resolve, reject) => {\n      const script = document.createElement('script');\n      script.type = 'text/javascript';\n      script.src = name;\n      window.initMap = ev => {\n        resolve();\n      };\n      document.getElementsByTagName('head')[0].appendChild(script);\n    });\n  }\n  static {\n    this.ɵfac = function AppComponent_Factory(t) {\n      return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.TranslateService), i0.ɵɵdirectiveInject(i2.CurrentConfigService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.ThemeService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AppComponent,\n      selectors: [[\"app-root\"]],\n      decls: 1,\n      vars: 1,\n      consts: [[4, \"ngIf\"]],\n      template: function AppComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵtemplate(0, AppComponent_router_outlet_0_Template, 1, 0, \"router-outlet\", 0);\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"ngIf\", ctx.isLoaded);\n        }\n      },\n      dependencies: [i5.NgIf, i3.RouterOutlet],\n      encapsulation: 2\n    });\n  }\n}","map":{"version":3,"names":["TranslateService","Router","CurrentConfigService","ThemeService","i0","ɵɵelement","AppComponent","constructor","translate","currentConfigService","router","themeService","isDarkMode","isCollapsed","isLoaded","use","localStorage","getItem","ngOnInit","updateTheme","loadConfiguration","_this","_asyncToGenerator","currentConfig","getConfig","currentConfiguration","purchaseCode","navigateByUrl","adminPanelAPIKey","loadScript","firebaseProjectPrivateKey","name","Promise","resolve","reject","script","document","createElement","type","src","window","initMap","ev","getElementsByTagName","appendChild","ɵɵdirectiveInject","i1","i2","i3","i4","selectors","decls","vars","consts","template","AppComponent_Template","rf","ctx","ɵɵtemplate","AppComponent_router_outlet_0_Template","ɵɵproperty"],"sources":["/Users/obiechina/Documents/ridy-flutter-full-taxi-solution 2/apps/admin-panel/src/app/app.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Router } from '@angular/router';\nimport { CurrentConfigService } from './cms/current-config.service';\nimport { ThemeService } from './@services/theme.service';\n\n@Component({\n  selector: 'app-root',\n  template: '<router-outlet *ngIf=\"isLoaded\"></router-outlet>',\n})\nexport class AppComponent implements OnInit {\n  isDarkMode = false;\n  isCollapsed = false;\n  isLoaded = false;\n\n  constructor(\n    public translate: TranslateService,\n    private currentConfigService: CurrentConfigService,\n    private router: Router,\n    private themeService: ThemeService,\n  ) {\n    translate.use(localStorage.getItem('lang') ?? 'en');\n  }\n\n  ngOnInit(): void {\n    this.themeService.updateTheme();\n    this.loadConfiguration();\n  }\n\n  async loadConfiguration() {\n    const currentConfig = await this.currentConfigService.getConfig();\n    if (currentConfig.currentConfiguration.purchaseCode == null) {\n      this.router.navigateByUrl('config');\n      this.isLoaded = true;\n      return;\n    }\n    if (currentConfig.currentConfiguration.adminPanelAPIKey != null) {\n      await this.loadScript(\n        `https://maps.googleapis.com/maps/api/js?key=${currentConfig.currentConfiguration.adminPanelAPIKey}&libraries=drawing,places&callback=initMap`,\n      );\n      this.isLoaded = true;\n    } else if (\n      currentConfig.currentConfiguration.firebaseProjectPrivateKey == null\n    ) {\n      this.router.navigateByUrl('config');\n      this.isLoaded = true;\n    }\n  }\n\n  loadScript(name: string) {\n    return new Promise<void>((resolve, reject) => {\n      const script = document.createElement('script');\n      script.type = 'text/javascript';\n      script.src = name;\n      (window as unknown as any).initMap = (ev: any) => {\n        resolve();\n      };\n      document.getElementsByTagName('head')[0].appendChild(script);\n    });\n  }\n}\n"],"mappings":";AACA,SAASA,gBAAgB,QAAQ,qBAAqB;AACtD,SAASC,MAAM,QAAQ,iBAAiB;AACxC,SAASC,oBAAoB,QAAQ,8BAA8B;AACnE,SAASC,YAAY,QAAQ,2BAA2B;;;;;;;;;IAI3CC,EAAA,CAAAC,SAAA,oBAAgD;;;AAE7D,OAAM,MAAOC,YAAY;EAKvBC,YACSC,SAA2B,EAC1BC,oBAA0C,EAC1CC,MAAc,EACdC,YAA0B;IAH3B,KAAAH,SAAS,GAATA,SAAS;IACR,KAAAC,oBAAoB,GAApBA,oBAAoB;IACpB,KAAAC,MAAM,GAANA,MAAM;IACN,KAAAC,YAAY,GAAZA,YAAY;IARtB,KAAAC,UAAU,GAAG,KAAK;IAClB,KAAAC,WAAW,GAAG,KAAK;IACnB,KAAAC,QAAQ,GAAG,KAAK;IAQdN,SAAS,CAACO,GAAG,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC;EACrD;EAEAC,QAAQA,CAAA;IACN,IAAI,CAACP,YAAY,CAACQ,WAAW,EAAE;IAC/B,IAAI,CAACC,iBAAiB,EAAE;EAC1B;EAEMA,iBAAiBA,CAAA;IAAA,IAAAC,KAAA;IAAA,OAAAC,iBAAA;MACrB,MAAMC,aAAa,SAASF,KAAI,CAACZ,oBAAoB,CAACe,SAAS,EAAE;MACjE,IAAID,aAAa,CAACE,oBAAoB,CAACC,YAAY,IAAI,IAAI,EAAE;QAC3DL,KAAI,CAACX,MAAM,CAACiB,aAAa,CAAC,QAAQ,CAAC;QACnCN,KAAI,CAACP,QAAQ,GAAG,IAAI;QACpB;;MAEF,IAAIS,aAAa,CAACE,oBAAoB,CAACG,gBAAgB,IAAI,IAAI,EAAE;QAC/D,MAAMP,KAAI,CAACQ,UAAU,CACnB,+CAA+CN,aAAa,CAACE,oBAAoB,CAACG,gBAAgB,4CAA4C,CAC/I;QACDP,KAAI,CAACP,QAAQ,GAAG,IAAI;OACrB,MAAM,IACLS,aAAa,CAACE,oBAAoB,CAACK,yBAAyB,IAAI,IAAI,EACpE;QACAT,KAAI,CAACX,MAAM,CAACiB,aAAa,CAAC,QAAQ,CAAC;QACnCN,KAAI,CAACP,QAAQ,GAAG,IAAI;;IACrB;EACH;EAEAe,UAAUA,CAACE,IAAY;IACrB,OAAO,IAAIC,OAAO,CAAO,CAACC,OAAO,EAAEC,MAAM,KAAI;MAC3C,MAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;MAC/CF,MAAM,CAACG,IAAI,GAAG,iBAAiB;MAC/BH,MAAM,CAACI,GAAG,GAAGR,IAAI;MAChBS,MAAyB,CAACC,OAAO,GAAIC,EAAO,IAAI;QAC/CT,OAAO,EAAE;MACX,CAAC;MACDG,QAAQ,CAACO,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAACC,WAAW,CAACT,MAAM,CAAC;IAC9D,CAAC,CAAC;EACJ;;;uBAjDW7B,YAAY,EAAAF,EAAA,CAAAyC,iBAAA,CAAAC,EAAA,CAAA9C,gBAAA,GAAAI,EAAA,CAAAyC,iBAAA,CAAAE,EAAA,CAAA7C,oBAAA,GAAAE,EAAA,CAAAyC,iBAAA,CAAAG,EAAA,CAAA/C,MAAA,GAAAG,EAAA,CAAAyC,iBAAA,CAAAI,EAAA,CAAA9C,YAAA;IAAA;EAAA;;;YAAZG,YAAY;MAAA4C,SAAA;MAAAC,KAAA;MAAAC,IAAA;MAAAC,MAAA;MAAAC,QAAA,WAAAC,sBAAAC,EAAA,EAAAC,GAAA;QAAA,IAAAD,EAAA;UAFZpD,EAAA,CAAAsD,UAAA,IAAAC,qCAAA,2BAAgD;;;UAAhCvD,EAAA,CAAAwD,UAAA,SAAAH,GAAA,CAAA3C,QAAA,CAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}