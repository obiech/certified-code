{"ast":null,"code":"import { __assign, __extends, __read } from \"tslib\";\nimport { deepMix, each, filter, get } from '@antv/util';\nimport { DIRECTION } from '../constant';\nimport { getFactTitleConfig } from '../util/facet';\nimport { Facet } from './facet';\n/**\n * @ignore\n * 镜像分面\n */\nvar List = /** @class */function (_super) {\n  __extends(List, _super);\n  function List() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  List.prototype.getDefaultCfg = function () {\n    return deepMix({}, _super.prototype.getDefaultCfg.call(this), {\n      type: 'list',\n      cols: null,\n      showTitle: true,\n      title: _super.prototype.getDefaultTitleCfg.call(this)\n    });\n  };\n  List.prototype.render = function () {\n    _super.prototype.render.call(this);\n    if (this.cfg.showTitle) {\n      this.renderTitle();\n    }\n  };\n  List.prototype.afterEachView = function (view, facet) {\n    this.processAxis(view, facet);\n  };\n  List.prototype.beforeEachView = function (view, facet) {};\n  List.prototype.generateFacets = function (data) {\n    var _this = this;\n    var fields = this.cfg.fields;\n    var cols = this.cfg.cols;\n    var _a = __read(fields, 1),\n      columnField = _a[0];\n    if (!columnField) {\n      throw new Error('No `fields` specified!');\n    }\n    var colValues = this.getFieldValues(data, columnField);\n    var count = colValues.length;\n    cols = cols || count; // 每行有几列数据\n    // 总共有几行\n    var rows = this.getPageCount(count, cols);\n    var rst = [];\n    colValues.forEach(function (val, index) {\n      // 当前 index 在那个行列\n      var _a = _this.getRowCol(index, cols),\n        row = _a.row,\n        col = _a.col;\n      var conditions = [{\n        field: columnField,\n        value: val,\n        values: colValues\n      }];\n      var facetData = filter(data, _this.getFacetDataFilter(conditions));\n      var facet = {\n        type: _this.cfg.type,\n        data: facetData,\n        region: _this.getRegion(rows, cols, col, row),\n        columnValue: val,\n        rowValue: val,\n        columnField: columnField,\n        rowField: null,\n        columnIndex: col,\n        rowIndex: row,\n        columnValuesLength: cols,\n        rowValuesLength: rows,\n        total: count\n      };\n      rst.push(facet);\n    });\n    return rst;\n  };\n  /**\n   * 设置 x 坐标轴的文本、title 是否显示\n   * @param x\n   * @param axes\n   * @param option\n   * @param facet\n   */\n  List.prototype.getXAxisOption = function (x, axes, option, facet) {\n    // 当是最后一行或者下面没有 view 时文本不显示\n    if (facet.rowIndex !== facet.rowValuesLength - 1 && facet.columnValuesLength * facet.rowIndex + facet.columnIndex + 1 + facet.columnValuesLength <= facet.total) {\n      return __assign(__assign({}, option), {\n        label: null,\n        title: null\n      });\n    }\n    return option;\n  };\n  /**\n   * 设置 y 坐标轴的文本、title 是否显示\n   * @param y\n   * @param axes\n   * @param option\n   * @param facet\n   */\n  List.prototype.getYAxisOption = function (y, axes, option, facet) {\n    if (facet.columnIndex !== 0) {\n      return __assign(__assign({}, option), {\n        title: null,\n        label: null\n      });\n    }\n    return option;\n  };\n  /**\n   * facet title\n   */\n  List.prototype.renderTitle = function () {\n    var _this = this;\n    each(this.facets, function (facet) {\n      var columnValue = facet.columnValue,\n        view = facet.view;\n      var formatter = get(_this.cfg.title, 'formatter');\n      var config = deepMix({\n        position: ['50%', '0%'],\n        content: formatter ? formatter(columnValue) : columnValue\n      }, getFactTitleConfig(DIRECTION.TOP), _this.cfg.title);\n      view.annotation().text(config);\n    });\n  };\n  /**\n   * 计算分页数\n   * @param total\n   * @param pageSize\n   */\n  List.prototype.getPageCount = function (total, pageSize) {\n    return Math.floor((total + pageSize - 1) / pageSize);\n  };\n  /**\n   * 索引值在哪一页\n   * @param index\n   * @param pageSize\n   */\n  List.prototype.getRowCol = function (index, pageSize) {\n    var row = Math.floor(index / pageSize);\n    var col = index % pageSize;\n    return {\n      row: row,\n      col: col\n    };\n  };\n  return List;\n}(Facet);\nexport default List;","map":{"version":3,"names":["__assign","__extends","__read","deepMix","each","filter","get","DIRECTION","getFactTitleConfig","Facet","List","_super","apply","arguments","prototype","getDefaultCfg","call","type","cols","showTitle","title","getDefaultTitleCfg","render","cfg","renderTitle","afterEachView","view","facet","processAxis","beforeEachView","generateFacets","data","_this","fields","_a","columnField","Error","colValues","getFieldValues","count","length","rows","getPageCount","rst","forEach","val","index","getRowCol","row","col","conditions","field","value","values","facetData","getFacetDataFilter","region","getRegion","columnValue","rowValue","rowField","columnIndex","rowIndex","columnValuesLength","rowValuesLength","total","push","getXAxisOption","x","axes","option","label","getYAxisOption","y","facets","formatter","config","position","content","TOP","annotation","text","pageSize","Math","floor"],"sources":["/Users/obiechina/Documents/ridy-flutter-full-taxi-solution 2/node_modules/@antv/g2/esm/facet/list.js"],"sourcesContent":["import { __assign, __extends, __read } from \"tslib\";\nimport { deepMix, each, filter, get } from '@antv/util';\nimport { DIRECTION } from '../constant';\nimport { getFactTitleConfig } from '../util/facet';\nimport { Facet } from './facet';\n/**\n * @ignore\n * 镜像分面\n */\nvar List = /** @class */ (function (_super) {\n    __extends(List, _super);\n    function List() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    List.prototype.getDefaultCfg = function () {\n        return deepMix({}, _super.prototype.getDefaultCfg.call(this), {\n            type: 'list',\n            cols: null,\n            showTitle: true,\n            title: _super.prototype.getDefaultTitleCfg.call(this),\n        });\n    };\n    List.prototype.render = function () {\n        _super.prototype.render.call(this);\n        if (this.cfg.showTitle) {\n            this.renderTitle();\n        }\n    };\n    List.prototype.afterEachView = function (view, facet) {\n        this.processAxis(view, facet);\n    };\n    List.prototype.beforeEachView = function (view, facet) { };\n    List.prototype.generateFacets = function (data) {\n        var _this = this;\n        var fields = this.cfg.fields;\n        var cols = this.cfg.cols;\n        var _a = __read(fields, 1), columnField = _a[0];\n        if (!columnField) {\n            throw new Error('No `fields` specified!');\n        }\n        var colValues = this.getFieldValues(data, columnField);\n        var count = colValues.length;\n        cols = cols || count; // 每行有几列数据\n        // 总共有几行\n        var rows = this.getPageCount(count, cols);\n        var rst = [];\n        colValues.forEach(function (val, index) {\n            // 当前 index 在那个行列\n            var _a = _this.getRowCol(index, cols), row = _a.row, col = _a.col;\n            var conditions = [{ field: columnField, value: val, values: colValues }];\n            var facetData = filter(data, _this.getFacetDataFilter(conditions));\n            var facet = {\n                type: _this.cfg.type,\n                data: facetData,\n                region: _this.getRegion(rows, cols, col, row),\n                columnValue: val,\n                rowValue: val,\n                columnField: columnField,\n                rowField: null,\n                columnIndex: col,\n                rowIndex: row,\n                columnValuesLength: cols,\n                rowValuesLength: rows,\n                total: count,\n            };\n            rst.push(facet);\n        });\n        return rst;\n    };\n    /**\n     * 设置 x 坐标轴的文本、title 是否显示\n     * @param x\n     * @param axes\n     * @param option\n     * @param facet\n     */\n    List.prototype.getXAxisOption = function (x, axes, option, facet) {\n        // 当是最后一行或者下面没有 view 时文本不显示\n        if (facet.rowIndex !== facet.rowValuesLength - 1 &&\n            facet.columnValuesLength * facet.rowIndex + facet.columnIndex + 1 + facet.columnValuesLength <= facet.total) {\n            return __assign(__assign({}, option), { label: null, title: null });\n        }\n        return option;\n    };\n    /**\n     * 设置 y 坐标轴的文本、title 是否显示\n     * @param y\n     * @param axes\n     * @param option\n     * @param facet\n     */\n    List.prototype.getYAxisOption = function (y, axes, option, facet) {\n        if (facet.columnIndex !== 0) {\n            return __assign(__assign({}, option), { title: null, label: null });\n        }\n        return option;\n    };\n    /**\n     * facet title\n     */\n    List.prototype.renderTitle = function () {\n        var _this = this;\n        each(this.facets, function (facet) {\n            var columnValue = facet.columnValue, view = facet.view;\n            var formatter = get(_this.cfg.title, 'formatter');\n            var config = deepMix({\n                position: ['50%', '0%'],\n                content: formatter ? formatter(columnValue) : columnValue,\n            }, getFactTitleConfig(DIRECTION.TOP), _this.cfg.title);\n            view.annotation().text(config);\n        });\n    };\n    /**\n     * 计算分页数\n     * @param total\n     * @param pageSize\n     */\n    List.prototype.getPageCount = function (total, pageSize) {\n        return Math.floor((total + pageSize - 1) / pageSize);\n    };\n    /**\n     * 索引值在哪一页\n     * @param index\n     * @param pageSize\n     */\n    List.prototype.getRowCol = function (index, pageSize) {\n        var row = Math.floor(index / pageSize);\n        var col = index % pageSize;\n        return { row: row, col: col };\n    };\n    return List;\n}(Facet));\nexport default List;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}