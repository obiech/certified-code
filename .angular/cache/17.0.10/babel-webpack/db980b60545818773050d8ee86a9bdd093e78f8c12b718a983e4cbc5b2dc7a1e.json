{"ast":null,"code":"import { __assign, __rest } from \"tslib\";\nimport { Path } from '../shape';\nvar sin = Math.sin,\n  cos = Math.cos,\n  atan2 = Math.atan2,\n  PI = Math.PI;\nfunction _addDefaultArrow(shape, attrs, x1, y1, x2, y2, isStart) {\n  var stroke = attrs.stroke,\n    lineWidth = attrs.lineWidth;\n  var x = x1 - x2;\n  var y = y1 - y2;\n  var rad = atan2(y, x);\n  var arrowShape = new Path({\n    type: 'path',\n    canvas: shape.get('canvas'),\n    isArrowShape: true,\n    attrs: {\n      // 默认箭头的边长为 10，夹角为 60 度\n      path: \"M\" + 10 * cos(PI / 6) + \",\" + 10 * sin(PI / 6) + \" L0,0 L\" + 10 * cos(PI / 6) + \",-\" + 10 * sin(PI / 6),\n      // 使用 shape stroke 值\n      stroke: stroke,\n      lineWidth: lineWidth\n    }\n  });\n  arrowShape.translate(x2, y2);\n  arrowShape.rotateAtPoint(x2, y2, rad);\n  shape.set(isStart ? 'startArrowShape' : 'endArrowShape', arrowShape);\n}\n/**\n * 箭头 path 的设置要求\n * 1. 箭头顶点坐标需要为 (0, 0)\n * 2. 箭头夹角的中心分割线需要与 X 轴正方向对齐\n */\nfunction _addCustomizedArrow(shape, attrs, x1, y1, x2, y2, isStart) {\n  var startArrow = attrs.startArrow,\n    endArrow = attrs.endArrow,\n    stroke = attrs.stroke,\n    lineWidth = attrs.lineWidth;\n  var arrowAttrs = isStart ? startArrow : endArrow;\n  var d = arrowAttrs.d,\n    arrowFill = arrowAttrs.fill,\n    arrowStroke = arrowAttrs.stroke,\n    arrowLineWidth = arrowAttrs.lineWidth,\n    restAttrs = __rest(arrowAttrs, [\"d\", \"fill\", \"stroke\", \"lineWidth\"]);\n  var x = x1 - x2;\n  var y = y1 - y2;\n  var rad = atan2(y, x);\n  if (d) {\n    x2 = x2 - cos(rad) * d;\n    y2 = y2 - sin(rad) * d;\n  }\n  var arrowShape = new Path({\n    type: 'path',\n    canvas: shape.get('canvas'),\n    isArrowShape: true,\n    attrs: __assign(__assign({}, restAttrs), {\n      // 支持单独设置箭头的 stroke 和 lineWidth，若为空则使用 shape 的值\n      stroke: arrowStroke || stroke,\n      lineWidth: arrowLineWidth || lineWidth,\n      // 箭头是否填充需要手动设置，不会继承自 shape 的值\n      fill: arrowFill\n    })\n  });\n  arrowShape.translate(x2, y2);\n  arrowShape.rotateAtPoint(x2, y2, rad);\n  shape.set(isStart ? 'startArrowShape' : 'endArrowShape', arrowShape);\n}\n/**\n * 如果自定义箭头并且有 d 需要做偏移，如果直接画，线条会超出箭头尖端，因此需要根据箭头偏移 d, 返回线需要缩短的距离\n * |----------------\n * |<|--------------\n * |\n * @param {number} x1 起始点 x\n * @param {number} y1 起始点 y\n * @param {number} x2 箭头作用点 x\n * @param {number} y2 箭头作用点 y\n * @param {number} d  箭头沿线条方向的偏移距离\n * @return {{dx: number, dy: number}} 返回线条偏移距离\n */\nexport function getShortenOffset(x1, y1, x2, y2, d) {\n  var rad = atan2(y2 - y1, x2 - x1);\n  return {\n    dx: cos(rad) * d,\n    dy: sin(rad) * d\n  };\n}\n/**\n * 绘制起始箭头\n * @param {IShape} shape 图形\n * @param {ShapeAttrs} attrs shape 的绘图属性\n * @param {number} x1 起始点 x\n * @param {number} y1 起始点 y\n * @param {number} x2 箭头作用点 x\n * @param {number} y2 箭头作用点 y\n */\nexport function addStartArrow(shape, attrs, x1, y1, x2, y2) {\n  if (typeof attrs.startArrow === 'object') {\n    _addCustomizedArrow(shape, attrs, x1, y1, x2, y2, true);\n  } else if (attrs.startArrow) {\n    _addDefaultArrow(shape, attrs, x1, y1, x2, y2, true);\n  } else {\n    shape.set('startArrowShape', null);\n  }\n}\n/**\n * 绘制结束箭头\n * @param {IShape} shape 图形\n * @param {ShapeAttrs} attrs shape 的绘图属性\n * @param {number} x1 起始点 x\n * @param {number} y1 起始点 y\n * @param {number} x2 箭头作用点 x\n * @param {number} y2 箭头作用点 y\n */\nexport function addEndArrow(shape, attrs, x1, y1, x2, y2) {\n  if (typeof attrs.endArrow === 'object') {\n    _addCustomizedArrow(shape, attrs, x1, y1, x2, y2, false);\n  } else if (attrs.endArrow) {\n    _addDefaultArrow(shape, attrs, x1, y1, x2, y2, false);\n  } else {\n    shape.set('startArrowShape', null);\n  }\n}","map":{"version":3,"names":["__assign","__rest","Path","sin","Math","cos","atan2","PI","_addDefaultArrow","shape","attrs","x1","y1","x2","y2","isStart","stroke","lineWidth","x","y","rad","arrowShape","type","canvas","get","isArrowShape","path","translate","rotateAtPoint","set","_addCustomizedArrow","startArrow","endArrow","arrowAttrs","d","arrowFill","fill","arrowStroke","arrowLineWidth","restAttrs","getShortenOffset","dx","dy","addStartArrow","addEndArrow"],"sources":["/Users/obiechina/Documents/ridy-flutter-full-taxi-solution 2/node_modules/@antv/g-canvas/esm/util/arrow.js"],"sourcesContent":["import { __assign, __rest } from \"tslib\";\nimport { Path } from '../shape';\nvar sin = Math.sin, cos = Math.cos, atan2 = Math.atan2, PI = Math.PI;\nfunction _addDefaultArrow(shape, attrs, x1, y1, x2, y2, isStart) {\n    var stroke = attrs.stroke, lineWidth = attrs.lineWidth;\n    var x = x1 - x2;\n    var y = y1 - y2;\n    var rad = atan2(y, x);\n    var arrowShape = new Path({\n        type: 'path',\n        canvas: shape.get('canvas'),\n        isArrowShape: true,\n        attrs: {\n            // 默认箭头的边长为 10，夹角为 60 度\n            path: \"M\" + 10 * cos(PI / 6) + \",\" + 10 * sin(PI / 6) + \" L0,0 L\" + 10 * cos(PI / 6) + \",-\" + 10 * sin(PI / 6),\n            // 使用 shape stroke 值\n            stroke: stroke,\n            lineWidth: lineWidth,\n        },\n    });\n    arrowShape.translate(x2, y2);\n    arrowShape.rotateAtPoint(x2, y2, rad);\n    shape.set(isStart ? 'startArrowShape' : 'endArrowShape', arrowShape);\n}\n/**\n * 箭头 path 的设置要求\n * 1. 箭头顶点坐标需要为 (0, 0)\n * 2. 箭头夹角的中心分割线需要与 X 轴正方向对齐\n */\nfunction _addCustomizedArrow(shape, attrs, x1, y1, x2, y2, isStart) {\n    var startArrow = attrs.startArrow, endArrow = attrs.endArrow, stroke = attrs.stroke, lineWidth = attrs.lineWidth;\n    var arrowAttrs = isStart ? startArrow : endArrow;\n    var d = arrowAttrs.d, arrowFill = arrowAttrs.fill, arrowStroke = arrowAttrs.stroke, arrowLineWidth = arrowAttrs.lineWidth, restAttrs = __rest(arrowAttrs, [\"d\", \"fill\", \"stroke\", \"lineWidth\"]);\n    var x = x1 - x2;\n    var y = y1 - y2;\n    var rad = atan2(y, x);\n    if (d) {\n        x2 = x2 - cos(rad) * d;\n        y2 = y2 - sin(rad) * d;\n    }\n    var arrowShape = new Path({\n        type: 'path',\n        canvas: shape.get('canvas'),\n        isArrowShape: true,\n        attrs: __assign(__assign({}, restAttrs), { \n            // 支持单独设置箭头的 stroke 和 lineWidth，若为空则使用 shape 的值\n            stroke: arrowStroke || stroke, lineWidth: arrowLineWidth || lineWidth, \n            // 箭头是否填充需要手动设置，不会继承自 shape 的值\n            fill: arrowFill }),\n    });\n    arrowShape.translate(x2, y2);\n    arrowShape.rotateAtPoint(x2, y2, rad);\n    shape.set(isStart ? 'startArrowShape' : 'endArrowShape', arrowShape);\n}\n/**\n * 如果自定义箭头并且有 d 需要做偏移，如果直接画，线条会超出箭头尖端，因此需要根据箭头偏移 d, 返回线需要缩短的距离\n * |----------------\n * |<|--------------\n * |\n * @param {number} x1 起始点 x\n * @param {number} y1 起始点 y\n * @param {number} x2 箭头作用点 x\n * @param {number} y2 箭头作用点 y\n * @param {number} d  箭头沿线条方向的偏移距离\n * @return {{dx: number, dy: number}} 返回线条偏移距离\n */\nexport function getShortenOffset(x1, y1, x2, y2, d) {\n    var rad = atan2(y2 - y1, x2 - x1);\n    return {\n        dx: cos(rad) * d,\n        dy: sin(rad) * d,\n    };\n}\n/**\n * 绘制起始箭头\n * @param {IShape} shape 图形\n * @param {ShapeAttrs} attrs shape 的绘图属性\n * @param {number} x1 起始点 x\n * @param {number} y1 起始点 y\n * @param {number} x2 箭头作用点 x\n * @param {number} y2 箭头作用点 y\n */\nexport function addStartArrow(shape, attrs, x1, y1, x2, y2) {\n    if (typeof attrs.startArrow === 'object') {\n        _addCustomizedArrow(shape, attrs, x1, y1, x2, y2, true);\n    }\n    else if (attrs.startArrow) {\n        _addDefaultArrow(shape, attrs, x1, y1, x2, y2, true);\n    }\n    else {\n        shape.set('startArrowShape', null);\n    }\n}\n/**\n * 绘制结束箭头\n * @param {IShape} shape 图形\n * @param {ShapeAttrs} attrs shape 的绘图属性\n * @param {number} x1 起始点 x\n * @param {number} y1 起始点 y\n * @param {number} x2 箭头作用点 x\n * @param {number} y2 箭头作用点 y\n */\nexport function addEndArrow(shape, attrs, x1, y1, x2, y2) {\n    if (typeof attrs.endArrow === 'object') {\n        _addCustomizedArrow(shape, attrs, x1, y1, x2, y2, false);\n    }\n    else if (attrs.endArrow) {\n        _addDefaultArrow(shape, attrs, x1, y1, x2, y2, false);\n    }\n    else {\n        shape.set('startArrowShape', null);\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}