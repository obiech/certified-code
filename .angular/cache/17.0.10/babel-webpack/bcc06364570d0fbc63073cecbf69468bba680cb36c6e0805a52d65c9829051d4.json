{"ast":null,"code":"import _asyncToGenerator from \"/Users/obiechina/Documents/ridy-flutter-full-taxi-solution 2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { FormGroup, FormBuilder } from '@angular/forms';\nimport { ActivatedRoute } from '@angular/router';\nimport { CreateDriverGQL } from '@ridy/admin-panel/generated/graphql';\nimport { firstValueFrom } from 'rxjs';\nimport { RouterHelperService } from '../../../@services/router-helper.service';\nimport { COUNTRY_CODE_LIST } from '../../../country-codes';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@ridy/admin-panel/generated/graphql\";\nimport * as i3 from \"../../../@services/router-helper.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"ng-zorro-antd/input\";\nimport * as i7 from \"ng-zorro-antd/button\";\nimport * as i8 from \"ng-zorro-antd/core/transition-patch\";\nimport * as i9 from \"ng-zorro-antd/core/wave\";\nimport * as i10 from \"ng-zorro-antd/grid\";\nimport * as i11 from \"ng-zorro-antd/form\";\nimport * as i12 from \"ng-zorro-antd/select\";\nimport * as i13 from \"ng-zorro-antd/page-header\";\nimport * as i14 from \"ng-zorro-antd/card\";\nfunction DriverNewComponent_ng_template_18_nz_option_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"nz-option\", 21);\n  }\n  if (rf & 2) {\n    const code_r5 = ctx.$implicit;\n    i0.ɵɵproperty(\"nzLabel\", code_r5.name + \" (\" + code_r5.dial_code + \")\")(\"nzValue\", code_r5.dial_code);\n  }\n}\nfunction DriverNewComponent_ng_template_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"nz-select\", 19);\n    i0.ɵɵtemplate(1, DriverNewComponent_ng_template_18_nz_option_1_Template, 1, 2, \"nz-option\", 20);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.countryCodes);\n  }\n}\nfunction DriverNewComponent_ng_template_28_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 22);\n    i0.ɵɵlistener(\"click\", function DriverNewComponent_ng_template_28_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.submitForm());\n    });\n    i0.ɵɵtext(1, \"Register\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"disabled\", ctx_r2.form.invalid);\n  }\n}\nconst _c0 = a0 => [a0];\nexport class DriverNewComponent {\n  constructor(fb, createGQL, routerHelper, route) {\n    this.fb = fb;\n    this.createGQL = createGQL;\n    this.routerHelper = routerHelper;\n    this.route = route;\n    this.form = this.fb.group({\n      firstName: null,\n      lastName: null,\n      phoneNumber: this.fb.group({\n        prefix: '+1',\n        number: null\n      }),\n      gender: null\n    });\n    this.countryCodes = COUNTRY_CODE_LIST;\n  }\n  submitForm() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      const {\n        phoneNumber,\n        ..._formValue\n      } = _this.form.value;\n      console.log(JSON.stringify(phoneNumber));\n      yield firstValueFrom(_this.createGQL.mutate({\n        input: {\n          mobileNumber: `${phoneNumber.prefix}${phoneNumber.number}`,\n          ..._formValue\n        }\n      }));\n      _this.routerHelper.goToParent(_this.route);\n    })();\n  }\n  static {\n    this.ɵfac = function DriverNewComponent_Factory(t) {\n      return new (t || DriverNewComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.CreateDriverGQL), i0.ɵɵdirectiveInject(i3.RouterHelperService), i0.ɵɵdirectiveInject(i4.ActivatedRoute));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: DriverNewComponent,\n      selectors: [[\"app-driver-new\"]],\n      decls: 30,\n      vars: 6,\n      consts: [[\"nzBackIcon\", \"\", \"nzTitle\", \"New Driver\", \"nzSubtitle\", \"Input Driver's contact details below.\", 3, \"nzGhost\"], [3, \"nzActions\"], [\"nz-form\", \"\", 3, \"formGroup\", \"ngSubmit\"], [\"nzRequired\", \"\", \"nzFor\", \"firstName\"], [\"nzErrorTip\", \"The input is not valid First Name\"], [\"nz-input\", \"\", \"formControlName\", \"firstName\", \"id\", \"firstName\", \"required\", \"\"], [\"nzRequired\", \"\", \"nzFor\", \"lastName\"], [\"nzErrorTip\", \"The input is not valid Last Name\"], [\"nz-input\", \"\", \"formControlName\", \"lastName\", \"id\", \"lastName\", \"required\", \"\"], [\"nzFor\", \"phoneNumber\", \"nzRequired\", \"\"], [\"formGroupName\", \"phoneNumber\"], [3, \"nzAddOnBefore\"], [\"addOnBeforeTemplate\", \"\"], [\"formControlName\", \"number\", \"id\", \"phoneNumber\", \"type\", \"\\u201Dtel\\u201D\", \"nz-input\", \"\", \"required\", \"\"], [\"nzFor\", \"gender\"], [\"formControlName\", \"gender\"], [\"nzLabel\", \"Male\", \"nzValue\", \"Male\"], [\"nzLabel\", \"Female\", \"nzValue\", \"Female\"], [\"tmplActions\", \"\"], [\"formControlName\", \"prefix\", 1, \"phone-select\"], [3, \"nzLabel\", \"nzValue\", 4, \"ngFor\", \"ngForOf\"], [3, \"nzLabel\", \"nzValue\"], [\"nz-button\", \"\", \"nzType\", \"primary\", 3, \"disabled\", \"click\"]],\n      template: function DriverNewComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelement(0, \"nz-page-header\", 0);\n          i0.ɵɵelementStart(1, \"nz-card\", 1)(2, \"form\", 2);\n          i0.ɵɵlistener(\"ngSubmit\", function DriverNewComponent_Template_form_ngSubmit_2_listener() {\n            return ctx.submitForm();\n          });\n          i0.ɵɵelementStart(3, \"nz-form-item\")(4, \"nz-form-label\", 3);\n          i0.ɵɵtext(5, \"First Name\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(6, \"nz-form-control\", 4);\n          i0.ɵɵelement(7, \"input\", 5);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(8, \"nz-form-item\")(9, \"nz-form-label\", 6);\n          i0.ɵɵtext(10, \"Last Name\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(11, \"nz-form-control\", 7);\n          i0.ɵɵelement(12, \"input\", 8);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(13, \"nz-form-item\")(14, \"nz-form-label\", 9);\n          i0.ɵɵtext(15, \"Phone Number\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(16, \"nz-form-control\", 10)(17, \"nz-input-group\", 11);\n          i0.ɵɵtemplate(18, DriverNewComponent_ng_template_18_Template, 2, 1, \"ng-template\", null, 12, i0.ɵɵtemplateRefExtractor);\n          i0.ɵɵelement(20, \"input\", 13);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(21, \"nz-form-item\")(22, \"nz-form-label\", 14);\n          i0.ɵɵtext(23, \"Gender\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(24, \"nz-form-control\")(25, \"nz-select\", 15);\n          i0.ɵɵelement(26, \"nz-option\", 16)(27, \"nz-option\", 17);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵtemplate(28, DriverNewComponent_ng_template_28_Template, 2, 1, \"ng-template\", null, 18, i0.ɵɵtemplateRefExtractor);\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          const _r1 = i0.ɵɵreference(19);\n          const _r3 = i0.ɵɵreference(29);\n          i0.ɵɵproperty(\"nzGhost\", false);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"nzActions\", i0.ɵɵpureFunction1(4, _c0, _r3));\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"formGroup\", ctx.form);\n          i0.ɵɵadvance(15);\n          i0.ɵɵproperty(\"nzAddOnBefore\", _r1);\n        }\n      },\n      dependencies: [i5.NgForOf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.RequiredValidator, i1.FormGroupDirective, i1.FormControlName, i1.FormGroupName, i6.NzInputDirective, i6.NzInputGroupComponent, i7.NzButtonComponent, i8.ɵNzTransitionPatchDirective, i9.NzWaveDirective, i10.NzColDirective, i10.NzRowDirective, i11.NzFormDirective, i11.NzFormItemComponent, i11.NzFormLabelComponent, i11.NzFormControlComponent, i12.NzOptionComponent, i12.NzSelectComponent, i13.NzPageHeaderComponent, i14.NzCardComponent],\n      encapsulation: 2\n    });\n  }\n}","map":{"version":3,"names":["FormGroup","FormBuilder","ActivatedRoute","CreateDriverGQL","firstValueFrom","RouterHelperService","COUNTRY_CODE_LIST","i0","ɵɵelement","ɵɵproperty","code_r5","name","dial_code","ɵɵelementStart","ɵɵtemplate","DriverNewComponent_ng_template_18_nz_option_1_Template","ɵɵelementEnd","ɵɵadvance","ctx_r0","countryCodes","ɵɵlistener","DriverNewComponent_ng_template_28_Template_button_click_0_listener","ɵɵrestoreView","_r7","ctx_r6","ɵɵnextContext","ɵɵresetView","submitForm","ɵɵtext","ctx_r2","form","invalid","DriverNewComponent","constructor","fb","createGQL","routerHelper","route","group","firstName","lastName","phoneNumber","prefix","number","gender","_this","_asyncToGenerator","_formValue","value","console","log","JSON","stringify","mutate","input","mobileNumber","goToParent","ɵɵdirectiveInject","i1","i2","i3","i4","selectors","decls","vars","consts","template","DriverNewComponent_Template","rf","ctx","DriverNewComponent_Template_form_ngSubmit_2_listener","DriverNewComponent_ng_template_18_Template","ɵɵtemplateRefExtractor","DriverNewComponent_ng_template_28_Template","ɵɵpureFunction1","_c0","_r3","_r1"],"sources":["/Users/obiechina/Documents/ridy-flutter-full-taxi-solution 2/apps/admin-panel/src/app/cms/drivers/driver-new/driver-new.component.ts","/Users/obiechina/Documents/ridy-flutter-full-taxi-solution 2/apps/admin-panel/src/app/cms/drivers/driver-new/driver-new.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport {\n  UntypedFormGroup,\n  Validators,\n  UntypedFormBuilder,\n  FormGroup,\n  FormBuilder,\n} from '@angular/forms';\nimport { ActivatedRoute } from '@angular/router';\nimport { CreateDriverGQL } from '@ridy/admin-panel/generated/graphql';\nimport { firstValueFrom } from 'rxjs';\nimport { RouterHelperService } from '../../../@services/router-helper.service';\nimport { COUNTRY_CODE_LIST } from '../../../country-codes';\n\n@Component({\n  selector: 'app-driver-new',\n  templateUrl: './driver-new.component.html',\n})\nexport class DriverNewComponent {\n  form: FormGroup = this.fb.group({\n    firstName: null,\n    lastName: null,\n    phoneNumber: this.fb.group({\n      prefix: '+1',\n      number: null,\n    }),\n    gender: null,\n  });\n\n  countryCodes = COUNTRY_CODE_LIST;\n\n  constructor(\n    private fb: FormBuilder,\n    private createGQL: CreateDriverGQL,\n    private routerHelper: RouterHelperService,\n    private route: ActivatedRoute,\n  ) {}\n\n  async submitForm() {\n    const { phoneNumber, ..._formValue } = this.form.value;\n    console.log(JSON.stringify(phoneNumber));\n    await firstValueFrom(\n      this.createGQL.mutate({\n        input: {\n          mobileNumber: `${phoneNumber.prefix}${phoneNumber.number}`,\n          ..._formValue,\n        },\n      }),\n    );\n    this.routerHelper.goToParent(this.route);\n  }\n}\n","<nz-page-header [nzGhost]=\"false\" nzBackIcon nzTitle=\"New Driver\" nzSubtitle=\"Input Driver's contact details below.\">\n</nz-page-header>\n<nz-card [nzActions]=\"[tmplActions]\" style=\"mt-16\">\n  <form nz-form [formGroup]=\"form\" (ngSubmit)=\"submitForm()\">\n    <nz-form-item>\n      <nz-form-label nzRequired nzFor=\"firstName\">First Name</nz-form-label>\n      <nz-form-control nzErrorTip=\"The input is not valid First Name\">\n        <input nz-input formControlName=\"firstName\" id=\"firstName\" required />\n      </nz-form-control>\n    </nz-form-item>\n    <nz-form-item>\n      <nz-form-label nzRequired nzFor=\"lastName\">Last Name</nz-form-label>\n      <nz-form-control nzErrorTip=\"The input is not valid Last Name\">\n        <input nz-input formControlName=\"lastName\" id=\"lastName\" required />\n      </nz-form-control>\n    </nz-form-item>\n    <nz-form-item>\n      <nz-form-label nzFor=\"phoneNumber\" nzRequired>Phone Number</nz-form-label>\n      <nz-form-control formGroupName=\"phoneNumber\">\n        <nz-input-group [nzAddOnBefore]=\"addOnBeforeTemplate\">\n          <ng-template #addOnBeforeTemplate>\n            <nz-select formControlName=\"prefix\" class=\"phone-select\">\n              <nz-option *ngFor=\"let code of countryCodes\" [nzLabel]=\"code.name + ' (' + code.dial_code + ')'\"\n                [nzValue]=\"code.dial_code\"></nz-option>\n            </nz-select>\n          </ng-template>\n          <input formControlName=\"number\" id=\"phoneNumber\" type=”tel” nz-input required />\n        </nz-input-group>\n      </nz-form-control>\n    </nz-form-item>\n    <nz-form-item>\n      <nz-form-label nzFor=\"gender\">Gender</nz-form-label>\n      <nz-form-control>\n        <nz-select formControlName=\"gender\">\n          <nz-option nzLabel=\"Male\" nzValue=\"Male\"></nz-option>\n          <nz-option nzLabel=\"Female\" nzValue=\"Female\"></nz-option>\n        </nz-select>\n      </nz-form-control>\n    </nz-form-item>\n    <ng-template #tmplActions>\n      <button nz-button nzType=\"primary\" [disabled]=\"form.invalid\" (click)=\"submitForm()\">Register</button>\n    </ng-template>\n  </form>\n</nz-card>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}