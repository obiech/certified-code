{"ast":null,"code":"import { __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport TransformAction from './scale-transform';\n/**\n * 缩放 Scale 的 Action\n * @ignore\n */\nvar ScaleTranslate = /** @class */function (_super) {\n  __extends(ScaleTranslate, _super);\n  function ScaleTranslate() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.zoomRatio = 0.05;\n    return _this;\n    // 平移分类的度量\n    // private translateCategory(dim, scale, normalPoint) {\n    // }\n  }\n  /**\n   * 缩小\n   */\n  ScaleTranslate.prototype.zoomIn = function () {\n    this.zoom(this.zoomRatio);\n  };\n  ScaleTranslate.prototype.zoom = function (scale) {\n    var _this = this;\n    var dims = this.dims;\n    each(dims, function (dim) {\n      _this.zoomDim(dim, scale);\n    });\n    this.context.view.render(true);\n  };\n  /**\n   * 放大\n   */\n  ScaleTranslate.prototype.zoomOut = function () {\n    this.zoom(-1 * this.zoomRatio);\n  };\n  // 缩放度量\n  ScaleTranslate.prototype.zoomDim = function (dim, dRatio) {\n    if (this.hasDim(dim)) {\n      var scale = this.getScale(dim);\n      if (scale.isLinear) {\n        this.zoomLinear(dim, scale, dRatio);\n      }\n      //  else { // 暂时仅处理连续字段\n      // this.zoomCategory(dim, scale, normalPoint);\n      // }\n    }\n  };\n  // linear 度量平移\n  ScaleTranslate.prototype.zoomLinear = function (dim, scale, dRatio) {\n    var view = this.context.view;\n    // 只有第一次缓存，否则无法回滚\n    if (!this.cacheScaleDefs[dim]) {\n      this.cacheScaleDefs[dim] = {\n        // @ts-ignore\n        nice: scale.nice,\n        min: scale.min,\n        max: scale.max\n      };\n    }\n    // 使用使用原始度量作为缩放标准\n    var scaleDef = this.cacheScaleDefs[dim];\n    var range = scaleDef.max - scaleDef.min;\n    var min = scale.min,\n      max = scale.max;\n    var d = dRatio * range;\n    var toMin = min - d;\n    var toMax = max + d;\n    var curRange = toMax - toMin;\n    var scaled = curRange / range;\n    if (toMax > toMin && scaled < 100 && scaled > 0.01) {\n      view.scale(scale.field, {\n        // @ts-ignore\n        nice: false,\n        min: min - d,\n        max: max + d\n      });\n    }\n  };\n  return ScaleTranslate;\n}(TransformAction);\nexport default ScaleTranslate;","map":{"version":3,"names":["__extends","each","TransformAction","ScaleTranslate","_super","_this","apply","arguments","zoomRatio","prototype","zoomIn","zoom","scale","dims","dim","zoomDim","context","view","render","zoomOut","dRatio","hasDim","getScale","isLinear","zoomLinear","cacheScaleDefs","nice","min","max","scaleDef","range","d","toMin","toMax","curRange","scaled","field"],"sources":["/Users/obiechina/Documents/ridy-flutter-full-taxi-solution 2/node_modules/@antv/g2/esm/interaction/action/view/scale-zoom.js"],"sourcesContent":["import { __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport TransformAction from './scale-transform';\n/**\n * 缩放 Scale 的 Action\n * @ignore\n */\nvar ScaleTranslate = /** @class */ (function (_super) {\n    __extends(ScaleTranslate, _super);\n    function ScaleTranslate() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.zoomRatio = 0.05;\n        return _this;\n        // 平移分类的度量\n        // private translateCategory(dim, scale, normalPoint) {\n        // }\n    }\n    /**\n     * 缩小\n     */\n    ScaleTranslate.prototype.zoomIn = function () {\n        this.zoom(this.zoomRatio);\n    };\n    ScaleTranslate.prototype.zoom = function (scale) {\n        var _this = this;\n        var dims = this.dims;\n        each(dims, function (dim) {\n            _this.zoomDim(dim, scale);\n        });\n        this.context.view.render(true);\n    };\n    /**\n     * 放大\n     */\n    ScaleTranslate.prototype.zoomOut = function () {\n        this.zoom(-1 * this.zoomRatio);\n    };\n    // 缩放度量\n    ScaleTranslate.prototype.zoomDim = function (dim, dRatio) {\n        if (this.hasDim(dim)) {\n            var scale = this.getScale(dim);\n            if (scale.isLinear) {\n                this.zoomLinear(dim, scale, dRatio);\n            }\n            //  else { // 暂时仅处理连续字段\n            // this.zoomCategory(dim, scale, normalPoint);\n            // }\n        }\n    };\n    // linear 度量平移\n    ScaleTranslate.prototype.zoomLinear = function (dim, scale, dRatio) {\n        var view = this.context.view;\n        // 只有第一次缓存，否则无法回滚\n        if (!this.cacheScaleDefs[dim]) {\n            this.cacheScaleDefs[dim] = {\n                // @ts-ignore\n                nice: scale.nice,\n                min: scale.min,\n                max: scale.max,\n            };\n        }\n        // 使用使用原始度量作为缩放标准\n        var scaleDef = this.cacheScaleDefs[dim];\n        var range = scaleDef.max - scaleDef.min;\n        var min = scale.min, max = scale.max;\n        var d = dRatio * range;\n        var toMin = min - d;\n        var toMax = max + d;\n        var curRange = toMax - toMin;\n        var scaled = curRange / range;\n        if (toMax > toMin && scaled < 100 && scaled > 0.01) {\n            view.scale(scale.field, {\n                // @ts-ignore\n                nice: false,\n                min: min - d,\n                max: max + d,\n            });\n        }\n    };\n    return ScaleTranslate;\n}(TransformAction));\nexport default ScaleTranslate;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}