{"ast":null,"code":"import { __extends, __read } from \"tslib\";\nimport { each } from '@antv/util';\nimport Action from '../base';\nimport { getDelegationObject, getScaleByField, isList, isSlider } from '../util';\n/**\n * 数据过滤。\n * @ignore\n */\nvar DataFilter = /** @class */function (_super) {\n  __extends(DataFilter, _super);\n  function DataFilter() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  DataFilter.prototype.filterView = function (view, field, filter) {\n    var _this = this;\n    // 只有存在这个 scale 时才生效\n    if (view.getScaleByField(field)) {\n      view.filter(field, filter);\n    }\n    if (view.views && view.views.length) {\n      each(view.views, function (subView) {\n        _this.filterView(subView, field, filter);\n      });\n    }\n  };\n  /**\n   * 过滤数据\n   */\n  DataFilter.prototype.filter = function () {\n    var delegateObject = getDelegationObject(this.context);\n    if (delegateObject) {\n      var view = this.context.view;\n      var component = delegateObject.component;\n      var field = component.get('field');\n      // 列表类的组件能够触发\n      if (isList(delegateObject)) {\n        if (field) {\n          var unCheckedItems = component.getItemsByState('unchecked');\n          var scale_1 = getScaleByField(view, field);\n          var names_1 = unCheckedItems.map(function (item) {\n            return item.name;\n          });\n          if (names_1.length) {\n            this.filterView(view, field, function (value) {\n              var text = scale_1.getText(value);\n              return !names_1.includes(text);\n            });\n          } else {\n            this.filterView(view, field, null);\n          }\n          view.render(true);\n        }\n      } else if (isSlider(delegateObject)) {\n        var range = component.getValue();\n        var _a = __read(range, 2),\n          min_1 = _a[0],\n          max_1 = _a[1];\n        this.filterView(view, field, function (value) {\n          return value >= min_1 && value <= max_1;\n        });\n        view.render(true);\n      }\n    }\n  };\n  return DataFilter;\n}(Action);\nexport default DataFilter;","map":{"version":3,"names":["__extends","__read","each","Action","getDelegationObject","getScaleByField","isList","isSlider","DataFilter","_super","apply","arguments","prototype","filterView","view","field","filter","_this","views","length","subView","delegateObject","context","component","get","unCheckedItems","getItemsByState","scale_1","names_1","map","item","name","value","text","getText","includes","render","range","getValue","_a","min_1","max_1"],"sources":["/Users/obiechina/Documents/ridy-flutter-full-taxi-solution 2/node_modules/@antv/g2/esm/interaction/action/data/filter.js"],"sourcesContent":["import { __extends, __read } from \"tslib\";\nimport { each } from '@antv/util';\nimport Action from '../base';\nimport { getDelegationObject, getScaleByField, isList, isSlider } from '../util';\n/**\n * 数据过滤。\n * @ignore\n */\nvar DataFilter = /** @class */ (function (_super) {\n    __extends(DataFilter, _super);\n    function DataFilter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DataFilter.prototype.filterView = function (view, field, filter) {\n        var _this = this;\n        // 只有存在这个 scale 时才生效\n        if (view.getScaleByField(field)) {\n            view.filter(field, filter);\n        }\n        if (view.views && view.views.length) {\n            each(view.views, function (subView) {\n                _this.filterView(subView, field, filter);\n            });\n        }\n    };\n    /**\n     * 过滤数据\n     */\n    DataFilter.prototype.filter = function () {\n        var delegateObject = getDelegationObject(this.context);\n        if (delegateObject) {\n            var view = this.context.view;\n            var component = delegateObject.component;\n            var field = component.get('field');\n            // 列表类的组件能够触发\n            if (isList(delegateObject)) {\n                if (field) {\n                    var unCheckedItems = component.getItemsByState('unchecked');\n                    var scale_1 = getScaleByField(view, field);\n                    var names_1 = unCheckedItems.map(function (item) { return item.name; });\n                    if (names_1.length) {\n                        this.filterView(view, field, function (value) {\n                            var text = scale_1.getText(value);\n                            return !names_1.includes(text);\n                        });\n                    }\n                    else {\n                        this.filterView(view, field, null);\n                    }\n                    view.render(true);\n                }\n            }\n            else if (isSlider(delegateObject)) {\n                var range = component.getValue();\n                var _a = __read(range, 2), min_1 = _a[0], max_1 = _a[1];\n                this.filterView(view, field, function (value) {\n                    return value >= min_1 && value <= max_1;\n                });\n                view.render(true);\n            }\n        }\n    };\n    return DataFilter;\n}(Action));\nexport default DataFilter;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}