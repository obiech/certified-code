{"ast":null,"code":"var ELLIPSIS_CODE = '\\u2026';\n/** 获取字符串长度 */\nexport function strLen(str) {\n  var len = 0;\n  for (var i = 0; i < str.length; i++) {\n    len += charAtLength(str, i);\n  }\n  return len;\n}\n/** 是否属于ASCII编码范畴 */\nexport function charAtLength(str, i) {\n  if (str.charCodeAt(i) > 0 && str.charCodeAt(i) < 128) {\n    return 1;\n  } else {\n    return 2;\n  }\n}\n/** 文本省略 */\nexport function ellipsisString(str, reseveLength, position) {\n  if (position === void 0) {\n    position = 'tail';\n  }\n  var count = str.length;\n  var rst = '';\n  if (position === 'tail') {\n    for (var i = 0, index = 0; i < reseveLength;) {\n      var charLength = charAtLength(str, index);\n      if (i + charLength <= reseveLength) {\n        rst += str[index];\n        i += charAtLength(str, index);\n        index++;\n      } else {\n        break;\n      }\n    }\n    rst += ELLIPSIS_CODE;\n  } else if (position === 'head') {\n    for (var i = 0, index = count - 1; i < reseveLength;) {\n      var charLength = charAtLength(str, index);\n      if (i + charLength <= reseveLength) {\n        rst += str[index];\n        i += charAtLength(str, index);\n        index--;\n      } else {\n        break;\n      }\n    }\n    rst = ELLIPSIS_CODE + rst;\n  } else {\n    var startStr = '';\n    var endStr = '';\n    for (var i = 0, startIndex = 0, endIndex = count - 1; i < reseveLength;) {\n      var startCodeLen = charAtLength(str, startIndex);\n      var hasAdd = false; // 设置标志位，防止头尾都没有附加字符\n      if (startCodeLen + i <= reseveLength) {\n        startStr += str[startIndex];\n        startIndex++;\n        i += startCodeLen;\n        hasAdd = true;\n      }\n      var endCodeLen = charAtLength(str, endIndex);\n      if (endCodeLen + i <= reseveLength) {\n        endStr = str[endIndex] + endStr;\n        i += endCodeLen;\n        endIndex--;\n        hasAdd = true;\n      }\n      if (!hasAdd) {\n        // 如果都没有增加字符，说明都不适合则中断\n        break;\n      }\n    }\n    rst = startStr + ELLIPSIS_CODE + endStr;\n  }\n  return rst;\n}","map":{"version":3,"names":["ELLIPSIS_CODE","strLen","str","len","i","length","charAtLength","charCodeAt","ellipsisString","reseveLength","position","count","rst","index","charLength","startStr","endStr","startIndex","endIndex","startCodeLen","hasAdd","endCodeLen"],"sources":["/Users/obiechina/Documents/ridy-flutter-full-taxi-solution 2/node_modules/@antv/component/esm/util/text.js"],"sourcesContent":["var ELLIPSIS_CODE = '\\u2026';\n/** 获取字符串长度 */\nexport function strLen(str) {\n    var len = 0;\n    for (var i = 0; i < str.length; i++) {\n        len += charAtLength(str, i);\n    }\n    return len;\n}\n/** 是否属于ASCII编码范畴 */\nexport function charAtLength(str, i) {\n    if (str.charCodeAt(i) > 0 && str.charCodeAt(i) < 128) {\n        return 1;\n    }\n    else {\n        return 2;\n    }\n}\n/** 文本省略 */\nexport function ellipsisString(str, reseveLength, position) {\n    if (position === void 0) { position = 'tail'; }\n    var count = str.length;\n    var rst = '';\n    if (position === 'tail') {\n        for (var i = 0, index = 0; i < reseveLength;) {\n            var charLength = charAtLength(str, index);\n            if (i + charLength <= reseveLength) {\n                rst += str[index];\n                i += charAtLength(str, index);\n                index++;\n            }\n            else {\n                break;\n            }\n        }\n        rst += ELLIPSIS_CODE;\n    }\n    else if (position === 'head') {\n        for (var i = 0, index = count - 1; i < reseveLength;) {\n            var charLength = charAtLength(str, index);\n            if (i + charLength <= reseveLength) {\n                rst += str[index];\n                i += charAtLength(str, index);\n                index--;\n            }\n            else {\n                break;\n            }\n        }\n        rst = ELLIPSIS_CODE + rst;\n    }\n    else {\n        var startStr = '';\n        var endStr = '';\n        for (var i = 0, startIndex = 0, endIndex = count - 1; i < reseveLength;) {\n            var startCodeLen = charAtLength(str, startIndex);\n            var hasAdd = false; // 设置标志位，防止头尾都没有附加字符\n            if (startCodeLen + i <= reseveLength) {\n                startStr += str[startIndex];\n                startIndex++;\n                i += startCodeLen;\n                hasAdd = true;\n            }\n            var endCodeLen = charAtLength(str, endIndex);\n            if (endCodeLen + i <= reseveLength) {\n                endStr = str[endIndex] + endStr;\n                i += endCodeLen;\n                endIndex--;\n                hasAdd = true;\n            }\n            if (!hasAdd) {\n                // 如果都没有增加字符，说明都不适合则中断\n                break;\n            }\n        }\n        rst = startStr + ELLIPSIS_CODE + endStr;\n    }\n    return rst;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}