{"ast":null,"code":"import { __assign, __extends, __read, __rest, __spreadArray } from \"tslib\";\nimport { Controller } from './base';\nimport { Scrollbar as ScrollbarComponent } from '../../dependents';\nimport { BBox } from '../../util/bbox';\nimport { directionToPosition } from '../../util/direction';\nimport { COMPONENT_TYPE, DIRECTION, LAYER, VIEW_LIFE_CIRCLE } from '../../constant';\nimport { isObject, clamp, size, throttle, noop, get, valuesOfKey, deepMix } from '@antv/util';\nimport { isBetween } from '../../util/helper';\nvar DEFAULT_PADDING = 0;\nvar DEFAULT_SIZE = 8;\nvar DEFAULT_CATEGORY_SIZE = 32;\nvar MIN_THUMB_LENGTH = 20;\nvar Scrollbar = /** @class */function (_super) {\n  __extends(Scrollbar, _super);\n  function Scrollbar(view) {\n    var _this = _super.call(this, view) || this;\n    _this.onChangeFn = noop;\n    _this.resetMeasure = function () {\n      _this.clear();\n    };\n    _this.onValueChange = function (_a) {\n      var ratio = _a.ratio;\n      var animate = _this.getValidScrollbarCfg().animate;\n      _this.ratio = clamp(ratio, 0, 1);\n      var originalAnimate = _this.view.getOptions().animate;\n      if (!animate) {\n        _this.view.animate(false);\n      }\n      _this.changeViewData(_this.getScrollRange(), true);\n      _this.view.animate(originalAnimate);\n    };\n    _this.container = _this.view.getLayer(LAYER.FORE).addGroup();\n    _this.onChangeFn = throttle(_this.onValueChange, 20, {\n      leading: true\n    });\n    _this.trackLen = 0;\n    _this.thumbLen = 0;\n    _this.ratio = 0;\n    _this.view.on(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA, _this.resetMeasure);\n    _this.view.on(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_SIZE, _this.resetMeasure);\n    return _this;\n  }\n  Object.defineProperty(Scrollbar.prototype, \"name\", {\n    get: function () {\n      return 'scrollbar';\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Scrollbar.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n    this.view.off(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA, this.resetMeasure);\n    this.view.off(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_SIZE, this.resetMeasure);\n  };\n  Scrollbar.prototype.init = function () {};\n  /**\n   * 渲染\n   */\n  Scrollbar.prototype.render = function () {\n    this.option = this.view.getOptions().scrollbar;\n    if (this.option) {\n      if (this.scrollbar) {\n        // exist, update\n        this.scrollbar = this.updateScrollbar();\n      } else {\n        // not exist, create\n        this.scrollbar = this.createScrollbar();\n        this.scrollbar.component.on('scrollchange', this.onChangeFn);\n      }\n    } else {\n      if (this.scrollbar) {\n        // exist, destroy\n        this.scrollbar.component.destroy();\n        this.scrollbar = undefined;\n      }\n    }\n  };\n  /**\n   * 布局\n   */\n  Scrollbar.prototype.layout = function () {\n    var _this = this;\n    if (this.option && !this.trackLen) {\n      this.measureScrollbar();\n      setTimeout(function () {\n        if (!_this.view.destroyed) {\n          _this.changeViewData(_this.getScrollRange(), true);\n        }\n      });\n    }\n    if (this.scrollbar) {\n      var width = this.view.coordinateBBox.width;\n      var padding = this.scrollbar.component.get('padding');\n      var bboxObject = this.scrollbar.component.getLayoutBBox();\n      var bbox = new BBox(bboxObject.x, bboxObject.y, Math.min(bboxObject.width, width), bboxObject.height).expand(padding);\n      var cfg = this.getScrollbarComponentCfg();\n      var x = void 0;\n      var y = void 0;\n      if (cfg.isHorizontal) {\n        var _a = __read(directionToPosition(this.view.viewBBox, bbox, DIRECTION.BOTTOM), 2),\n          x1 = _a[0],\n          y1 = _a[1];\n        var _b = __read(directionToPosition(this.view.coordinateBBox, bbox, DIRECTION.BOTTOM), 2),\n          x2 = _b[0],\n          y2 = _b[1];\n        x = x2;\n        y = y1;\n      } else {\n        var _c = __read(directionToPosition(this.view.viewBBox, bbox, DIRECTION.RIGHT), 2),\n          x1 = _c[0],\n          y1 = _c[1];\n        var _d = __read(directionToPosition(this.view.viewBBox, bbox, DIRECTION.RIGHT), 2),\n          x2 = _d[0],\n          y2 = _d[1];\n        x = x2;\n        y = y1;\n      }\n      x += padding[3];\n      y += padding[0];\n      // 默认放在 bottom\n      if (this.trackLen) {\n        this.scrollbar.component.update(__assign(__assign({}, cfg), {\n          x: x,\n          y: y,\n          trackLen: this.trackLen,\n          thumbLen: this.thumbLen,\n          thumbOffset: (this.trackLen - this.thumbLen) * this.ratio\n        }));\n      } else {\n        this.scrollbar.component.update(__assign(__assign({}, cfg), {\n          x: x,\n          y: y\n        }));\n      }\n      this.view.viewBBox = this.view.viewBBox.cut(bbox, cfg.isHorizontal ? DIRECTION.BOTTOM : DIRECTION.RIGHT);\n    }\n  };\n  /**\n   * 更新\n   */\n  Scrollbar.prototype.update = function () {\n    // 逻辑和 render 保持一致\n    this.render();\n  };\n  Scrollbar.prototype.getComponents = function () {\n    return this.scrollbar ? [this.scrollbar] : [];\n  };\n  Scrollbar.prototype.clear = function () {\n    if (this.scrollbar) {\n      this.scrollbar.component.destroy();\n      this.scrollbar = undefined;\n    }\n    this.trackLen = 0;\n    this.thumbLen = 0;\n    this.ratio = 0;\n    this.cnt = 0;\n    this.step = 0;\n    this.data = undefined;\n    this.xScaleCfg = undefined;\n    this.yScalesCfg = [];\n  };\n  /** 设置滚动条位置  */\n  Scrollbar.prototype.setValue = function (ratio) {\n    this.onValueChange({\n      ratio: ratio\n    });\n  };\n  /** 获得滚动条位置  */\n  Scrollbar.prototype.getValue = function () {\n    return this.ratio;\n  };\n  /**\n   * 获取 scrollbar 的主题配置\n   */\n  Scrollbar.prototype.getThemeOptions = function () {\n    var theme = this.view.getTheme();\n    return get(theme, ['components', 'scrollbar', 'common'], {});\n  };\n  /**\n   * 获取 scrollbar 组件的主题样式\n   */\n  Scrollbar.prototype.getScrollbarTheme = function (style) {\n    var theme = get(this.view.getTheme(), ['components', 'scrollbar']);\n    var _a = style || {},\n      thumbHighlightColor = _a.thumbHighlightColor,\n      restStyles = __rest(_a, [\"thumbHighlightColor\"]);\n    return {\n      default: deepMix({}, get(theme, ['default', 'style'], {}), restStyles),\n      hover: deepMix({}, get(theme, ['hover', 'style'], {}), {\n        thumbColor: thumbHighlightColor\n      })\n    };\n  };\n  Scrollbar.prototype.measureScrollbar = function () {\n    var xScale = this.view.getXScale();\n    var yScales = this.view.getYScales().slice();\n    this.data = this.getScrollbarData();\n    this.step = this.getStep();\n    this.cnt = this.getCnt();\n    var _a = this.getScrollbarComponentCfg(),\n      trackLen = _a.trackLen,\n      thumbLen = _a.thumbLen;\n    this.trackLen = trackLen;\n    this.thumbLen = thumbLen;\n    this.xScaleCfg = {\n      field: xScale.field,\n      values: xScale.values || []\n    };\n    this.yScalesCfg = yScales;\n  };\n  Scrollbar.prototype.getScrollRange = function () {\n    var startIdx = Math.floor((this.cnt - this.step) * clamp(this.ratio, 0, 1));\n    var endIdx = Math.min(startIdx + this.step - 1, this.cnt - 1);\n    return [startIdx, endIdx];\n  };\n  Scrollbar.prototype.changeViewData = function (_a, render) {\n    var _this = this;\n    var _b = __read(_a, 2),\n      startIdx = _b[0],\n      endIdx = _b[1];\n    var type = this.getValidScrollbarCfg().type;\n    var isHorizontal = type !== 'vertical';\n    var values = valuesOfKey(this.data, this.xScaleCfg.field);\n    // 如果是 xScale 数值类型，则进行排序\n    var xScaleValues = this.view.getXScale().isLinear ? values.sort(function (a, b) {\n      return Number(a) - Number(b);\n    }) : values;\n    var xValues = isHorizontal ? xScaleValues : xScaleValues.reverse();\n    this.yScalesCfg.forEach(function (cfg) {\n      _this.view.scale(cfg.field, {\n        formatter: cfg.formatter,\n        type: cfg.type,\n        min: cfg.min,\n        max: cfg.max,\n        tickMethod: cfg.tickMethod\n      });\n    });\n    this.view.filter(this.xScaleCfg.field, function (val) {\n      var idx = xValues.indexOf(val);\n      return idx > -1 ? isBetween(idx, startIdx, endIdx) : true;\n    });\n    this.view.render(true);\n  };\n  Scrollbar.prototype.createScrollbar = function () {\n    var type = this.getValidScrollbarCfg().type;\n    var isHorizontal = type !== 'vertical';\n    var component = new ScrollbarComponent(__assign(__assign({\n      container: this.container\n    }, this.getScrollbarComponentCfg()), {\n      x: 0,\n      y: 0\n    }));\n    component.init();\n    return {\n      component: component,\n      layer: LAYER.FORE,\n      direction: isHorizontal ? DIRECTION.BOTTOM : DIRECTION.RIGHT,\n      type: COMPONENT_TYPE.SCROLLBAR\n    };\n  };\n  Scrollbar.prototype.updateScrollbar = function () {\n    var config = this.getScrollbarComponentCfg();\n    var realConfig = this.trackLen ? __assign(__assign({}, config), {\n      trackLen: this.trackLen,\n      thumbLen: this.thumbLen,\n      thumbOffset: (this.trackLen - this.thumbLen) * this.ratio\n    }) : __assign({}, config);\n    this.scrollbar.component.update(realConfig);\n    return this.scrollbar;\n  };\n  Scrollbar.prototype.getStep = function () {\n    if (this.step) {\n      return this.step;\n    }\n    var coordinateBBox = this.view.coordinateBBox;\n    var _a = this.getValidScrollbarCfg(),\n      type = _a.type,\n      categorySize = _a.categorySize;\n    var isHorizontal = type !== 'vertical';\n    return Math.floor((isHorizontal ? coordinateBBox.width : coordinateBBox.height) / categorySize);\n  };\n  Scrollbar.prototype.getCnt = function () {\n    if (this.cnt) {\n      return this.cnt;\n    }\n    var xScale = this.view.getXScale();\n    var data = this.getScrollbarData();\n    var values = valuesOfKey(data, xScale.field);\n    return size(values);\n  };\n  Scrollbar.prototype.getScrollbarComponentCfg = function () {\n    var _a = this.view,\n      coordinateBBox = _a.coordinateBBox,\n      viewBBox = _a.viewBBox;\n    var _b = this.getValidScrollbarCfg(),\n      type = _b.type,\n      padding = _b.padding,\n      width = _b.width,\n      height = _b.height,\n      style = _b.style;\n    var isHorizontal = type !== 'vertical';\n    var _c = __read(padding, 4),\n      paddingTop = _c[0],\n      paddingRight = _c[1],\n      paddingBottom = _c[2],\n      paddingLeft = _c[3];\n    var position = isHorizontal ? {\n      x: coordinateBBox.minX + paddingLeft,\n      y: viewBBox.maxY - height - paddingBottom\n    } : {\n      x: viewBBox.maxX - width - paddingRight,\n      y: coordinateBBox.minY + paddingTop\n    };\n    var step = this.getStep();\n    var cnt = this.getCnt();\n    var trackLen = isHorizontal ? coordinateBBox.width - paddingLeft - paddingRight : coordinateBBox.height - paddingTop - paddingBottom;\n    var thumbLen = Math.max(trackLen * clamp(step / cnt, 0, 1), MIN_THUMB_LENGTH);\n    return __assign(__assign({}, this.getThemeOptions()), {\n      x: position.x,\n      y: position.y,\n      size: isHorizontal ? height : width,\n      isHorizontal: isHorizontal,\n      trackLen: trackLen,\n      thumbLen: thumbLen,\n      thumbOffset: 0,\n      theme: this.getScrollbarTheme(style)\n    });\n  };\n  /**\n   * 填充一些默认的配置项目\n   */\n  Scrollbar.prototype.getValidScrollbarCfg = function () {\n    var cfg = {\n      type: 'horizontal',\n      categorySize: DEFAULT_CATEGORY_SIZE,\n      width: DEFAULT_SIZE,\n      height: DEFAULT_SIZE,\n      padding: [0, 0, 0, 0],\n      animate: true,\n      style: {}\n    };\n    if (isObject(this.option)) {\n      cfg = __assign(__assign({}, cfg), this.option);\n    }\n    if (!isObject(this.option) || !this.option.padding) {\n      cfg.padding = cfg.type === 'horizontal' ? [DEFAULT_PADDING, 0, DEFAULT_PADDING, 0] : [0, DEFAULT_PADDING, 0, DEFAULT_PADDING];\n    }\n    return cfg;\n  };\n  /**\n   * 获取数据\n   */\n  Scrollbar.prototype.getScrollbarData = function () {\n    var coordinate = this.view.getCoordinate();\n    var cfg = this.getValidScrollbarCfg();\n    var data = this.view.getOptions().data || [];\n    // 纵向做了 y 轴镜像之后，数据也需要镜像反转\n    if (coordinate.isReflect('y') && cfg.type === 'vertical') {\n      data = __spreadArray([], __read(data), false).reverse();\n    }\n    return data;\n  };\n  return Scrollbar;\n}(Controller);\nexport default Scrollbar;","map":{"version":3,"names":["__assign","__extends","__read","__rest","__spreadArray","Controller","Scrollbar","ScrollbarComponent","BBox","directionToPosition","COMPONENT_TYPE","DIRECTION","LAYER","VIEW_LIFE_CIRCLE","isObject","clamp","size","throttle","noop","get","valuesOfKey","deepMix","isBetween","DEFAULT_PADDING","DEFAULT_SIZE","DEFAULT_CATEGORY_SIZE","MIN_THUMB_LENGTH","_super","view","_this","call","onChangeFn","resetMeasure","clear","onValueChange","_a","ratio","animate","getValidScrollbarCfg","originalAnimate","getOptions","changeViewData","getScrollRange","container","getLayer","FORE","addGroup","leading","trackLen","thumbLen","on","BEFORE_CHANGE_DATA","BEFORE_CHANGE_SIZE","Object","defineProperty","prototype","enumerable","configurable","destroy","off","init","render","option","scrollbar","updateScrollbar","createScrollbar","component","undefined","layout","measureScrollbar","setTimeout","destroyed","width","coordinateBBox","padding","bboxObject","getLayoutBBox","bbox","x","y","Math","min","height","expand","cfg","getScrollbarComponentCfg","isHorizontal","viewBBox","BOTTOM","x1","y1","_b","x2","y2","_c","RIGHT","_d","update","thumbOffset","cut","getComponents","cnt","step","data","xScaleCfg","yScalesCfg","setValue","getValue","getThemeOptions","theme","getTheme","getScrollbarTheme","style","thumbHighlightColor","restStyles","default","hover","thumbColor","xScale","getXScale","yScales","getYScales","slice","getScrollbarData","getStep","getCnt","field","values","startIdx","floor","endIdx","type","xScaleValues","isLinear","sort","a","b","Number","xValues","reverse","forEach","scale","formatter","max","tickMethod","filter","val","idx","indexOf","layer","direction","SCROLLBAR","config","realConfig","categorySize","paddingTop","paddingRight","paddingBottom","paddingLeft","position","minX","maxY","maxX","minY","coordinate","getCoordinate","isReflect"],"sources":["/Users/obiechina/Documents/ridy-flutter-full-taxi-solution 2/node_modules/@antv/g2/esm/chart/controller/scrollbar.js"],"sourcesContent":["import { __assign, __extends, __read, __rest, __spreadArray } from \"tslib\";\nimport { Controller } from './base';\nimport { Scrollbar as ScrollbarComponent } from '../../dependents';\nimport { BBox } from '../../util/bbox';\nimport { directionToPosition } from '../../util/direction';\nimport { COMPONENT_TYPE, DIRECTION, LAYER, VIEW_LIFE_CIRCLE } from '../../constant';\nimport { isObject, clamp, size, throttle, noop, get, valuesOfKey, deepMix } from '@antv/util';\nimport { isBetween } from '../../util/helper';\nvar DEFAULT_PADDING = 0;\nvar DEFAULT_SIZE = 8;\nvar DEFAULT_CATEGORY_SIZE = 32;\nvar MIN_THUMB_LENGTH = 20;\nvar Scrollbar = /** @class */ (function (_super) {\n    __extends(Scrollbar, _super);\n    function Scrollbar(view) {\n        var _this = _super.call(this, view) || this;\n        _this.onChangeFn = noop;\n        _this.resetMeasure = function () {\n            _this.clear();\n        };\n        _this.onValueChange = function (_a) {\n            var ratio = _a.ratio;\n            var animate = _this.getValidScrollbarCfg().animate;\n            _this.ratio = clamp(ratio, 0, 1);\n            var originalAnimate = _this.view.getOptions().animate;\n            if (!animate) {\n                _this.view.animate(false);\n            }\n            _this.changeViewData(_this.getScrollRange(), true);\n            _this.view.animate(originalAnimate);\n        };\n        _this.container = _this.view.getLayer(LAYER.FORE).addGroup();\n        _this.onChangeFn = throttle(_this.onValueChange, 20, {\n            leading: true,\n        });\n        _this.trackLen = 0;\n        _this.thumbLen = 0;\n        _this.ratio = 0;\n        _this.view.on(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA, _this.resetMeasure);\n        _this.view.on(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_SIZE, _this.resetMeasure);\n        return _this;\n    }\n    Object.defineProperty(Scrollbar.prototype, \"name\", {\n        get: function () {\n            return 'scrollbar';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Scrollbar.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.view.off(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA, this.resetMeasure);\n        this.view.off(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_SIZE, this.resetMeasure);\n    };\n    Scrollbar.prototype.init = function () { };\n    /**\n     * 渲染\n     */\n    Scrollbar.prototype.render = function () {\n        this.option = this.view.getOptions().scrollbar;\n        if (this.option) {\n            if (this.scrollbar) {\n                // exist, update\n                this.scrollbar = this.updateScrollbar();\n            }\n            else {\n                // not exist, create\n                this.scrollbar = this.createScrollbar();\n                this.scrollbar.component.on('scrollchange', this.onChangeFn);\n            }\n        }\n        else {\n            if (this.scrollbar) {\n                // exist, destroy\n                this.scrollbar.component.destroy();\n                this.scrollbar = undefined;\n            }\n        }\n    };\n    /**\n     * 布局\n     */\n    Scrollbar.prototype.layout = function () {\n        var _this = this;\n        if (this.option && !this.trackLen) {\n            this.measureScrollbar();\n            setTimeout(function () {\n                if (!_this.view.destroyed) {\n                    _this.changeViewData(_this.getScrollRange(), true);\n                }\n            });\n        }\n        if (this.scrollbar) {\n            var width = this.view.coordinateBBox.width;\n            var padding = this.scrollbar.component.get('padding');\n            var bboxObject = this.scrollbar.component.getLayoutBBox();\n            var bbox = new BBox(bboxObject.x, bboxObject.y, Math.min(bboxObject.width, width), bboxObject.height).expand(padding);\n            var cfg = this.getScrollbarComponentCfg();\n            var x = void 0;\n            var y = void 0;\n            if (cfg.isHorizontal) {\n                var _a = __read(directionToPosition(this.view.viewBBox, bbox, DIRECTION.BOTTOM), 2), x1 = _a[0], y1 = _a[1];\n                var _b = __read(directionToPosition(this.view.coordinateBBox, bbox, DIRECTION.BOTTOM), 2), x2 = _b[0], y2 = _b[1];\n                x = x2;\n                y = y1;\n            }\n            else {\n                var _c = __read(directionToPosition(this.view.viewBBox, bbox, DIRECTION.RIGHT), 2), x1 = _c[0], y1 = _c[1];\n                var _d = __read(directionToPosition(this.view.viewBBox, bbox, DIRECTION.RIGHT), 2), x2 = _d[0], y2 = _d[1];\n                x = x2;\n                y = y1;\n            }\n            x += padding[3];\n            y += padding[0];\n            // 默认放在 bottom\n            if (this.trackLen) {\n                this.scrollbar.component.update(__assign(__assign({}, cfg), { x: x, y: y, trackLen: this.trackLen, thumbLen: this.thumbLen, thumbOffset: (this.trackLen - this.thumbLen) * this.ratio }));\n            }\n            else {\n                this.scrollbar.component.update(__assign(__assign({}, cfg), { x: x, y: y }));\n            }\n            this.view.viewBBox = this.view.viewBBox.cut(bbox, cfg.isHorizontal ? DIRECTION.BOTTOM : DIRECTION.RIGHT);\n        }\n    };\n    /**\n     * 更新\n     */\n    Scrollbar.prototype.update = function () {\n        // 逻辑和 render 保持一致\n        this.render();\n    };\n    Scrollbar.prototype.getComponents = function () {\n        return this.scrollbar ? [this.scrollbar] : [];\n    };\n    Scrollbar.prototype.clear = function () {\n        if (this.scrollbar) {\n            this.scrollbar.component.destroy();\n            this.scrollbar = undefined;\n        }\n        this.trackLen = 0;\n        this.thumbLen = 0;\n        this.ratio = 0;\n        this.cnt = 0;\n        this.step = 0;\n        this.data = undefined;\n        this.xScaleCfg = undefined;\n        this.yScalesCfg = [];\n    };\n    /** 设置滚动条位置  */\n    Scrollbar.prototype.setValue = function (ratio) {\n        this.onValueChange({ ratio: ratio });\n    };\n    /** 获得滚动条位置  */\n    Scrollbar.prototype.getValue = function () {\n        return this.ratio;\n    };\n    /**\n     * 获取 scrollbar 的主题配置\n     */\n    Scrollbar.prototype.getThemeOptions = function () {\n        var theme = this.view.getTheme();\n        return get(theme, ['components', 'scrollbar', 'common'], {});\n    };\n    /**\n     * 获取 scrollbar 组件的主题样式\n     */\n    Scrollbar.prototype.getScrollbarTheme = function (style) {\n        var theme = get(this.view.getTheme(), ['components', 'scrollbar']);\n        var _a = style || {}, thumbHighlightColor = _a.thumbHighlightColor, restStyles = __rest(_a, [\"thumbHighlightColor\"]);\n        return {\n            default: deepMix({}, get(theme, ['default', 'style'], {}), restStyles),\n            hover: deepMix({}, get(theme, ['hover', 'style'], {}), { thumbColor: thumbHighlightColor }),\n        };\n    };\n    Scrollbar.prototype.measureScrollbar = function () {\n        var xScale = this.view.getXScale();\n        var yScales = this.view.getYScales().slice();\n        this.data = this.getScrollbarData();\n        this.step = this.getStep();\n        this.cnt = this.getCnt();\n        var _a = this.getScrollbarComponentCfg(), trackLen = _a.trackLen, thumbLen = _a.thumbLen;\n        this.trackLen = trackLen;\n        this.thumbLen = thumbLen;\n        this.xScaleCfg = {\n            field: xScale.field,\n            values: xScale.values || [],\n        };\n        this.yScalesCfg = yScales;\n    };\n    Scrollbar.prototype.getScrollRange = function () {\n        var startIdx = Math.floor((this.cnt - this.step) * clamp(this.ratio, 0, 1));\n        var endIdx = Math.min(startIdx + this.step - 1, this.cnt - 1);\n        return [startIdx, endIdx];\n    };\n    Scrollbar.prototype.changeViewData = function (_a, render) {\n        var _this = this;\n        var _b = __read(_a, 2), startIdx = _b[0], endIdx = _b[1];\n        var type = this.getValidScrollbarCfg().type;\n        var isHorizontal = type !== 'vertical';\n        var values = valuesOfKey(this.data, this.xScaleCfg.field);\n        // 如果是 xScale 数值类型，则进行排序\n        var xScaleValues = this.view.getXScale().isLinear ? values.sort(function (a, b) { return Number(a) - Number(b); }) : values;\n        var xValues = isHorizontal ? xScaleValues : xScaleValues.reverse();\n        this.yScalesCfg.forEach(function (cfg) {\n            _this.view.scale(cfg.field, {\n                formatter: cfg.formatter,\n                type: cfg.type,\n                min: cfg.min,\n                max: cfg.max,\n                tickMethod: cfg.tickMethod\n            });\n        });\n        this.view.filter(this.xScaleCfg.field, function (val) {\n            var idx = xValues.indexOf(val);\n            return idx > -1 ? isBetween(idx, startIdx, endIdx) : true;\n        });\n        this.view.render(true);\n    };\n    Scrollbar.prototype.createScrollbar = function () {\n        var type = this.getValidScrollbarCfg().type;\n        var isHorizontal = type !== 'vertical';\n        var component = new ScrollbarComponent(__assign(__assign({ container: this.container }, this.getScrollbarComponentCfg()), { x: 0, y: 0 }));\n        component.init();\n        return {\n            component: component,\n            layer: LAYER.FORE,\n            direction: isHorizontal ? DIRECTION.BOTTOM : DIRECTION.RIGHT,\n            type: COMPONENT_TYPE.SCROLLBAR,\n        };\n    };\n    Scrollbar.prototype.updateScrollbar = function () {\n        var config = this.getScrollbarComponentCfg();\n        var realConfig = this.trackLen\n            ? __assign(__assign({}, config), { trackLen: this.trackLen, thumbLen: this.thumbLen, thumbOffset: (this.trackLen - this.thumbLen) * this.ratio }) : __assign({}, config);\n        this.scrollbar.component.update(realConfig);\n        return this.scrollbar;\n    };\n    Scrollbar.prototype.getStep = function () {\n        if (this.step) {\n            return this.step;\n        }\n        var coordinateBBox = this.view.coordinateBBox;\n        var _a = this.getValidScrollbarCfg(), type = _a.type, categorySize = _a.categorySize;\n        var isHorizontal = type !== 'vertical';\n        return Math.floor((isHorizontal ? coordinateBBox.width : coordinateBBox.height) / categorySize);\n    };\n    Scrollbar.prototype.getCnt = function () {\n        if (this.cnt) {\n            return this.cnt;\n        }\n        var xScale = this.view.getXScale();\n        var data = this.getScrollbarData();\n        var values = valuesOfKey(data, xScale.field);\n        return size(values);\n    };\n    Scrollbar.prototype.getScrollbarComponentCfg = function () {\n        var _a = this.view, coordinateBBox = _a.coordinateBBox, viewBBox = _a.viewBBox;\n        var _b = this.getValidScrollbarCfg(), type = _b.type, padding = _b.padding, width = _b.width, height = _b.height, style = _b.style;\n        var isHorizontal = type !== 'vertical';\n        var _c = __read(padding, 4), paddingTop = _c[0], paddingRight = _c[1], paddingBottom = _c[2], paddingLeft = _c[3];\n        var position = isHorizontal\n            ? {\n                x: coordinateBBox.minX + paddingLeft,\n                y: viewBBox.maxY - height - paddingBottom,\n            }\n            : {\n                x: viewBBox.maxX - width - paddingRight,\n                y: coordinateBBox.minY + paddingTop,\n            };\n        var step = this.getStep();\n        var cnt = this.getCnt();\n        var trackLen = isHorizontal\n            ? coordinateBBox.width - paddingLeft - paddingRight\n            : coordinateBBox.height - paddingTop - paddingBottom;\n        var thumbLen = Math.max(trackLen * clamp(step / cnt, 0, 1), MIN_THUMB_LENGTH);\n        return __assign(__assign({}, this.getThemeOptions()), { x: position.x, y: position.y, size: isHorizontal ? height : width, isHorizontal: isHorizontal, trackLen: trackLen, thumbLen: thumbLen, thumbOffset: 0, theme: this.getScrollbarTheme(style) });\n    };\n    /**\n     * 填充一些默认的配置项目\n     */\n    Scrollbar.prototype.getValidScrollbarCfg = function () {\n        var cfg = {\n            type: 'horizontal',\n            categorySize: DEFAULT_CATEGORY_SIZE,\n            width: DEFAULT_SIZE,\n            height: DEFAULT_SIZE,\n            padding: [0, 0, 0, 0],\n            animate: true,\n            style: {},\n        };\n        if (isObject(this.option)) {\n            cfg = __assign(__assign({}, cfg), this.option);\n        }\n        if (!isObject(this.option) || !this.option.padding) {\n            cfg.padding =\n                cfg.type === 'horizontal' ? [DEFAULT_PADDING, 0, DEFAULT_PADDING, 0] : [0, DEFAULT_PADDING, 0, DEFAULT_PADDING];\n        }\n        return cfg;\n    };\n    /**\n     * 获取数据\n     */\n    Scrollbar.prototype.getScrollbarData = function () {\n        var coordinate = this.view.getCoordinate();\n        var cfg = this.getValidScrollbarCfg();\n        var data = this.view.getOptions().data || [];\n        // 纵向做了 y 轴镜像之后，数据也需要镜像反转\n        if (coordinate.isReflect('y') && cfg.type === 'vertical') {\n            data = __spreadArray([], __read(data), false).reverse();\n        }\n        return data;\n    };\n    return Scrollbar;\n}(Controller));\nexport default Scrollbar;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}