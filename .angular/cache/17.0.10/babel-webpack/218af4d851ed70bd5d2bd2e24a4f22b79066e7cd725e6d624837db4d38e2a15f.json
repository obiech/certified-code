{"ast":null,"code":"import { __values } from \"tslib\";\nimport { each, get, isNil, deepMix, groupBy } from '@antv/util';\nimport { polarToCartesian } from '../../../../util/graphics';\nimport { antiCollision } from './util';\nimport { translate } from '../../../../util/transform';\n/** 拐点偏移量, 暂不可配置 */\nvar INFLECTION_OFFSET = 4;\n/** 标签偏移量, distance between label and edge: offsetX */\nvar LABEL_OFFSET_X = 4;\n/** 标签与牵引线的偏移量 */\nvar LABEL_TEXT_LINE_OFFSET = 4;\nfunction drawLabelline(item, coordinate, inRight) {\n  /** 坐标圆心 */\n  var center = coordinate.getCenter();\n  /** 圆半径 */\n  var radius = coordinate.getRadius();\n  var startPoint = {\n    x: item.x - (inRight ? LABEL_TEXT_LINE_OFFSET : -LABEL_TEXT_LINE_OFFSET),\n    y: item.y\n  };\n  var inflectionPoint = polarToCartesian(center.x, center.y, radius + INFLECTION_OFFSET, item.angle);\n  var p1 = {\n    x: startPoint.x,\n    y: startPoint.y\n  };\n  var p2 = {\n    x: inflectionPoint.x,\n    y: inflectionPoint.y\n  };\n  var endPoint = polarToCartesian(center.x, center.y, radius, item.angle);\n  var path = '';\n  // 文本被调整下去了，则添加拐点连接线\n  if (startPoint.y !== inflectionPoint.y) {\n    var offset = inRight ? 4 : -4;\n    p1.y = startPoint.y;\n    /** 是否在第一象限 */\n    if (item.angle < 0 && item.angle >= -Math.PI / 2) {\n      p1.x = Math.max(inflectionPoint.x, startPoint.x - offset);\n      if (startPoint.y < inflectionPoint.y) {\n        p2.y = p1.y;\n      } else {\n        p2.y = inflectionPoint.y;\n        p2.x = Math.max(p2.x, p1.x - offset);\n      }\n    }\n    /** 是否在 第二象限 */\n    if (item.angle > 0 && item.angle < Math.PI / 2) {\n      p1.x = Math.max(inflectionPoint.x, startPoint.x - offset);\n      if (startPoint.y > inflectionPoint.y) {\n        p2.y = p1.y;\n      } else {\n        p2.y = inflectionPoint.y;\n        p2.x = Math.max(p2.x, p1.x - offset);\n      }\n    }\n    /** 是否在 第三象限 */\n    if (item.angle > Math.PI / 2) {\n      p1.x = Math.min(inflectionPoint.x, startPoint.x - offset);\n      if (startPoint.y > inflectionPoint.y) {\n        p2.y = p1.y;\n      } else {\n        p2.y = inflectionPoint.y;\n        p2.x = Math.min(p2.x, p1.x - offset);\n      }\n    }\n    /** 是否在 第四象限 */\n    if (item.angle < -Math.PI / 2) {\n      p1.x = Math.min(inflectionPoint.x, startPoint.x - offset);\n      if (startPoint.y < inflectionPoint.y) {\n        p2.y = p1.y;\n      } else {\n        p2.y = inflectionPoint.y;\n        p2.x = Math.min(p2.x, p1.x - offset);\n      }\n    }\n  }\n  path = [\"M \".concat(startPoint.x, \",\").concat(startPoint.y), \"L \".concat(p1.x, \",\").concat(p1.y), \"L \".concat(p2.x, \",\").concat(p2.y), \"L \".concat(inflectionPoint.x, \",\").concat(inflectionPoint.y), \"L \".concat(endPoint.x, \",\").concat(endPoint.y)].join(' ');\n  item.labelLine = deepMix({}, item.labelLine, {\n    path: path\n  });\n}\n/**\n * 饼图标签 spider 布局, 只适用于 pie-spider 的标签类型\n * region 应该是 labelsRenderer 容器的范围限制(便于后续组件间布局)\n */\nexport function pieSpiderLabelLayout(items, labels, shapes, region) {\n  var e_1, _a;\n  /** 坐标系 */\n  var coordinate = labels[0] && labels[0].get('coordinate');\n  if (!coordinate) {\n    return;\n  }\n  /** 坐标圆心 */\n  var center = coordinate.getCenter();\n  /** 圆半径 */\n  var radius = coordinate.getRadius();\n  /** label shapes */\n  var labelsMap = {};\n  try {\n    for (var labels_1 = __values(labels), labels_1_1 = labels_1.next(); !labels_1_1.done; labels_1_1 = labels_1.next()) {\n      var labelShape = labels_1_1.value;\n      labelsMap[labelShape.get('id')] = labelShape;\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (labels_1_1 && !labels_1_1.done && (_a = labels_1.return)) _a.call(labels_1);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n  var labelHeight = get(items[0], 'labelHeight', 14);\n  var labelOffset = Math.max(get(items[0], 'offset', 0), INFLECTION_OFFSET);\n  // step 1: adjust items to spider\n  each(items, function (item) {\n    if (!item) return;\n    var label = get(labelsMap, [item.id]);\n    if (!label) return;\n    var inRight = item.x > center.x || item.x === center.x && item.y > center.y;\n    var offsetX = !isNil(item.offsetX) ? item.offsetX : LABEL_OFFSET_X;\n    var inflectionPoint = polarToCartesian(center.x, center.y, radius + INFLECTION_OFFSET, item.angle);\n    var totalOffset = labelOffset + offsetX;\n    item.x = center.x + (inRight ? 1 : -1) * (radius + totalOffset);\n    item.y = inflectionPoint.y;\n  });\n  var start = coordinate.start,\n    end = coordinate.end;\n  var LEFT_HALF_KEY = 'left';\n  var RIGHT_HALF_KEY = 'right';\n  // step 1: separate labels\n  var separateLabels = groupBy(items, function (item) {\n    return item.x < center.x ? LEFT_HALF_KEY : RIGHT_HALF_KEY;\n  });\n  // step2: calculate totalHeight\n  var totalHeight = (radius + labelOffset) * 2 + labelHeight;\n  each(separateLabels, function (half) {\n    var halfHeight = half.length * labelHeight;\n    if (halfHeight > totalHeight) {\n      totalHeight = Math.min(halfHeight, Math.abs(start.y - end.y));\n    }\n  });\n  /** labels 容器的范围(后续根据组件的布局设计进行调整) */\n  var labelsContainerRange = {\n    minX: start.x,\n    maxX: end.x,\n    minY: center.y - totalHeight / 2,\n    maxY: center.y + totalHeight / 2\n  };\n  // step 3: antiCollision\n  each(separateLabels, function (half, key) {\n    var maxLabelsCountForOneSide = totalHeight / labelHeight;\n    if (half.length > maxLabelsCountForOneSide) {\n      half.sort(function (a, b) {\n        // sort by percentage DESC\n        return b.percent - a.percent;\n      });\n      each(half, function (labelItem, idx) {\n        if (idx > maxLabelsCountForOneSide) {\n          labelsMap[labelItem.id].set('visible', false);\n          labelItem.invisible = true;\n        }\n      });\n    }\n    antiCollision(half, labelHeight, labelsContainerRange);\n  });\n  var startY = labelsContainerRange.minY;\n  var endY = labelsContainerRange.maxY;\n  // step4: applyTo labels and adjust labelLines\n  each(separateLabels, function (half, key) {\n    var inRight = key === RIGHT_HALF_KEY;\n    each(half, function (item) {\n      var label = get(labelsMap, item && [item.id]);\n      if (!label) {\n        return;\n      }\n      // out of range, hidden\n      if (item.y < startY || item.y > endY) {\n        label.set('visible', false);\n        return;\n      }\n      var labelContent = label.getChildByIndex(0);\n      var box = labelContent.getCanvasBBox();\n      var originalPos = {\n        x: inRight ? box.x : box.maxX,\n        y: box.y + box.height / 2 /** vertical-align: middle */\n      };\n      translate(labelContent, item.x - originalPos.x /** 从 pos.x 移动到 item.x */, item.y - originalPos.y);\n      // adjust labelLines\n      if (item.labelLine) {\n        drawLabelline(item, coordinate, inRight);\n      }\n    });\n  });\n}","map":{"version":3,"names":["__values","each","get","isNil","deepMix","groupBy","polarToCartesian","antiCollision","translate","INFLECTION_OFFSET","LABEL_OFFSET_X","LABEL_TEXT_LINE_OFFSET","drawLabelline","item","coordinate","inRight","center","getCenter","radius","getRadius","startPoint","x","y","inflectionPoint","angle","p1","p2","endPoint","path","offset","Math","PI","max","min","concat","join","labelLine","pieSpiderLabelLayout","items","labels","shapes","region","e_1","_a","labelsMap","labels_1","labels_1_1","next","done","labelShape","value","e_1_1","error","return","call","labelHeight","labelOffset","label","id","offsetX","totalOffset","start","end","LEFT_HALF_KEY","RIGHT_HALF_KEY","separateLabels","totalHeight","half","halfHeight","length","abs","labelsContainerRange","minX","maxX","minY","maxY","key","maxLabelsCountForOneSide","sort","a","b","percent","labelItem","idx","set","invisible","startY","endY","labelContent","getChildByIndex","box","getCanvasBBox","originalPos","height"],"sources":["/Users/obiechina/Documents/ridy-flutter-full-taxi-solution 2/node_modules/@antv/g2/esm/geometry/label/layout/pie/spider.js"],"sourcesContent":["import { __values } from \"tslib\";\nimport { each, get, isNil, deepMix, groupBy } from '@antv/util';\nimport { polarToCartesian } from '../../../../util/graphics';\nimport { antiCollision } from './util';\nimport { translate } from '../../../../util/transform';\n/** 拐点偏移量, 暂不可配置 */\nvar INFLECTION_OFFSET = 4;\n/** 标签偏移量, distance between label and edge: offsetX */\nvar LABEL_OFFSET_X = 4;\n/** 标签与牵引线的偏移量 */\nvar LABEL_TEXT_LINE_OFFSET = 4;\nfunction drawLabelline(item, coordinate, inRight) {\n    /** 坐标圆心 */\n    var center = coordinate.getCenter();\n    /** 圆半径 */\n    var radius = coordinate.getRadius();\n    var startPoint = {\n        x: item.x - (inRight ? LABEL_TEXT_LINE_OFFSET : -LABEL_TEXT_LINE_OFFSET),\n        y: item.y,\n    };\n    var inflectionPoint = polarToCartesian(center.x, center.y, radius + INFLECTION_OFFSET, item.angle);\n    var p1 = { x: startPoint.x, y: startPoint.y };\n    var p2 = { x: inflectionPoint.x, y: inflectionPoint.y };\n    var endPoint = polarToCartesian(center.x, center.y, radius, item.angle);\n    var path = '';\n    // 文本被调整下去了，则添加拐点连接线\n    if (startPoint.y !== inflectionPoint.y) {\n        var offset = inRight ? 4 : -4;\n        p1.y = startPoint.y;\n        /** 是否在第一象限 */\n        if (item.angle < 0 && item.angle >= -Math.PI / 2) {\n            p1.x = Math.max(inflectionPoint.x, startPoint.x - offset);\n            if (startPoint.y < inflectionPoint.y) {\n                p2.y = p1.y;\n            }\n            else {\n                p2.y = inflectionPoint.y;\n                p2.x = Math.max(p2.x, p1.x - offset);\n            }\n        }\n        /** 是否在 第二象限 */\n        if (item.angle > 0 && item.angle < Math.PI / 2) {\n            p1.x = Math.max(inflectionPoint.x, startPoint.x - offset);\n            if (startPoint.y > inflectionPoint.y) {\n                p2.y = p1.y;\n            }\n            else {\n                p2.y = inflectionPoint.y;\n                p2.x = Math.max(p2.x, p1.x - offset);\n            }\n        }\n        /** 是否在 第三象限 */\n        if (item.angle > Math.PI / 2) {\n            p1.x = Math.min(inflectionPoint.x, startPoint.x - offset);\n            if (startPoint.y > inflectionPoint.y) {\n                p2.y = p1.y;\n            }\n            else {\n                p2.y = inflectionPoint.y;\n                p2.x = Math.min(p2.x, p1.x - offset);\n            }\n        }\n        /** 是否在 第四象限 */\n        if (item.angle < -Math.PI / 2) {\n            p1.x = Math.min(inflectionPoint.x, startPoint.x - offset);\n            if (startPoint.y < inflectionPoint.y) {\n                p2.y = p1.y;\n            }\n            else {\n                p2.y = inflectionPoint.y;\n                p2.x = Math.min(p2.x, p1.x - offset);\n            }\n        }\n    }\n    path = [\n        \"M \".concat(startPoint.x, \",\").concat(startPoint.y),\n        \"L \".concat(p1.x, \",\").concat(p1.y),\n        \"L \".concat(p2.x, \",\").concat(p2.y),\n        \"L \".concat(inflectionPoint.x, \",\").concat(inflectionPoint.y),\n        \"L \".concat(endPoint.x, \",\").concat(endPoint.y),\n    ].join(' ');\n    item.labelLine = deepMix({}, item.labelLine, { path: path });\n}\n/**\n * 饼图标签 spider 布局, 只适用于 pie-spider 的标签类型\n * region 应该是 labelsRenderer 容器的范围限制(便于后续组件间布局)\n */\nexport function pieSpiderLabelLayout(items, labels, shapes, region) {\n    var e_1, _a;\n    /** 坐标系 */\n    var coordinate = labels[0] && labels[0].get('coordinate');\n    if (!coordinate) {\n        return;\n    }\n    /** 坐标圆心 */\n    var center = coordinate.getCenter();\n    /** 圆半径 */\n    var radius = coordinate.getRadius();\n    /** label shapes */\n    var labelsMap = {};\n    try {\n        for (var labels_1 = __values(labels), labels_1_1 = labels_1.next(); !labels_1_1.done; labels_1_1 = labels_1.next()) {\n            var labelShape = labels_1_1.value;\n            labelsMap[labelShape.get('id')] = labelShape;\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (labels_1_1 && !labels_1_1.done && (_a = labels_1.return)) _a.call(labels_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    var labelHeight = get(items[0], 'labelHeight', 14);\n    var labelOffset = Math.max(get(items[0], 'offset', 0), INFLECTION_OFFSET);\n    // step 1: adjust items to spider\n    each(items, function (item) {\n        if (!item)\n            return;\n        var label = get(labelsMap, [item.id]);\n        if (!label)\n            return;\n        var inRight = item.x > center.x || (item.x === center.x && item.y > center.y);\n        var offsetX = !isNil(item.offsetX) ? item.offsetX : LABEL_OFFSET_X;\n        var inflectionPoint = polarToCartesian(center.x, center.y, radius + INFLECTION_OFFSET, item.angle);\n        var totalOffset = labelOffset + offsetX;\n        item.x = center.x + (inRight ? 1 : -1) * (radius + totalOffset);\n        item.y = inflectionPoint.y;\n    });\n    var start = coordinate.start, end = coordinate.end;\n    var LEFT_HALF_KEY = 'left';\n    var RIGHT_HALF_KEY = 'right';\n    // step 1: separate labels\n    var separateLabels = groupBy(items, function (item) { return (item.x < center.x ? LEFT_HALF_KEY : RIGHT_HALF_KEY); });\n    // step2: calculate totalHeight\n    var totalHeight = (radius + labelOffset) * 2 + labelHeight;\n    each(separateLabels, function (half) {\n        var halfHeight = half.length * labelHeight;\n        if (halfHeight > totalHeight) {\n            totalHeight = Math.min(halfHeight, Math.abs(start.y - end.y));\n        }\n    });\n    /** labels 容器的范围(后续根据组件的布局设计进行调整) */\n    var labelsContainerRange = {\n        minX: start.x,\n        maxX: end.x,\n        minY: center.y - totalHeight / 2,\n        maxY: center.y + totalHeight / 2,\n    };\n    // step 3: antiCollision\n    each(separateLabels, function (half, key) {\n        var maxLabelsCountForOneSide = totalHeight / labelHeight;\n        if (half.length > maxLabelsCountForOneSide) {\n            half.sort(function (a, b) {\n                // sort by percentage DESC\n                return b.percent - a.percent;\n            });\n            each(half, function (labelItem, idx) {\n                if (idx > maxLabelsCountForOneSide) {\n                    labelsMap[labelItem.id].set('visible', false);\n                    labelItem.invisible = true;\n                }\n            });\n        }\n        antiCollision(half, labelHeight, labelsContainerRange);\n    });\n    var startY = labelsContainerRange.minY;\n    var endY = labelsContainerRange.maxY;\n    // step4: applyTo labels and adjust labelLines\n    each(separateLabels, function (half, key) {\n        var inRight = key === RIGHT_HALF_KEY;\n        each(half, function (item) {\n            var label = get(labelsMap, item && [item.id]);\n            if (!label) {\n                return;\n            }\n            // out of range, hidden\n            if (item.y < startY || item.y > endY) {\n                label.set('visible', false);\n                return;\n            }\n            var labelContent = label.getChildByIndex(0);\n            var box = labelContent.getCanvasBBox();\n            var originalPos = { x: inRight ? box.x : box.maxX, y: box.y + box.height / 2 /** vertical-align: middle */ };\n            translate(labelContent, item.x - originalPos.x /** 从 pos.x 移动到 item.x */, item.y - originalPos.y);\n            // adjust labelLines\n            if (item.labelLine) {\n                drawLabelline(item, coordinate, inRight);\n            }\n        });\n    });\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}