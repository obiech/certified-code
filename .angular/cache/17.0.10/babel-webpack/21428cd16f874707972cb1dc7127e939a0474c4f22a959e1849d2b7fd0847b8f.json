{"ast":null,"code":"import { BBox } from '../../../../util/bbox';\nimport { findLabelTextShape } from '../../util';\nfunction shouldInShapeSingle(geometry, label, shape) {\n  var coordinate = geometry.coordinate;\n  var textShape = findLabelTextShape(label);\n  var textBBox = BBox.fromObject(textShape.getCanvasBBox());\n  var shapeBBox = BBox.fromObject(shape.getBBox());\n  return coordinate.isTransposed ? shapeBBox.height >= textBBox.height : shapeBBox.width >= textBBox.width;\n}\nfunction shouldInShape(geometry, labels, shapes) {\n  var isStack = !!geometry.getAdjust('stack');\n  return isStack || labels.every(function (label, index) {\n    var shape = shapes[index];\n    return shouldInShapeSingle(geometry, label, shape);\n  });\n}\nfunction moveInShape(geometry, label, shape) {\n  var coordinate = geometry.coordinate;\n  var shapeBBox = BBox.fromObject(shape.getBBox());\n  var textShape = findLabelTextShape(label);\n  if (coordinate.isTransposed) {\n    // 水平方向：条形图系列\n    textShape.attr({\n      x: shapeBBox.minX + shapeBBox.width / 2,\n      textAlign: 'center'\n    });\n  } else {\n    // 垂直方向：柱形图系列\n    textShape.attr({\n      y: shapeBBox.minY + shapeBBox.height / 2,\n      textBaseline: 'middle'\n    });\n  }\n}\n/**\n * 适用于 interval geometry 的数据标签位置自动调整布局方法\n * @param items\n * @param labels\n * @param shapes\n */\nexport function intervalAdjustPosition(items, labels, shapes) {\n  var _a;\n  if (shapes.length === 0) {\n    return;\n  }\n  var element = (_a = shapes[0]) === null || _a === void 0 ? void 0 : _a.get('element');\n  var geometry = element === null || element === void 0 ? void 0 : element.geometry;\n  if (!geometry || geometry.type !== 'interval') {\n    return;\n  }\n  var inShape = shouldInShape(geometry, labels, shapes);\n  if (inShape) {\n    shapes.forEach(function (shape, index) {\n      var label = labels[index];\n      moveInShape(geometry, label, shape);\n    });\n  }\n}","map":{"version":3,"names":["BBox","findLabelTextShape","shouldInShapeSingle","geometry","label","shape","coordinate","textShape","textBBox","fromObject","getCanvasBBox","shapeBBox","getBBox","isTransposed","height","width","shouldInShape","labels","shapes","isStack","getAdjust","every","index","moveInShape","attr","x","minX","textAlign","y","minY","textBaseline","intervalAdjustPosition","items","_a","length","element","get","type","inShape","forEach"],"sources":["/Users/obiechina/Documents/ridy-flutter-full-taxi-solution 2/node_modules/@antv/g2/esm/geometry/label/layout/interval/adjust-position.js"],"sourcesContent":["import { BBox } from '../../../../util/bbox';\nimport { findLabelTextShape } from '../../util';\nfunction shouldInShapeSingle(geometry, label, shape) {\n    var coordinate = geometry.coordinate;\n    var textShape = findLabelTextShape(label);\n    var textBBox = BBox.fromObject(textShape.getCanvasBBox());\n    var shapeBBox = BBox.fromObject(shape.getBBox());\n    return coordinate.isTransposed ? shapeBBox.height >= textBBox.height : shapeBBox.width >= textBBox.width;\n}\nfunction shouldInShape(geometry, labels, shapes) {\n    var isStack = !!geometry.getAdjust('stack');\n    return (isStack ||\n        labels.every(function (label, index) {\n            var shape = shapes[index];\n            return shouldInShapeSingle(geometry, label, shape);\n        }));\n}\nfunction moveInShape(geometry, label, shape) {\n    var coordinate = geometry.coordinate;\n    var shapeBBox = BBox.fromObject(shape.getBBox());\n    var textShape = findLabelTextShape(label);\n    if (coordinate.isTransposed) {\n        // 水平方向：条形图系列\n        textShape.attr({\n            x: shapeBBox.minX + shapeBBox.width / 2,\n            textAlign: 'center',\n        });\n    }\n    else {\n        // 垂直方向：柱形图系列\n        textShape.attr({\n            y: shapeBBox.minY + shapeBBox.height / 2,\n            textBaseline: 'middle',\n        });\n    }\n}\n/**\n * 适用于 interval geometry 的数据标签位置自动调整布局方法\n * @param items\n * @param labels\n * @param shapes\n */\nexport function intervalAdjustPosition(items, labels, shapes) {\n    var _a;\n    if (shapes.length === 0) {\n        return;\n    }\n    var element = (_a = shapes[0]) === null || _a === void 0 ? void 0 : _a.get('element');\n    var geometry = element === null || element === void 0 ? void 0 : element.geometry;\n    if (!geometry || geometry.type !== 'interval') {\n        return;\n    }\n    var inShape = shouldInShape(geometry, labels, shapes);\n    if (inShape) {\n        shapes.forEach(function (shape, index) {\n            var label = labels[index];\n            moveInShape(geometry, label, shape);\n        });\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}