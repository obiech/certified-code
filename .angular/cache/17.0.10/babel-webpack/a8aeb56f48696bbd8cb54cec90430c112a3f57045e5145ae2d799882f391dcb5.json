{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport { isEqual, get, deepMix } from '@antv/util';\nimport { TOOLTIP_CSS_CONST } from '@antv/component';\nimport Action from '../../base';\nimport { HtmlTooltip } from '../../../../dependents';\n/**\n * 用于组件文本省略后需要展示完整信息的 Tooltip Action\n * @ignore\n */\nvar EllipsisText = /** @class */function (_super) {\n  __extends(EllipsisText, _super);\n  function EllipsisText() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.timeStamp = 0;\n    return _this;\n  }\n  EllipsisText.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n    this.tooltip && this.tooltip.destroy();\n  };\n  /**\n   * 显示 Tooltip\n   * @returns\n   */\n  EllipsisText.prototype.show = function () {\n    var context = this.context;\n    var ev = context.event;\n    var lastTimeStamp = this.timeStamp;\n    var timeStamp = +new Date();\n    if (timeStamp - lastTimeStamp > 16) {\n      var preLoc = this.location;\n      var curLoc = {\n        x: ev.x,\n        y: ev.y\n      };\n      if (!preLoc || !isEqual(preLoc, curLoc)) {\n        this.showTooltip(curLoc);\n      }\n      this.timeStamp = timeStamp;\n      this.location = curLoc;\n    }\n  };\n  /**\n   * 隐藏 Tooltip。\n   * @returns\n   */\n  EllipsisText.prototype.hide = function () {\n    this.hideTooltip();\n    this.location = null;\n  };\n  EllipsisText.prototype.showTooltip = function (curLoc) {\n    var context = this.context;\n    var ev = context.event;\n    var target = ev.target;\n    if (target && target.get('tip')) {\n      if (!this.tooltip) {\n        this.renderTooltip(); // 延迟生成\n      } else {\n        // 更新时需要重新获取 region 赋值，避免画布缩放后 tooltip 位置不对\n        var view = context.view;\n        var canvas = view.canvas;\n        var region = {\n          start: {\n            x: 0,\n            y: 0\n          },\n          end: {\n            x: canvas.get('width'),\n            y: canvas.get('height')\n          }\n        };\n        this.tooltip.set('region', region);\n      }\n      var tipContent = target.get('tip');\n      // 展示 tooltip\n      this.tooltip.update(__assign({\n        title: tipContent\n      }, curLoc));\n      this.tooltip.show();\n    }\n  };\n  EllipsisText.prototype.hideTooltip = function () {\n    this.tooltip && this.tooltip.hide();\n  };\n  EllipsisText.prototype.renderTooltip = function () {\n    var _a;\n    var view = this.context.view;\n    var canvas = view.canvas;\n    var region = {\n      start: {\n        x: 0,\n        y: 0\n      },\n      end: {\n        x: canvas.get('width'),\n        y: canvas.get('height')\n      }\n    };\n    var theme = view.getTheme();\n    var tooltipStyles = get(theme, ['components', 'tooltip', 'domStyles'], {}); // 获取 tooltip 样式\n    var tooltip = new HtmlTooltip({\n      parent: canvas.get('el').parentNode,\n      region: region,\n      visible: false,\n      crosshairs: null,\n      domStyles: __assign({}, deepMix({}, tooltipStyles, (_a = {},\n      // 超长的时候，tooltip tip 最大宽度为 50%，然后可以换行\n      _a[TOOLTIP_CSS_CONST.CONTAINER_CLASS] = {\n        'max-width': '50%'\n      }, _a[TOOLTIP_CSS_CONST.TITLE_CLASS] = {\n        'word-break': 'break-all'\n      }, _a)))\n    });\n    tooltip.init();\n    tooltip.setCapture(false); // 不允许捕获事件\n    this.tooltip = tooltip;\n  };\n  return EllipsisText;\n}(Action);\nexport default EllipsisText;","map":{"version":3,"names":["__assign","__extends","isEqual","get","deepMix","TOOLTIP_CSS_CONST","Action","HtmlTooltip","EllipsisText","_super","_this","apply","arguments","timeStamp","prototype","destroy","call","tooltip","show","context","ev","event","lastTimeStamp","Date","preLoc","location","curLoc","x","y","showTooltip","hide","hideTooltip","target","renderTooltip","view","canvas","region","start","end","set","tipContent","update","title","_a","theme","getTheme","tooltipStyles","parent","parentNode","visible","crosshairs","domStyles","CONTAINER_CLASS","TITLE_CLASS","init","setCapture"],"sources":["/Users/obiechina/Documents/ridy-flutter-full-taxi-solution 2/node_modules/@antv/g2/esm/interaction/action/component/tooltip/ellipsis-text.js"],"sourcesContent":["import { __assign, __extends } from \"tslib\";\nimport { isEqual, get, deepMix } from '@antv/util';\nimport { TOOLTIP_CSS_CONST } from '@antv/component';\nimport Action from '../../base';\nimport { HtmlTooltip } from '../../../../dependents';\n/**\n * 用于组件文本省略后需要展示完整信息的 Tooltip Action\n * @ignore\n */\nvar EllipsisText = /** @class */ (function (_super) {\n    __extends(EllipsisText, _super);\n    function EllipsisText() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.timeStamp = 0;\n        return _this;\n    }\n    EllipsisText.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.tooltip && this.tooltip.destroy();\n    };\n    /**\n     * 显示 Tooltip\n     * @returns\n     */\n    EllipsisText.prototype.show = function () {\n        var context = this.context;\n        var ev = context.event;\n        var lastTimeStamp = this.timeStamp;\n        var timeStamp = +new Date();\n        if (timeStamp - lastTimeStamp > 16) {\n            var preLoc = this.location;\n            var curLoc = { x: ev.x, y: ev.y };\n            if (!preLoc || !isEqual(preLoc, curLoc)) {\n                this.showTooltip(curLoc);\n            }\n            this.timeStamp = timeStamp;\n            this.location = curLoc;\n        }\n    };\n    /**\n     * 隐藏 Tooltip。\n     * @returns\n     */\n    EllipsisText.prototype.hide = function () {\n        this.hideTooltip();\n        this.location = null;\n    };\n    EllipsisText.prototype.showTooltip = function (curLoc) {\n        var context = this.context;\n        var ev = context.event;\n        var target = ev.target;\n        if (target && target.get('tip')) {\n            if (!this.tooltip) {\n                this.renderTooltip(); // 延迟生成\n            }\n            else {\n                // 更新时需要重新获取 region 赋值，避免画布缩放后 tooltip 位置不对\n                var view = context.view;\n                var canvas = view.canvas;\n                var region = {\n                    start: { x: 0, y: 0 },\n                    end: { x: canvas.get('width'), y: canvas.get('height') },\n                };\n                this.tooltip.set('region', region);\n            }\n            var tipContent = target.get('tip');\n            // 展示 tooltip\n            this.tooltip.update(__assign({ title: tipContent }, curLoc));\n            this.tooltip.show();\n        }\n    };\n    EllipsisText.prototype.hideTooltip = function () {\n        this.tooltip && this.tooltip.hide();\n    };\n    EllipsisText.prototype.renderTooltip = function () {\n        var _a;\n        var view = this.context.view;\n        var canvas = view.canvas;\n        var region = {\n            start: { x: 0, y: 0 },\n            end: { x: canvas.get('width'), y: canvas.get('height') },\n        };\n        var theme = view.getTheme();\n        var tooltipStyles = get(theme, ['components', 'tooltip', 'domStyles'], {}); // 获取 tooltip 样式\n        var tooltip = new HtmlTooltip({\n            parent: canvas.get('el').parentNode,\n            region: region,\n            visible: false,\n            crosshairs: null,\n            domStyles: __assign({}, deepMix({}, tooltipStyles, (_a = {},\n                // 超长的时候，tooltip tip 最大宽度为 50%，然后可以换行\n                _a[TOOLTIP_CSS_CONST.CONTAINER_CLASS] = { 'max-width': '50%' },\n                _a[TOOLTIP_CSS_CONST.TITLE_CLASS] = { 'word-break': 'break-all' },\n                _a))),\n        });\n        tooltip.init();\n        tooltip.setCapture(false); // 不允许捕获事件\n        this.tooltip = tooltip;\n    };\n    return EllipsisText;\n}(Action));\nexport default EllipsisText;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}