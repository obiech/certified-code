{"ast":null,"code":"import _asyncToGenerator from \"/Users/obiechina/Documents/ridy-flutter-full-taxi-solution 2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { UntypedFormBuilder, Validators } from '@angular/forms';\nimport { ActivatedRoute } from '@angular/router';\nimport { CreateServiceCategoryGQL, DeleteServiceCategoryGQL, UpdateServiceCategoryGQL } from '@ridy/admin-panel/generated/graphql';\nimport { RouterHelperService } from '@ridy/admin-panel/src/app/@services/router-helper.service';\nimport { NzMessageService } from 'ng-zorro-antd/message';\nimport { firstValueFrom } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@ridy/admin-panel/generated/graphql\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@ridy/admin-panel/src/app/@services/router-helper.service\";\nimport * as i5 from \"ng-zorro-antd/message\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"ng-zorro-antd/input\";\nimport * as i8 from \"ng-zorro-antd/button\";\nimport * as i9 from \"ng-zorro-antd/core/transition-patch\";\nimport * as i10 from \"ng-zorro-antd/core/wave\";\nimport * as i11 from \"ng-zorro-antd/grid\";\nimport * as i12 from \"ng-zorro-antd/form\";\nimport * as i13 from \"ng-zorro-antd/page-header\";\nimport * as i14 from \"ng-zorro-antd/card\";\nimport * as i15 from \"@ngx-translate/core\";\nfunction ManagementServiceCategoryViewComponent_nz_card_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"nz-card\", 7);\n    i0.ɵɵpipe(1, \"translate\");\n    i0.ɵɵelementStart(2, \"div\")(3, \"p\", 8);\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\", 9);\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function ManagementServiceCategoryViewComponent_nz_card_10_Template_button_click_9_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.deleteCategory());\n    });\n    i0.ɵɵtext(10);\n    i0.ɵɵpipe(11, \"translate\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"nzTitle\", i0.ɵɵpipeBind1(1, 4, \"profile.dangerArea\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 6, \"profile.delete\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(8, 8, \"profile.deleteNotice\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(11, 10, \"profile.delete\"));\n  }\n}\nexport class ManagementServiceCategoryViewComponent {\n  constructor(route, updateGQL, createGQL, deleteGQL, fb, routerHelper, msg) {\n    this.route = route;\n    this.updateGQL = updateGQL;\n    this.createGQL = createGQL;\n    this.deleteGQL = deleteGQL;\n    this.fb = fb;\n    this.routerHelper = routerHelper;\n    this.msg = msg;\n    this.form = this.fb.group({\n      id: [null],\n      name: [null, Validators.required]\n    });\n  }\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n  }\n  ngOnInit() {\n    this.subscription = this.route.data.subscribe(data => data.serviceCategory != null ? this.form.patchValue(data.serviceCategory.data.serviceCategory) : null);\n  }\n  onSubmit() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      const {\n        id,\n        ...input\n      } = _this.form.value;\n      if (id == null) {\n        yield firstValueFrom(_this.createGQL.mutate({\n          input\n        }));\n      } else {\n        yield firstValueFrom(_this.updateGQL.mutate({\n          id,\n          input\n        }));\n      }\n      _this.routerHelper.goToParent(_this.route);\n    })();\n  }\n  deleteCategory() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      const id = _this2.form.value.id;\n      try {\n        const res = yield firstValueFrom(_this2.deleteGQL.mutate({\n          id\n        }));\n        _this2.routerHelper.goToParent(_this2.route);\n        _this2.msg.success('Deleted!');\n      } catch (exception) {\n        _this2.msg.error(exception.message);\n      }\n    })();\n  }\n  static {\n    this.ɵfac = function ManagementServiceCategoryViewComponent_Factory(t) {\n      return new (t || ManagementServiceCategoryViewComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.UpdateServiceCategoryGQL), i0.ɵɵdirectiveInject(i2.CreateServiceCategoryGQL), i0.ɵɵdirectiveInject(i2.DeleteServiceCategoryGQL), i0.ɵɵdirectiveInject(i3.UntypedFormBuilder), i0.ɵɵdirectiveInject(i4.RouterHelperService), i0.ɵɵdirectiveInject(i5.NzMessageService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ManagementServiceCategoryViewComponent,\n      selectors: [[\"app-management-service-category-view\"]],\n      decls: 11,\n      vars: 4,\n      consts: [[\"nzBackIcon\", \"\", \"nzTitle\", \"Service Category\", \"nzSubtitle\", \"Input service category details below.\", 3, \"nzGhost\"], [\"nz-form\", \"\", 3, \"formGroup\", \"ngSubmit\"], [\"nzRequired\", \"\", \"nzFor\", \"name\"], [\"nzErrorTip\", \"The input is not valid Name\"], [\"nz-input\", \"\", \"formControlName\", \"name\", \"id\", \"name\"], [\"nz-button\", \"\", \"nzType\", \"primary\", 1, \"float-right\", 3, \"disabled\"], [\"class\", \"mt-2\", 3, \"nzTitle\", 4, \"ngIf\"], [1, \"mt-2\", 3, \"nzTitle\"], [1, \"text-lg\", \"leading-6\", \"font-medium\", \"text-gray-900\"], [1, \"mt-2\", \"max-w-xl\", \"text-sm\", \"text-gray-500\"], [\"nz-button\", \"\", \"nzDanger\", \"\", 1, \"mt-2\", 3, \"click\"]],\n      template: function ManagementServiceCategoryViewComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelement(0, \"nz-page-header\", 0);\n          i0.ɵɵelementStart(1, \"nz-card\")(2, \"form\", 1);\n          i0.ɵɵlistener(\"ngSubmit\", function ManagementServiceCategoryViewComponent_Template_form_ngSubmit_2_listener() {\n            return ctx.onSubmit();\n          });\n          i0.ɵɵelementStart(3, \"nz-form-item\")(4, \"nz-form-label\", 2);\n          i0.ɵɵtext(5, \"Name\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(6, \"nz-form-control\", 3);\n          i0.ɵɵelement(7, \"input\", 4);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(8, \"button\", 5);\n          i0.ɵɵtext(9, \"Save\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵtemplate(10, ManagementServiceCategoryViewComponent_nz_card_10_Template, 12, 12, \"nz-card\", 6);\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"nzGhost\", false);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"formGroup\", ctx.form);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"disabled\", ctx.form.invalid);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", (ctx.form.value == null ? null : ctx.form.value.id) !== null);\n        }\n      },\n      dependencies: [i6.NgIf, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.FormControlName, i7.NzInputDirective, i8.NzButtonComponent, i9.ɵNzTransitionPatchDirective, i10.NzWaveDirective, i11.NzColDirective, i11.NzRowDirective, i12.NzFormDirective, i12.NzFormItemComponent, i12.NzFormLabelComponent, i12.NzFormControlComponent, i13.NzPageHeaderComponent, i14.NzCardComponent, i15.TranslatePipe],\n      encapsulation: 2\n    });\n  }\n}","map":{"version":3,"names":["UntypedFormBuilder","Validators","ActivatedRoute","CreateServiceCategoryGQL","DeleteServiceCategoryGQL","UpdateServiceCategoryGQL","RouterHelperService","NzMessageService","firstValueFrom","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","ManagementServiceCategoryViewComponent_nz_card_10_Template_button_click_9_listener","ɵɵrestoreView","_r2","ctx_r1","ɵɵnextContext","ɵɵresetView","deleteCategory","ɵɵproperty","ɵɵpipeBind1","ɵɵadvance","ɵɵtextInterpolate","ManagementServiceCategoryViewComponent","constructor","route","updateGQL","createGQL","deleteGQL","fb","routerHelper","msg","form","group","id","name","required","ngOnDestroy","subscription","unsubscribe","ngOnInit","data","subscribe","serviceCategory","patchValue","onSubmit","_this","_asyncToGenerator","input","value","mutate","goToParent","_this2","res","success","exception","error","message","ɵɵdirectiveInject","i1","i2","i3","i4","i5","selectors","decls","vars","consts","template","ManagementServiceCategoryViewComponent_Template","rf","ctx","ɵɵelement","ManagementServiceCategoryViewComponent_Template_form_ngSubmit_2_listener","ɵɵtemplate","ManagementServiceCategoryViewComponent_nz_card_10_Template","invalid"],"sources":["/Users/obiechina/Documents/ridy-flutter-full-taxi-solution 2/apps/admin-panel/src/app/cms/management/management-services/management-service-category-view/management-service-category-view.component.ts","/Users/obiechina/Documents/ridy-flutter-full-taxi-solution 2/apps/admin-panel/src/app/cms/management/management-services/management-service-category-view/management-service-category-view.component.html"],"sourcesContent":["import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { UntypedFormBuilder, Validators } from '@angular/forms';\nimport { ActivatedRoute } from '@angular/router';\nimport {\n  CreateServiceCategoryGQL,\n  DeleteServiceCategoryGQL,\n  UpdateServiceCategoryGQL,\n} from '@ridy/admin-panel/generated/graphql';\nimport { RouterHelperService } from '@ridy/admin-panel/src/app/@services/router-helper.service';\nimport { NzMessageService } from 'ng-zorro-antd/message';\nimport { firstValueFrom, Subscription } from 'rxjs';\n\n@Component({\n  selector: 'app-management-service-category-view',\n  templateUrl: './management-service-category-view.component.html'\n})\nexport class ManagementServiceCategoryViewComponent implements OnInit, OnDestroy {\n  form = this.fb.group({\n    id: [null],\n    name: [null, Validators.required]\n  });\n  subscription!: Subscription;\n\n  constructor(\n    private route: ActivatedRoute,\n    private updateGQL: UpdateServiceCategoryGQL,\n    private createGQL: CreateServiceCategoryGQL,\n    private deleteGQL: DeleteServiceCategoryGQL,\n    private fb: UntypedFormBuilder,\n    private routerHelper: RouterHelperService,\n    private msg: NzMessageService) { }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n\n  ngOnInit(): void {\n    this.subscription = this.route.data.subscribe(data => (data.serviceCategory != null ? this.form.patchValue(data.serviceCategory.data.serviceCategory) : null));\n  }\n\n  async onSubmit() {\n    const {id, ...input} = this.form.value;\n    if(id == null) {\n      await firstValueFrom(this.createGQL.mutate({input}));\n    } else {\n      await firstValueFrom(this.updateGQL.mutate({id, input}));\n    }\n    this.routerHelper.goToParent(this.route);\n  }\n\n  async deleteCategory() {\n    const id = this.form.value.id;\n    try {\n      const res = await firstValueFrom(this.deleteGQL.mutate({id}));\n      this.routerHelper.goToParent(this.route);\n      this.msg.success('Deleted!');\n    } catch(exception: any) {\n      this.msg.error(exception.message);\n    }\n    \n  }\n}\n","<nz-page-header\n      [nzGhost]=\"false\"\n      nzBackIcon\n      nzTitle=\"Service Category\"\n      nzSubtitle=\"Input service category details below.\">\n    </nz-page-header>\n    <nz-card>\n      <form nz-form [formGroup]=\"form\" (ngSubmit)=\"onSubmit()\">\n        <nz-form-item>\n          <nz-form-label nzRequired nzFor=\"name\">Name</nz-form-label>\n          <nz-form-control nzErrorTip=\"The input is not valid Name\">\n            <input nz-input formControlName=\"name\" id=\"name\" />\n          </nz-form-control>\n        </nz-form-item>\n        <button nz-button class=\"float-right\" nzType=\"primary\" [disabled]=\"form.invalid\">Save</button>\n      </form>\n    </nz-card>\n    <nz-card class=\"mt-2\" [nzTitle]=\"'profile.dangerArea' | translate\" *ngIf=\"this.form.value?.id !== null\">\n      <div>\n        <p class=\"text-lg leading-6 font-medium text-gray-900\">{{ 'profile.delete' | translate }}</p>\n        <p class=\"mt-2 max-w-xl text-sm text-gray-500\">{{ 'profile.deleteNotice' | translate }}</p>\n        <button nz-button nzDanger class=\"mt-2\" (click)=\"deleteCategory()\">{{ 'profile.delete' | translate }}</button>\n      </div>\n    </nz-card>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}