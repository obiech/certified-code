{"ast":null,"code":"import { __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport TransformAction from './scale-transform';\n/**\n * 拖拽 Scale 的 Action\n * @ignore\n */\nvar ScaleTranslate = /** @class */function (_super) {\n  __extends(ScaleTranslate, _super);\n  function ScaleTranslate() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.startPoint = null;\n    _this.starting = false;\n    _this.startCache = {};\n    return _this;\n  }\n  /**\n   * 开始\n   */\n  ScaleTranslate.prototype.start = function () {\n    var _this = this;\n    this.startPoint = this.context.getCurrentPoint();\n    this.starting = true;\n    var dims = this.dims;\n    each(dims, function (dim) {\n      var scale = _this.getScale(dim);\n      var min = scale.min,\n        max = scale.max,\n        values = scale.values;\n      _this.startCache[dim] = {\n        min: min,\n        max: max,\n        values: values\n      };\n    });\n  };\n  // 平移分类的度量\n  // private translateCategory(dim, scale, normalPoint) {\n  // }\n  /**\n   * 结束\n   */\n  ScaleTranslate.prototype.end = function () {\n    this.startPoint = null;\n    this.starting = false;\n    this.startCache = {};\n  };\n  /**\n   * 平移\n   */\n  ScaleTranslate.prototype.translate = function () {\n    var _this = this;\n    if (!this.starting) {\n      return;\n    }\n    var startPoint = this.startPoint;\n    var coord = this.context.view.getCoordinate();\n    var currentPoint = this.context.getCurrentPoint();\n    var normalStart = coord.invert(startPoint);\n    var noramlCurrent = coord.invert(currentPoint);\n    var dx = noramlCurrent.x - normalStart.x;\n    var dy = noramlCurrent.y - normalStart.y;\n    var view = this.context.view;\n    var dims = this.dims;\n    each(dims, function (dim) {\n      _this.translateDim(dim, {\n        x: dx * -1,\n        y: dy * -1\n      });\n    });\n    view.render(true);\n  };\n  // 平移度量\n  ScaleTranslate.prototype.translateDim = function (dim, normalPoint) {\n    if (this.hasDim(dim)) {\n      var scale = this.getScale(dim);\n      if (scale.isLinear) {\n        this.translateLinear(dim, scale, normalPoint);\n      }\n      //  else { // 暂时仅处理连续字段\n      // this.translateCategory(dim, scale, normalPoint);\n      // }\n    }\n  };\n  // linear 度量平移\n  ScaleTranslate.prototype.translateLinear = function (dim, scale, normalPoint) {\n    var view = this.context.view;\n    var _a = this.startCache[dim],\n      min = _a.min,\n      max = _a.max;\n    var range = max - min;\n    var d = normalPoint[dim] * range;\n    // 只有第一次缓存，否则无法回滚\n    if (!this.cacheScaleDefs[dim]) {\n      this.cacheScaleDefs[dim] = {\n        // @ts-ignore\n        nice: scale.nice,\n        min: min,\n        max: max\n      };\n    }\n    view.scale(scale.field, {\n      // @ts-ignore\n      nice: false,\n      min: min + d,\n      max: max + d\n    });\n  };\n  // 平移分类的度量\n  // private translateCategory(dim, scale, normalPoint) {\n  // }\n  /**\n   * 回滚\n   */\n  ScaleTranslate.prototype.reset = function () {\n    _super.prototype.reset.call(this);\n    this.startPoint = null;\n    this.starting = false;\n  };\n  return ScaleTranslate;\n}(TransformAction);\nexport default ScaleTranslate;","map":{"version":3,"names":["__extends","each","TransformAction","ScaleTranslate","_super","_this","apply","arguments","startPoint","starting","startCache","prototype","start","context","getCurrentPoint","dims","dim","scale","getScale","min","max","values","end","translate","coord","view","getCoordinate","currentPoint","normalStart","invert","noramlCurrent","dx","x","dy","y","translateDim","render","normalPoint","hasDim","isLinear","translateLinear","_a","range","d","cacheScaleDefs","nice","field","reset","call"],"sources":["/Users/obiechina/Documents/ridy-flutter-full-taxi-solution 2/node_modules/@antv/g2/esm/interaction/action/view/scale-translate.js"],"sourcesContent":["import { __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport TransformAction from './scale-transform';\n/**\n * 拖拽 Scale 的 Action\n * @ignore\n */\nvar ScaleTranslate = /** @class */ (function (_super) {\n    __extends(ScaleTranslate, _super);\n    function ScaleTranslate() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.startPoint = null;\n        _this.starting = false;\n        _this.startCache = {};\n        return _this;\n    }\n    /**\n     * 开始\n     */\n    ScaleTranslate.prototype.start = function () {\n        var _this = this;\n        this.startPoint = this.context.getCurrentPoint();\n        this.starting = true;\n        var dims = this.dims;\n        each(dims, function (dim) {\n            var scale = _this.getScale(dim);\n            var min = scale.min, max = scale.max, values = scale.values;\n            _this.startCache[dim] = { min: min, max: max, values: values };\n        });\n    };\n    // 平移分类的度量\n    // private translateCategory(dim, scale, normalPoint) {\n    // }\n    /**\n     * 结束\n     */\n    ScaleTranslate.prototype.end = function () {\n        this.startPoint = null;\n        this.starting = false;\n        this.startCache = {};\n    };\n    /**\n     * 平移\n     */\n    ScaleTranslate.prototype.translate = function () {\n        var _this = this;\n        if (!this.starting) {\n            return;\n        }\n        var startPoint = this.startPoint;\n        var coord = this.context.view.getCoordinate();\n        var currentPoint = this.context.getCurrentPoint();\n        var normalStart = coord.invert(startPoint);\n        var noramlCurrent = coord.invert(currentPoint);\n        var dx = noramlCurrent.x - normalStart.x;\n        var dy = noramlCurrent.y - normalStart.y;\n        var view = this.context.view;\n        var dims = this.dims;\n        each(dims, function (dim) {\n            _this.translateDim(dim, { x: dx * -1, y: dy * -1 });\n        });\n        view.render(true);\n    };\n    // 平移度量\n    ScaleTranslate.prototype.translateDim = function (dim, normalPoint) {\n        if (this.hasDim(dim)) {\n            var scale = this.getScale(dim);\n            if (scale.isLinear) {\n                this.translateLinear(dim, scale, normalPoint);\n            }\n            //  else { // 暂时仅处理连续字段\n            // this.translateCategory(dim, scale, normalPoint);\n            // }\n        }\n    };\n    // linear 度量平移\n    ScaleTranslate.prototype.translateLinear = function (dim, scale, normalPoint) {\n        var view = this.context.view;\n        var _a = this.startCache[dim], min = _a.min, max = _a.max;\n        var range = max - min;\n        var d = normalPoint[dim] * range;\n        // 只有第一次缓存，否则无法回滚\n        if (!this.cacheScaleDefs[dim]) {\n            this.cacheScaleDefs[dim] = {\n                // @ts-ignore\n                nice: scale.nice,\n                min: min,\n                max: max,\n            };\n        }\n        view.scale(scale.field, {\n            // @ts-ignore\n            nice: false,\n            min: min + d,\n            max: max + d,\n        });\n    };\n    // 平移分类的度量\n    // private translateCategory(dim, scale, normalPoint) {\n    // }\n    /**\n     * 回滚\n     */\n    ScaleTranslate.prototype.reset = function () {\n        _super.prototype.reset.call(this);\n        this.startPoint = null;\n        this.starting = false;\n    };\n    return ScaleTranslate;\n}(TransformAction));\nexport default ScaleTranslate;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}