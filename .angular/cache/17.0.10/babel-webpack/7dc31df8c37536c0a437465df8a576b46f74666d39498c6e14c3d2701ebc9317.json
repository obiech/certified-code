{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\n/**\n * @fileoverview 线\n * @author dxq613@gmail.com\n */\nimport { Line as LineUtil } from '@antv/g-math';\nimport ShapeBase from './base';\nimport inLine from '../util/in-stroke/line';\nimport * as ArrowUtil from '../util/arrow';\nvar Line = /** @class */function (_super) {\n  __extends(Line, _super);\n  function Line() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  Line.prototype.getDefaultAttrs = function () {\n    var attrs = _super.prototype.getDefaultAttrs.call(this);\n    return __assign(__assign({}, attrs), {\n      x1: 0,\n      y1: 0,\n      x2: 0,\n      y2: 0,\n      startArrow: false,\n      endArrow: false\n    });\n  };\n  Line.prototype.initAttrs = function (attrs) {\n    this.setArrow();\n  };\n  // 更新属性时，检测是否更改了箭头\n  Line.prototype.onAttrChange = function (name, value, originValue) {\n    _super.prototype.onAttrChange.call(this, name, value, originValue);\n    // 由于箭头的绘制依赖于 line 的诸多 attrs，因此这里不再对每个 attr 进行判断，attr 每次变化都会影响箭头的更新\n    this.setArrow();\n  };\n  Line.prototype.setArrow = function () {\n    var attrs = this.attr();\n    var x1 = attrs.x1,\n      y1 = attrs.y1,\n      x2 = attrs.x2,\n      y2 = attrs.y2,\n      startArrow = attrs.startArrow,\n      endArrow = attrs.endArrow;\n    if (startArrow) {\n      ArrowUtil.addStartArrow(this, attrs, x2, y2, x1, y1);\n    }\n    if (endArrow) {\n      ArrowUtil.addEndArrow(this, attrs, x1, y1, x2, y2);\n    }\n  };\n  Line.prototype.isInStrokeOrPath = function (x, y, isStroke, isFill, lineWidth) {\n    if (!isStroke || !lineWidth) {\n      return false;\n    }\n    var _a = this.attr(),\n      x1 = _a.x1,\n      y1 = _a.y1,\n      x2 = _a.x2,\n      y2 = _a.y2;\n    return inLine(x1, y1, x2, y2, lineWidth, x, y);\n  };\n  Line.prototype.createPath = function (context) {\n    var attrs = this.attr();\n    var x1 = attrs.x1,\n      y1 = attrs.y1,\n      x2 = attrs.x2,\n      y2 = attrs.y2,\n      startArrow = attrs.startArrow,\n      endArrow = attrs.endArrow;\n    var startArrowDistance = {\n      dx: 0,\n      dy: 0\n    };\n    var endArrowDistance = {\n      dx: 0,\n      dy: 0\n    };\n    if (startArrow && startArrow.d) {\n      startArrowDistance = ArrowUtil.getShortenOffset(x1, y1, x2, y2, attrs.startArrow.d);\n    }\n    if (endArrow && endArrow.d) {\n      endArrowDistance = ArrowUtil.getShortenOffset(x1, y1, x2, y2, attrs.endArrow.d);\n    }\n    context.beginPath();\n    // 如果自定义箭头，线条相应缩进\n    context.moveTo(x1 + startArrowDistance.dx, y1 + startArrowDistance.dy);\n    context.lineTo(x2 - endArrowDistance.dx, y2 - endArrowDistance.dy);\n  };\n  Line.prototype.afterDrawPath = function (context) {\n    var startArrowShape = this.get('startArrowShape');\n    var endArrowShape = this.get('endArrowShape');\n    if (startArrowShape) {\n      startArrowShape.draw(context);\n    }\n    if (endArrowShape) {\n      endArrowShape.draw(context);\n    }\n  };\n  /**\n   * Get length of line\n   * @return {number} length\n   */\n  Line.prototype.getTotalLength = function () {\n    var _a = this.attr(),\n      x1 = _a.x1,\n      y1 = _a.y1,\n      x2 = _a.x2,\n      y2 = _a.y2;\n    return LineUtil.length(x1, y1, x2, y2);\n  };\n  /**\n   * Get point according to ratio\n   * @param {number} ratio\n   * @return {Point} point\n   */\n  Line.prototype.getPoint = function (ratio) {\n    var _a = this.attr(),\n      x1 = _a.x1,\n      y1 = _a.y1,\n      x2 = _a.x2,\n      y2 = _a.y2;\n    return LineUtil.pointAt(x1, y1, x2, y2, ratio);\n  };\n  return Line;\n}(ShapeBase);\nexport default Line;","map":{"version":3,"names":["__assign","__extends","Line","LineUtil","ShapeBase","inLine","ArrowUtil","_super","apply","arguments","prototype","getDefaultAttrs","attrs","call","x1","y1","x2","y2","startArrow","endArrow","initAttrs","setArrow","onAttrChange","name","value","originValue","attr","addStartArrow","addEndArrow","isInStrokeOrPath","x","y","isStroke","isFill","lineWidth","_a","createPath","context","startArrowDistance","dx","dy","endArrowDistance","d","getShortenOffset","beginPath","moveTo","lineTo","afterDrawPath","startArrowShape","get","endArrowShape","draw","getTotalLength","length","getPoint","ratio","pointAt"],"sources":["/Users/obiechina/Documents/ridy-flutter-full-taxi-solution 2/node_modules/@antv/g-canvas/esm/shape/line.js"],"sourcesContent":["import { __assign, __extends } from \"tslib\";\n/**\n * @fileoverview 线\n * @author dxq613@gmail.com\n */\nimport { Line as LineUtil } from '@antv/g-math';\nimport ShapeBase from './base';\nimport inLine from '../util/in-stroke/line';\nimport * as ArrowUtil from '../util/arrow';\nvar Line = /** @class */ (function (_super) {\n    __extends(Line, _super);\n    function Line() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Line.prototype.getDefaultAttrs = function () {\n        var attrs = _super.prototype.getDefaultAttrs.call(this);\n        return __assign(__assign({}, attrs), { x1: 0, y1: 0, x2: 0, y2: 0, startArrow: false, endArrow: false });\n    };\n    Line.prototype.initAttrs = function (attrs) {\n        this.setArrow();\n    };\n    // 更新属性时，检测是否更改了箭头\n    Line.prototype.onAttrChange = function (name, value, originValue) {\n        _super.prototype.onAttrChange.call(this, name, value, originValue);\n        // 由于箭头的绘制依赖于 line 的诸多 attrs，因此这里不再对每个 attr 进行判断，attr 每次变化都会影响箭头的更新\n        this.setArrow();\n    };\n    Line.prototype.setArrow = function () {\n        var attrs = this.attr();\n        var x1 = attrs.x1, y1 = attrs.y1, x2 = attrs.x2, y2 = attrs.y2, startArrow = attrs.startArrow, endArrow = attrs.endArrow;\n        if (startArrow) {\n            ArrowUtil.addStartArrow(this, attrs, x2, y2, x1, y1);\n        }\n        if (endArrow) {\n            ArrowUtil.addEndArrow(this, attrs, x1, y1, x2, y2);\n        }\n    };\n    Line.prototype.isInStrokeOrPath = function (x, y, isStroke, isFill, lineWidth) {\n        if (!isStroke || !lineWidth) {\n            return false;\n        }\n        var _a = this.attr(), x1 = _a.x1, y1 = _a.y1, x2 = _a.x2, y2 = _a.y2;\n        return inLine(x1, y1, x2, y2, lineWidth, x, y);\n    };\n    Line.prototype.createPath = function (context) {\n        var attrs = this.attr();\n        var x1 = attrs.x1, y1 = attrs.y1, x2 = attrs.x2, y2 = attrs.y2, startArrow = attrs.startArrow, endArrow = attrs.endArrow;\n        var startArrowDistance = {\n            dx: 0,\n            dy: 0,\n        };\n        var endArrowDistance = {\n            dx: 0,\n            dy: 0,\n        };\n        if (startArrow && startArrow.d) {\n            startArrowDistance = ArrowUtil.getShortenOffset(x1, y1, x2, y2, attrs.startArrow.d);\n        }\n        if (endArrow && endArrow.d) {\n            endArrowDistance = ArrowUtil.getShortenOffset(x1, y1, x2, y2, attrs.endArrow.d);\n        }\n        context.beginPath();\n        // 如果自定义箭头，线条相应缩进\n        context.moveTo(x1 + startArrowDistance.dx, y1 + startArrowDistance.dy);\n        context.lineTo(x2 - endArrowDistance.dx, y2 - endArrowDistance.dy);\n    };\n    Line.prototype.afterDrawPath = function (context) {\n        var startArrowShape = this.get('startArrowShape');\n        var endArrowShape = this.get('endArrowShape');\n        if (startArrowShape) {\n            startArrowShape.draw(context);\n        }\n        if (endArrowShape) {\n            endArrowShape.draw(context);\n        }\n    };\n    /**\n     * Get length of line\n     * @return {number} length\n     */\n    Line.prototype.getTotalLength = function () {\n        var _a = this.attr(), x1 = _a.x1, y1 = _a.y1, x2 = _a.x2, y2 = _a.y2;\n        return LineUtil.length(x1, y1, x2, y2);\n    };\n    /**\n     * Get point according to ratio\n     * @param {number} ratio\n     * @return {Point} point\n     */\n    Line.prototype.getPoint = function (ratio) {\n        var _a = this.attr(), x1 = _a.x1, y1 = _a.y1, x2 = _a.x2, y2 = _a.y2;\n        return LineUtil.pointAt(x1, y1, x2, y2, ratio);\n    };\n    return Line;\n}(ShapeBase));\nexport default Line;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}