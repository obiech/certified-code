{"ast":null,"code":"import { mod, toRadian, isSamePoint } from './util';\n// 向量长度\nfunction vMag(v) {\n  return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n}\n// u.v/|u||v|，计算夹角的余弦值\nfunction vRatio(u, v) {\n  // 当存在一个向量的长度为 0 时，夹角也为 0，即夹角的余弦值为 1\n  return vMag(u) * vMag(v) ? (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v)) : 1;\n}\n// 向量角度\nfunction vAngle(u, v) {\n  return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vRatio(u, v));\n}\n// A 0:rx 1:ry 2:x-axis-rotation 3:large-arc-flag 4:sweep-flag 5: x 6: y\nexport default function getArcParams(startPoint, params) {\n  var rx = params[1];\n  var ry = params[2];\n  var xRotation = mod(toRadian(params[3]), Math.PI * 2);\n  var arcFlag = params[4];\n  var sweepFlag = params[5];\n  // 弧形起点坐标\n  var x1 = startPoint[0];\n  var y1 = startPoint[1];\n  // 弧形终点坐标\n  var x2 = params[6];\n  var y2 = params[7];\n  var xp = Math.cos(xRotation) * (x1 - x2) / 2.0 + Math.sin(xRotation) * (y1 - y2) / 2.0;\n  var yp = -1 * Math.sin(xRotation) * (x1 - x2) / 2.0 + Math.cos(xRotation) * (y1 - y2) / 2.0;\n  var lambda = xp * xp / (rx * rx) + yp * yp / (ry * ry);\n  if (lambda > 1) {\n    rx *= Math.sqrt(lambda);\n    ry *= Math.sqrt(lambda);\n  }\n  var diff = rx * rx * (yp * yp) + ry * ry * (xp * xp);\n  var f = diff ? Math.sqrt((rx * rx * (ry * ry) - diff) / diff) : 1;\n  if (arcFlag === sweepFlag) {\n    f *= -1;\n  }\n  if (isNaN(f)) {\n    f = 0;\n  }\n  // 旋转前的起点坐标，且当长半轴和短半轴的长度为 0 时，坐标按 (0, 0) 处理\n  var cxp = ry ? f * rx * yp / ry : 0;\n  var cyp = rx ? f * -ry * xp / rx : 0;\n  // 椭圆圆心坐标\n  var cx = (x1 + x2) / 2.0 + Math.cos(xRotation) * cxp - Math.sin(xRotation) * cyp;\n  var cy = (y1 + y2) / 2.0 + Math.sin(xRotation) * cxp + Math.cos(xRotation) * cyp;\n  // 起始点的单位向量\n  var u = [(xp - cxp) / rx, (yp - cyp) / ry];\n  // 终止点的单位向量\n  var v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];\n  // 计算起始点和圆心的连线，与 x 轴正方向的夹角\n  var theta = vAngle([1, 0], u);\n  // 计算圆弧起始点和终止点与椭圆圆心连线的夹角\n  var dTheta = vAngle(u, v);\n  if (vRatio(u, v) <= -1) {\n    dTheta = Math.PI;\n  }\n  if (vRatio(u, v) >= 1) {\n    dTheta = 0;\n  }\n  if (sweepFlag === 0 && dTheta > 0) {\n    dTheta = dTheta - 2 * Math.PI;\n  }\n  if (sweepFlag === 1 && dTheta < 0) {\n    dTheta = dTheta + 2 * Math.PI;\n  }\n  return {\n    cx: cx,\n    cy: cy,\n    // 弧形的起点和终点相同时，长轴和短轴的长度按 0 处理\n    rx: isSamePoint(startPoint, [x2, y2]) ? 0 : rx,\n    ry: isSamePoint(startPoint, [x2, y2]) ? 0 : ry,\n    startAngle: theta,\n    endAngle: theta + dTheta,\n    xRotation: xRotation,\n    arcFlag: arcFlag,\n    sweepFlag: sweepFlag\n  };\n}","map":{"version":3,"names":["mod","toRadian","isSamePoint","vMag","v","Math","sqrt","vRatio","u","vAngle","acos","getArcParams","startPoint","params","rx","ry","xRotation","PI","arcFlag","sweepFlag","x1","y1","x2","y2","xp","cos","sin","yp","lambda","diff","f","isNaN","cxp","cyp","cx","cy","theta","dTheta","startAngle","endAngle"],"sources":["/Users/obiechina/Documents/ridy-flutter-full-taxi-solution 2/node_modules/@antv/g-canvas/esm/util/arc-params.js"],"sourcesContent":["import { mod, toRadian, isSamePoint } from './util';\n// 向量长度\nfunction vMag(v) {\n    return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n}\n// u.v/|u||v|，计算夹角的余弦值\nfunction vRatio(u, v) {\n    // 当存在一个向量的长度为 0 时，夹角也为 0，即夹角的余弦值为 1\n    return vMag(u) * vMag(v) ? (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v)) : 1;\n}\n// 向量角度\nfunction vAngle(u, v) {\n    return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vRatio(u, v));\n}\n// A 0:rx 1:ry 2:x-axis-rotation 3:large-arc-flag 4:sweep-flag 5: x 6: y\nexport default function getArcParams(startPoint, params) {\n    var rx = params[1];\n    var ry = params[2];\n    var xRotation = mod(toRadian(params[3]), Math.PI * 2);\n    var arcFlag = params[4];\n    var sweepFlag = params[5];\n    // 弧形起点坐标\n    var x1 = startPoint[0];\n    var y1 = startPoint[1];\n    // 弧形终点坐标\n    var x2 = params[6];\n    var y2 = params[7];\n    var xp = (Math.cos(xRotation) * (x1 - x2)) / 2.0 + (Math.sin(xRotation) * (y1 - y2)) / 2.0;\n    var yp = (-1 * Math.sin(xRotation) * (x1 - x2)) / 2.0 + (Math.cos(xRotation) * (y1 - y2)) / 2.0;\n    var lambda = (xp * xp) / (rx * rx) + (yp * yp) / (ry * ry);\n    if (lambda > 1) {\n        rx *= Math.sqrt(lambda);\n        ry *= Math.sqrt(lambda);\n    }\n    var diff = rx * rx * (yp * yp) + ry * ry * (xp * xp);\n    var f = diff ? Math.sqrt((rx * rx * (ry * ry) - diff) / diff) : 1;\n    if (arcFlag === sweepFlag) {\n        f *= -1;\n    }\n    if (isNaN(f)) {\n        f = 0;\n    }\n    // 旋转前的起点坐标，且当长半轴和短半轴的长度为 0 时，坐标按 (0, 0) 处理\n    var cxp = ry ? (f * rx * yp) / ry : 0;\n    var cyp = rx ? (f * -ry * xp) / rx : 0;\n    // 椭圆圆心坐标\n    var cx = (x1 + x2) / 2.0 + Math.cos(xRotation) * cxp - Math.sin(xRotation) * cyp;\n    var cy = (y1 + y2) / 2.0 + Math.sin(xRotation) * cxp + Math.cos(xRotation) * cyp;\n    // 起始点的单位向量\n    var u = [(xp - cxp) / rx, (yp - cyp) / ry];\n    // 终止点的单位向量\n    var v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];\n    // 计算起始点和圆心的连线，与 x 轴正方向的夹角\n    var theta = vAngle([1, 0], u);\n    // 计算圆弧起始点和终止点与椭圆圆心连线的夹角\n    var dTheta = vAngle(u, v);\n    if (vRatio(u, v) <= -1) {\n        dTheta = Math.PI;\n    }\n    if (vRatio(u, v) >= 1) {\n        dTheta = 0;\n    }\n    if (sweepFlag === 0 && dTheta > 0) {\n        dTheta = dTheta - 2 * Math.PI;\n    }\n    if (sweepFlag === 1 && dTheta < 0) {\n        dTheta = dTheta + 2 * Math.PI;\n    }\n    return {\n        cx: cx,\n        cy: cy,\n        // 弧形的起点和终点相同时，长轴和短轴的长度按 0 处理\n        rx: isSamePoint(startPoint, [x2, y2]) ? 0 : rx,\n        ry: isSamePoint(startPoint, [x2, y2]) ? 0 : ry,\n        startAngle: theta,\n        endAngle: theta + dTheta,\n        xRotation: xRotation,\n        arcFlag: arcFlag,\n        sweepFlag: sweepFlag,\n    };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}