{"ast":null,"code":"/**\n * @fileoverview image\n * @author dengfuping_develop@163.com\n */\nimport { __assign, __extends } from \"tslib\";\nimport { each, isString } from '@antv/util';\nimport { SVG_ATTR_MAP } from '../constant';\nimport ShapeBase from './base';\nvar Image = /** @class */function (_super) {\n  __extends(Image, _super);\n  function Image() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = 'image';\n    _this.canFill = false;\n    _this.canStroke = false;\n    return _this;\n  }\n  Image.prototype.getDefaultAttrs = function () {\n    var attrs = _super.prototype.getDefaultAttrs.call(this);\n    return __assign(__assign({}, attrs), {\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0\n    });\n  };\n  Image.prototype.createPath = function (context, targetAttrs) {\n    var _this = this;\n    var attrs = this.attr();\n    var el = this.get('el');\n    each(targetAttrs || attrs, function (value, attr) {\n      if (attr === 'img') {\n        _this._setImage(attrs.img);\n      } else if (SVG_ATTR_MAP[attr]) {\n        el.setAttribute(SVG_ATTR_MAP[attr], value);\n      }\n    });\n  };\n  Image.prototype.setAttr = function (name, value) {\n    this.attrs[name] = value;\n    if (name === 'img') {\n      this._setImage(value);\n    }\n  };\n  Image.prototype._setImage = function (img) {\n    var attrs = this.attr();\n    var el = this.get('el');\n    if (isString(img)) {\n      el.setAttribute('href', img);\n    } else if (img instanceof window.Image) {\n      if (!attrs.width) {\n        el.setAttribute('width', img.width);\n        this.attr('width', img.width);\n      }\n      if (!attrs.height) {\n        el.setAttribute('height', img.height);\n        this.attr('height', img.height);\n      }\n      el.setAttribute('href', img.src);\n    } else if (img instanceof HTMLElement && isString(img.nodeName) && img.nodeName.toUpperCase() === 'CANVAS') {\n      // @ts-ignore\n      el.setAttribute('href', img.toDataURL());\n    } else if (img instanceof ImageData) {\n      var canvas = document.createElement('canvas');\n      canvas.setAttribute('width', \"\" + img.width);\n      canvas.setAttribute('height', \"\" + img.height);\n      canvas.getContext('2d').putImageData(img, 0, 0);\n      if (!attrs.width) {\n        el.setAttribute('width', \"\" + img.width);\n        this.attr('width', img.width);\n      }\n      if (!attrs.height) {\n        el.setAttribute('height', \"\" + img.height);\n        this.attr('height', img.height);\n      }\n      el.setAttribute('href', canvas.toDataURL());\n    }\n  };\n  return Image;\n}(ShapeBase);\nexport default Image;","map":{"version":3,"names":["__assign","__extends","each","isString","SVG_ATTR_MAP","ShapeBase","Image","_super","_this","apply","arguments","type","canFill","canStroke","prototype","getDefaultAttrs","attrs","call","x","y","width","height","createPath","context","targetAttrs","attr","el","get","value","_setImage","img","setAttribute","setAttr","name","window","src","HTMLElement","nodeName","toUpperCase","toDataURL","ImageData","canvas","document","createElement","getContext","putImageData"],"sources":["/Users/obiechina/Documents/ridy-flutter-full-taxi-solution 2/node_modules/@antv/g-svg/esm/shape/image.js"],"sourcesContent":["/**\n * @fileoverview image\n * @author dengfuping_develop@163.com\n */\nimport { __assign, __extends } from \"tslib\";\nimport { each, isString } from '@antv/util';\nimport { SVG_ATTR_MAP } from '../constant';\nimport ShapeBase from './base';\nvar Image = /** @class */ (function (_super) {\n    __extends(Image, _super);\n    function Image() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'image';\n        _this.canFill = false;\n        _this.canStroke = false;\n        return _this;\n    }\n    Image.prototype.getDefaultAttrs = function () {\n        var attrs = _super.prototype.getDefaultAttrs.call(this);\n        return __assign(__assign({}, attrs), { x: 0, y: 0, width: 0, height: 0 });\n    };\n    Image.prototype.createPath = function (context, targetAttrs) {\n        var _this = this;\n        var attrs = this.attr();\n        var el = this.get('el');\n        each(targetAttrs || attrs, function (value, attr) {\n            if (attr === 'img') {\n                _this._setImage(attrs.img);\n            }\n            else if (SVG_ATTR_MAP[attr]) {\n                el.setAttribute(SVG_ATTR_MAP[attr], value);\n            }\n        });\n    };\n    Image.prototype.setAttr = function (name, value) {\n        this.attrs[name] = value;\n        if (name === 'img') {\n            this._setImage(value);\n        }\n    };\n    Image.prototype._setImage = function (img) {\n        var attrs = this.attr();\n        var el = this.get('el');\n        if (isString(img)) {\n            el.setAttribute('href', img);\n        }\n        else if (img instanceof window.Image) {\n            if (!attrs.width) {\n                el.setAttribute('width', img.width);\n                this.attr('width', img.width);\n            }\n            if (!attrs.height) {\n                el.setAttribute('height', img.height);\n                this.attr('height', img.height);\n            }\n            el.setAttribute('href', img.src);\n        }\n        else if (img instanceof HTMLElement && isString(img.nodeName) && img.nodeName.toUpperCase() === 'CANVAS') {\n            // @ts-ignore\n            el.setAttribute('href', img.toDataURL());\n        }\n        else if (img instanceof ImageData) {\n            var canvas = document.createElement('canvas');\n            canvas.setAttribute('width', \"\" + img.width);\n            canvas.setAttribute('height', \"\" + img.height);\n            canvas.getContext('2d').putImageData(img, 0, 0);\n            if (!attrs.width) {\n                el.setAttribute('width', \"\" + img.width);\n                this.attr('width', img.width);\n            }\n            if (!attrs.height) {\n                el.setAttribute('height', \"\" + img.height);\n                this.attr('height', img.height);\n            }\n            el.setAttribute('href', canvas.toDataURL());\n        }\n    };\n    return Image;\n}(ShapeBase));\nexport default Image;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,IAAI,EAAEC,QAAQ,QAAQ,YAAY;AAC3C,SAASC,YAAY,QAAQ,aAAa;AAC1C,OAAOC,SAAS,MAAM,QAAQ;AAC9B,IAAIC,KAAK,GAAG,aAAe,UAAUC,MAAM,EAAE;EACzCN,SAAS,CAACK,KAAK,EAAEC,MAAM,CAAC;EACxB,SAASD,KAAKA,CAAA,EAAG;IACb,IAAIE,KAAK,GAAGD,MAAM,KAAK,IAAI,IAAIA,MAAM,CAACE,KAAK,CAAC,IAAI,EAAEC,SAAS,CAAC,IAAI,IAAI;IACpEF,KAAK,CAACG,IAAI,GAAG,OAAO;IACpBH,KAAK,CAACI,OAAO,GAAG,KAAK;IACrBJ,KAAK,CAACK,SAAS,GAAG,KAAK;IACvB,OAAOL,KAAK;EAChB;EACAF,KAAK,CAACQ,SAAS,CAACC,eAAe,GAAG,YAAY;IAC1C,IAAIC,KAAK,GAAGT,MAAM,CAACO,SAAS,CAACC,eAAe,CAACE,IAAI,CAAC,IAAI,CAAC;IACvD,OAAOjB,QAAQ,CAACA,QAAQ,CAAC,CAAC,CAAC,EAAEgB,KAAK,CAAC,EAAE;MAAEE,CAAC,EAAE,CAAC;MAAEC,CAAC,EAAE,CAAC;MAAEC,KAAK,EAAE,CAAC;MAAEC,MAAM,EAAE;IAAE,CAAC,CAAC;EAC7E,CAAC;EACDf,KAAK,CAACQ,SAAS,CAACQ,UAAU,GAAG,UAAUC,OAAO,EAAEC,WAAW,EAAE;IACzD,IAAIhB,KAAK,GAAG,IAAI;IAChB,IAAIQ,KAAK,GAAG,IAAI,CAACS,IAAI,CAAC,CAAC;IACvB,IAAIC,EAAE,GAAG,IAAI,CAACC,GAAG,CAAC,IAAI,CAAC;IACvBzB,IAAI,CAACsB,WAAW,IAAIR,KAAK,EAAE,UAAUY,KAAK,EAAEH,IAAI,EAAE;MAC9C,IAAIA,IAAI,KAAK,KAAK,EAAE;QAChBjB,KAAK,CAACqB,SAAS,CAACb,KAAK,CAACc,GAAG,CAAC;MAC9B,CAAC,MACI,IAAI1B,YAAY,CAACqB,IAAI,CAAC,EAAE;QACzBC,EAAE,CAACK,YAAY,CAAC3B,YAAY,CAACqB,IAAI,CAAC,EAAEG,KAAK,CAAC;MAC9C;IACJ,CAAC,CAAC;EACN,CAAC;EACDtB,KAAK,CAACQ,SAAS,CAACkB,OAAO,GAAG,UAAUC,IAAI,EAAEL,KAAK,EAAE;IAC7C,IAAI,CAACZ,KAAK,CAACiB,IAAI,CAAC,GAAGL,KAAK;IACxB,IAAIK,IAAI,KAAK,KAAK,EAAE;MAChB,IAAI,CAACJ,SAAS,CAACD,KAAK,CAAC;IACzB;EACJ,CAAC;EACDtB,KAAK,CAACQ,SAAS,CAACe,SAAS,GAAG,UAAUC,GAAG,EAAE;IACvC,IAAId,KAAK,GAAG,IAAI,CAACS,IAAI,CAAC,CAAC;IACvB,IAAIC,EAAE,GAAG,IAAI,CAACC,GAAG,CAAC,IAAI,CAAC;IACvB,IAAIxB,QAAQ,CAAC2B,GAAG,CAAC,EAAE;MACfJ,EAAE,CAACK,YAAY,CAAC,MAAM,EAAED,GAAG,CAAC;IAChC,CAAC,MACI,IAAIA,GAAG,YAAYI,MAAM,CAAC5B,KAAK,EAAE;MAClC,IAAI,CAACU,KAAK,CAACI,KAAK,EAAE;QACdM,EAAE,CAACK,YAAY,CAAC,OAAO,EAAED,GAAG,CAACV,KAAK,CAAC;QACnC,IAAI,CAACK,IAAI,CAAC,OAAO,EAAEK,GAAG,CAACV,KAAK,CAAC;MACjC;MACA,IAAI,CAACJ,KAAK,CAACK,MAAM,EAAE;QACfK,EAAE,CAACK,YAAY,CAAC,QAAQ,EAAED,GAAG,CAACT,MAAM,CAAC;QACrC,IAAI,CAACI,IAAI,CAAC,QAAQ,EAAEK,GAAG,CAACT,MAAM,CAAC;MACnC;MACAK,EAAE,CAACK,YAAY,CAAC,MAAM,EAAED,GAAG,CAACK,GAAG,CAAC;IACpC,CAAC,MACI,IAAIL,GAAG,YAAYM,WAAW,IAAIjC,QAAQ,CAAC2B,GAAG,CAACO,QAAQ,CAAC,IAAIP,GAAG,CAACO,QAAQ,CAACC,WAAW,CAAC,CAAC,KAAK,QAAQ,EAAE;MACtG;MACAZ,EAAE,CAACK,YAAY,CAAC,MAAM,EAAED,GAAG,CAACS,SAAS,CAAC,CAAC,CAAC;IAC5C,CAAC,MACI,IAAIT,GAAG,YAAYU,SAAS,EAAE;MAC/B,IAAIC,MAAM,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;MAC7CF,MAAM,CAACV,YAAY,CAAC,OAAO,EAAE,EAAE,GAAGD,GAAG,CAACV,KAAK,CAAC;MAC5CqB,MAAM,CAACV,YAAY,CAAC,QAAQ,EAAE,EAAE,GAAGD,GAAG,CAACT,MAAM,CAAC;MAC9CoB,MAAM,CAACG,UAAU,CAAC,IAAI,CAAC,CAACC,YAAY,CAACf,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;MAC/C,IAAI,CAACd,KAAK,CAACI,KAAK,EAAE;QACdM,EAAE,CAACK,YAAY,CAAC,OAAO,EAAE,EAAE,GAAGD,GAAG,CAACV,KAAK,CAAC;QACxC,IAAI,CAACK,IAAI,CAAC,OAAO,EAAEK,GAAG,CAACV,KAAK,CAAC;MACjC;MACA,IAAI,CAACJ,KAAK,CAACK,MAAM,EAAE;QACfK,EAAE,CAACK,YAAY,CAAC,QAAQ,EAAE,EAAE,GAAGD,GAAG,CAACT,MAAM,CAAC;QAC1C,IAAI,CAACI,IAAI,CAAC,QAAQ,EAAEK,GAAG,CAACT,MAAM,CAAC;MACnC;MACAK,EAAE,CAACK,YAAY,CAAC,MAAM,EAAEU,MAAM,CAACF,SAAS,CAAC,CAAC,CAAC;IAC/C;EACJ,CAAC;EACD,OAAOjC,KAAK;AAChB,CAAC,CAACD,SAAS,CAAE;AACb,eAAeC,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}