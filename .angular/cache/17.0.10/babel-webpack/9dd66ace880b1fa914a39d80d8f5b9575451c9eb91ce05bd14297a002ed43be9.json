{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport { deepMix, each } from '@antv/util';\nimport Action from '../base';\n/**\n * @ignore\n * 辅助框 Action 的基类\n */\nvar MaskBase = /** @class */function (_super) {\n  __extends(MaskBase, _super);\n  function MaskBase() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    // mask 图形\n    _this.maskShape = null;\n    // 组成 mask 的各个点\n    _this.points = [];\n    // 开始 mask 的标记\n    _this.starting = false;\n    // 开始移动的标记\n    _this.moving = false;\n    _this.preMovePoint = null;\n    _this.shapeType = 'path';\n    return _this;\n  }\n  // 获取当前的位置\n  MaskBase.prototype.getCurrentPoint = function () {\n    var event = this.context.event;\n    return {\n      x: event.x,\n      y: event.y\n    };\n  };\n  // 触发 mask 的事件\n  MaskBase.prototype.emitEvent = function (type) {\n    var eventName = \"mask:\".concat(type);\n    var view = this.context.view;\n    var event = this.context.event;\n    view.emit(eventName, {\n      target: this.maskShape,\n      shape: this.maskShape,\n      points: this.points,\n      x: event.x,\n      y: event.y\n    });\n  };\n  // 创建 mask\n  MaskBase.prototype.createMask = function () {\n    var view = this.context.view;\n    var maskAttrs = this.getMaskAttrs();\n    var maskShape = view.foregroundGroup.addShape({\n      type: this.shapeType,\n      name: 'mask',\n      draggable: true,\n      attrs: __assign({\n        fill: '#C5D4EB',\n        opacity: 0.3\n      }, maskAttrs)\n    });\n    return maskShape;\n  };\n  // 生成 mask 的路径\n  MaskBase.prototype.getMaskPath = function () {\n    return [];\n  };\n  /**\n   * 显示\n   */\n  MaskBase.prototype.show = function () {\n    if (this.maskShape) {\n      this.maskShape.show();\n      this.emitEvent('show');\n    }\n  };\n  /**\n   * 开始\n   */\n  MaskBase.prototype.start = function (arg) {\n    this.starting = true;\n    // 开始时，保证移动结束\n    this.moving = false;\n    this.points = [this.getCurrentPoint()];\n    if (!this.maskShape) {\n      this.maskShape = this.createMask();\n      // 开始时设置 capture: false，可以避免创建、resize 时触发事件\n      this.maskShape.set('capture', false);\n    }\n    this.updateMask(arg === null || arg === void 0 ? void 0 : arg.maskStyle);\n    this.emitEvent('start');\n  };\n  /**\n   * 开始移动\n   */\n  MaskBase.prototype.moveStart = function () {\n    this.moving = true;\n    this.preMovePoint = this.getCurrentPoint();\n  };\n  /**\n   * 移动 mask\n   */\n  MaskBase.prototype.move = function () {\n    if (!this.moving || !this.maskShape) {\n      return;\n    }\n    var currentPoint = this.getCurrentPoint();\n    var preMovePoint = this.preMovePoint;\n    var dx = currentPoint.x - preMovePoint.x;\n    var dy = currentPoint.y - preMovePoint.y;\n    var points = this.points;\n    each(points, function (point) {\n      point.x += dx;\n      point.y += dy;\n    });\n    this.updateMask();\n    this.emitEvent('change');\n    this.preMovePoint = currentPoint;\n  };\n  MaskBase.prototype.updateMask = function (maskStyle) {\n    var attrs = deepMix({}, this.getMaskAttrs(), maskStyle);\n    this.maskShape.attr(attrs);\n  };\n  /**\n   * 结束移动\n   */\n  MaskBase.prototype.moveEnd = function () {\n    this.moving = false;\n    this.preMovePoint = null;\n  };\n  /**\n   * 结束\n   */\n  MaskBase.prototype.end = function () {\n    this.starting = false;\n    this.emitEvent('end');\n    if (this.maskShape) {\n      this.maskShape.set('capture', true);\n    }\n  };\n  /**\n   * 隐藏\n   */\n  MaskBase.prototype.hide = function () {\n    if (this.maskShape) {\n      this.maskShape.hide();\n      this.emitEvent('hide');\n    }\n  };\n  /**\n   * 大小变化\n   */\n  MaskBase.prototype.resize = function () {\n    // 只有进行中，才会允许大小变化\n    if (this.starting && this.maskShape) {\n      this.points.push(this.getCurrentPoint());\n      this.updateMask();\n      this.emitEvent('change');\n    }\n  };\n  /**\n   * 销毁\n   */\n  MaskBase.prototype.destroy = function () {\n    this.points = [];\n    if (this.maskShape) {\n      this.maskShape.remove();\n    }\n    this.maskShape = null;\n    this.preMovePoint = null;\n    _super.prototype.destroy.call(this);\n  };\n  return MaskBase;\n}(Action);\nexport default MaskBase;","map":{"version":3,"names":["__assign","__extends","deepMix","each","Action","MaskBase","_super","_this","apply","arguments","maskShape","points","starting","moving","preMovePoint","shapeType","prototype","getCurrentPoint","event","context","x","y","emitEvent","type","eventName","concat","view","emit","target","shape","createMask","maskAttrs","getMaskAttrs","foregroundGroup","addShape","name","draggable","attrs","fill","opacity","getMaskPath","show","start","arg","set","updateMask","maskStyle","moveStart","move","currentPoint","dx","dy","point","attr","moveEnd","end","hide","resize","push","destroy","remove","call"],"sources":["/Users/obiechina/Documents/ridy-flutter-full-taxi-solution 2/node_modules/@antv/g2/esm/interaction/action/mask/base.js"],"sourcesContent":["import { __assign, __extends } from \"tslib\";\nimport { deepMix, each } from '@antv/util';\nimport Action from '../base';\n/**\n * @ignore\n * 辅助框 Action 的基类\n */\nvar MaskBase = /** @class */ (function (_super) {\n    __extends(MaskBase, _super);\n    function MaskBase() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        // mask 图形\n        _this.maskShape = null;\n        // 组成 mask 的各个点\n        _this.points = [];\n        // 开始 mask 的标记\n        _this.starting = false;\n        // 开始移动的标记\n        _this.moving = false;\n        _this.preMovePoint = null;\n        _this.shapeType = 'path';\n        return _this;\n    }\n    // 获取当前的位置\n    MaskBase.prototype.getCurrentPoint = function () {\n        var event = this.context.event;\n        return {\n            x: event.x,\n            y: event.y,\n        };\n    };\n    // 触发 mask 的事件\n    MaskBase.prototype.emitEvent = function (type) {\n        var eventName = \"mask:\".concat(type);\n        var view = this.context.view;\n        var event = this.context.event;\n        view.emit(eventName, {\n            target: this.maskShape,\n            shape: this.maskShape,\n            points: this.points,\n            x: event.x,\n            y: event.y,\n        });\n    };\n    // 创建 mask\n    MaskBase.prototype.createMask = function () {\n        var view = this.context.view;\n        var maskAttrs = this.getMaskAttrs();\n        var maskShape = view.foregroundGroup.addShape({\n            type: this.shapeType,\n            name: 'mask',\n            draggable: true,\n            attrs: __assign({ fill: '#C5D4EB', opacity: 0.3 }, maskAttrs),\n        });\n        return maskShape;\n    };\n    // 生成 mask 的路径\n    MaskBase.prototype.getMaskPath = function () {\n        return [];\n    };\n    /**\n     * 显示\n     */\n    MaskBase.prototype.show = function () {\n        if (this.maskShape) {\n            this.maskShape.show();\n            this.emitEvent('show');\n        }\n    };\n    /**\n     * 开始\n     */\n    MaskBase.prototype.start = function (arg) {\n        this.starting = true;\n        // 开始时，保证移动结束\n        this.moving = false;\n        this.points = [this.getCurrentPoint()];\n        if (!this.maskShape) {\n            this.maskShape = this.createMask();\n            // 开始时设置 capture: false，可以避免创建、resize 时触发事件\n            this.maskShape.set('capture', false);\n        }\n        this.updateMask(arg === null || arg === void 0 ? void 0 : arg.maskStyle);\n        this.emitEvent('start');\n    };\n    /**\n     * 开始移动\n     */\n    MaskBase.prototype.moveStart = function () {\n        this.moving = true;\n        this.preMovePoint = this.getCurrentPoint();\n    };\n    /**\n     * 移动 mask\n     */\n    MaskBase.prototype.move = function () {\n        if (!this.moving || !this.maskShape) {\n            return;\n        }\n        var currentPoint = this.getCurrentPoint();\n        var preMovePoint = this.preMovePoint;\n        var dx = currentPoint.x - preMovePoint.x;\n        var dy = currentPoint.y - preMovePoint.y;\n        var points = this.points;\n        each(points, function (point) {\n            point.x += dx;\n            point.y += dy;\n        });\n        this.updateMask();\n        this.emitEvent('change');\n        this.preMovePoint = currentPoint;\n    };\n    MaskBase.prototype.updateMask = function (maskStyle) {\n        var attrs = deepMix({}, this.getMaskAttrs(), maskStyle);\n        this.maskShape.attr(attrs);\n    };\n    /**\n     * 结束移动\n     */\n    MaskBase.prototype.moveEnd = function () {\n        this.moving = false;\n        this.preMovePoint = null;\n    };\n    /**\n     * 结束\n     */\n    MaskBase.prototype.end = function () {\n        this.starting = false;\n        this.emitEvent('end');\n        if (this.maskShape) {\n            this.maskShape.set('capture', true);\n        }\n    };\n    /**\n     * 隐藏\n     */\n    MaskBase.prototype.hide = function () {\n        if (this.maskShape) {\n            this.maskShape.hide();\n            this.emitEvent('hide');\n        }\n    };\n    /**\n     * 大小变化\n     */\n    MaskBase.prototype.resize = function () {\n        // 只有进行中，才会允许大小变化\n        if (this.starting && this.maskShape) {\n            this.points.push(this.getCurrentPoint());\n            this.updateMask();\n            this.emitEvent('change');\n        }\n    };\n    /**\n     * 销毁\n     */\n    MaskBase.prototype.destroy = function () {\n        this.points = [];\n        if (this.maskShape) {\n            this.maskShape.remove();\n        }\n        this.maskShape = null;\n        this.preMovePoint = null;\n        _super.prototype.destroy.call(this);\n    };\n    return MaskBase;\n}(Action));\nexport default MaskBase;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}