{"ast":null,"code":"import _asyncToGenerator from \"/Users/obiechina/Documents/ridy-flutter-full-taxi-solution 2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { UntypedFormBuilder, Validators } from '@angular/forms';\nimport { ActivatedRoute } from '@angular/router';\nimport { CreateFleetTransactionGQL, ProviderDeductTransactionType, ProviderRechargeTransactionType } from '@ridy/admin-panel/generated/graphql';\nimport { RouterHelperService } from '@ridy/admin-panel/src/app/@services/router-helper.service';\nimport { TableService } from '@ridy/admin-panel/src/app/@services/table-service';\nimport { TagColorService } from '@ridy/admin-panel/src/app/@services/tag-color/tag-color.service';\nimport { NzMessageService } from 'ng-zorro-antd/message';\nimport { firstValueFrom, map } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@ridy/admin-panel/src/app/@services/tag-color/tag-color.service\";\nimport * as i3 from \"@ridy/admin-panel/src/app/@services/table-service\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"ng-zorro-antd/message\";\nimport * as i6 from \"@ridy/admin-panel/src/app/@services/router-helper.service\";\nimport * as i7 from \"@ridy/admin-panel/generated/graphql\";\nimport * as i8 from \"@angular/common\";\nimport * as i9 from \"ng-zorro-antd/table\";\nimport * as i10 from \"ng-zorro-antd/input\";\nimport * as i11 from \"ng-zorro-antd/button\";\nimport * as i12 from \"ng-zorro-antd/core/transition-patch\";\nimport * as i13 from \"ng-zorro-antd/core/wave\";\nimport * as i14 from \"ng-zorro-antd/grid\";\nimport * as i15 from \"ng-zorro-antd/form\";\nimport * as i16 from \"ng-zorro-antd/select\";\nimport * as i17 from \"ng-zorro-antd/card\";\nimport * as i18 from \"ng-zorro-antd/input-number\";\nimport * as i19 from \"ng-zorro-antd/tooltip\";\nimport * as i20 from \"@ngx-translate/core\";\nimport * as i21 from \"ngx-timeago\";\nfunction FleetViewFinancialsComponent_nz_table_1_tr_23_a_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 30);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const data_r9 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"routerLink\", \"/management/users/view/\" + data_r9.operatorId);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 2, \"table.viewOperator\"));\n  }\n}\nfunction FleetViewFinancialsComponent_nz_table_1_tr_23_a_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 30);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const data_r9 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"routerLink\", \"/requests/view/\" + data_r9.requestId);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 2, \"table.viewRequest\"));\n  }\n}\nfunction FleetViewFinancialsComponent_nz_table_1_tr_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 27);\n    i0.ɵɵpipe(2, \"date\");\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"timeago\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"translate\");\n    i0.ɵɵpipe(8, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\", 28);\n    i0.ɵɵtext(10);\n    i0.ɵɵpipe(11, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"td\", 24);\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"td\", 25);\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"td\");\n    i0.ɵɵtemplate(17, FleetViewFinancialsComponent_nz_table_1_tr_23_a_17_Template, 3, 4, \"a\", 29)(18, FleetViewFinancialsComponent_nz_table_1_tr_23_a_18_Template, 3, 4, \"a\", 29);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const data_r9 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"nz-tooltip\", i0.ɵɵpipeBind2(2, 10, data_r9.transactionTimestamp, \"short\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 13, data_r9.transactionTimestamp));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(data_r9.action === \"Deduct\" ? i0.ɵɵpipeBind1(7, 15, \"enum.transactionType.\" + data_r9.deductType) : i0.ɵɵpipeBind1(8, 17, \"enum.transactionType.\" + data_r9.rechargeType));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngClass\", data_r9.action === \"Recharge\" ? \"text-green-500\" : \"text-red-500\");\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate2(\"\", data_r9.action === \"Recharge\" ? \"+\" : \"\", \"\", i0.ɵɵpipeBind2(11, 19, data_r9.amount, data_r9.currency), \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(data_r9.refrenceNumber);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(data_r9.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", data_r9.operatorId !== null);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", data_r9.requestId !== null);\n  }\n}\nfunction FleetViewFinancialsComponent_nz_table_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"nz-table\", 20, 21);\n    i0.ɵɵlistener(\"nzQueryParams\", function FleetViewFinancialsComponent_nz_table_1_Template_nz_table_nzQueryParams_0_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.tableService.onTableQueryParamsChange);\n    });\n    i0.ɵɵelementStart(2, \"thead\")(3, \"tr\")(4, \"th\", 22);\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\", 23);\n    i0.ɵɵtext(8);\n    i0.ɵɵpipe(9, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\");\n    i0.ɵɵtext(11);\n    i0.ɵɵpipe(12, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"th\", 24);\n    i0.ɵɵtext(14);\n    i0.ɵɵpipe(15, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"th\", 25);\n    i0.ɵɵtext(17);\n    i0.ɵɵpipe(18, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"th\");\n    i0.ɵɵtext(20);\n    i0.ɵɵpipe(21, \"translate\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(22, \"tbody\");\n    i0.ɵɵtemplate(23, FleetViewFinancialsComponent_nz_table_1_tr_23_Template, 19, 22, \"tr\", 26);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const transactions_r6 = ctx.ngIf;\n    const _r7 = i0.ɵɵreference(1);\n    i0.ɵɵproperty(\"nzFrontPagination\", false)(\"nzData\", transactions_r6.nodes)(\"nzTotal\", transactions_r6.totalCount);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(6, 10, \"profile.dateTime\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(9, 12, \"profile.transactionType\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(12, 14, \"profile.amount\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(15, 16, \"profile.documentNumber\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(18, 18, \"profile.details\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(21, 20, \"profile.actions\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", _r7.data);\n  }\n}\nfunction FleetViewFinancialsComponent_nz_table_3_tr_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"currency\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const item_r19 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(3, 1, item_r19.balance, item_r19.currency));\n  }\n}\nfunction FleetViewFinancialsComponent_nz_table_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"nz-table\", 31, 32)(2, \"thead\")(3, \"tr\")(4, \"th\");\n    i0.ɵɵtext(5, \"Amount\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(6, \"tbody\");\n    i0.ɵɵtemplate(7, FleetViewFinancialsComponent_nz_table_3_tr_7_Template, 4, 4, \"tr\", 26);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const wallets_r16 = ctx.ngIf;\n    const _r17 = i0.ɵɵreference(1);\n    i0.ɵɵproperty(\"nzData\", wallets_r16)(\"nzTotal\", wallets_r16.length);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngForOf\", _r17.data);\n  }\n}\nfunction FleetViewFinancialsComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\");\n  }\n}\nfunction FleetViewFinancialsComponent_nz_form_item_17_nz_option_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"nz-option\", 34);\n    i0.ɵɵpipe(1, \"translate\");\n  }\n  if (rf & 2) {\n    const type_r21 = ctx.$implicit;\n    i0.ɵɵproperty(\"nzLabel\", i0.ɵɵpipeBind1(1, 2, \"enum.transactionType.\" + type_r21))(\"nzValue\", type_r21);\n  }\n}\nfunction FleetViewFinancialsComponent_nz_form_item_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"nz-form-item\")(1, \"nz-form-label\");\n    i0.ɵɵtext(2, \"Recharge Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"nz-form-control\")(4, \"nz-select\", 33);\n    i0.ɵɵtemplate(5, FleetViewFinancialsComponent_nz_form_item_17_nz_option_5_Template, 2, 4, \"nz-option\", 14);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.rechargeTypes);\n  }\n}\nfunction FleetViewFinancialsComponent_nz_form_item_18_nz_option_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"nz-option\", 34);\n    i0.ɵɵpipe(1, \"translate\");\n  }\n  if (rf & 2) {\n    const type_r23 = ctx.$implicit;\n    i0.ɵɵproperty(\"nzLabel\", i0.ɵɵpipeBind1(1, 2, \"enum.transactionType.\" + type_r23))(\"nzValue\", type_r23);\n  }\n}\nfunction FleetViewFinancialsComponent_nz_form_item_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"nz-form-item\")(1, \"nz-form-label\");\n    i0.ɵɵtext(2, \"Deduct Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"nz-form-control\")(4, \"nz-select\", 35);\n    i0.ɵɵtemplate(5, FleetViewFinancialsComponent_nz_form_item_18_nz_option_5_Template, 2, 4, \"nz-option\", 14);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.deductTypes);\n  }\n}\nfunction FleetViewFinancialsComponent_nz_option_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"nz-option\", 34);\n  }\n  if (rf & 2) {\n    const currency_r24 = ctx.$implicit;\n    i0.ɵɵproperty(\"nzLabel\", currency_r24.currency)(\"nzValue\", currency_r24.currency);\n  }\n}\nexport class FleetViewFinancialsComponent {\n  constructor(route, tagColor, tableService, fb, msg, routerHelper, createTransactionGQL) {\n    this.route = route;\n    this.tagColor = tagColor;\n    this.tableService = tableService;\n    this.fb = fb;\n    this.msg = msg;\n    this.routerHelper = routerHelper;\n    this.createTransactionGQL = createTransactionGQL;\n    this.formTransaction = this.fb.group({\n      action: [null, Validators.required],\n      rechargeType: [null],\n      deductType: [null],\n      amount: [0, Validators.required],\n      currency: [null, Validators.required],\n      description: [null],\n      refrenceNumber: [null]\n    });\n    this.deductTypes = Object.keys(ProviderDeductTransactionType);\n    this.rechargeTypes = Object.keys(ProviderRechargeTransactionType);\n  }\n  ngOnInit() {\n    this.query = this.route.data.pipe(map(data => data.financials));\n  }\n  getUniquieCurrencies(currencies) {\n    if (currencies == undefined) return [];\n    return [...new Set(currencies)];\n  }\n  onSubmitTransaction() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      _this.formTransaction.value.fleetId = _this.route.parent?.snapshot.params.id;\n      if (_this.formTransaction.value.action == 'Deduct' && _this.formTransaction.value.deductType == null) {\n        _this.msg.error('Please select the transaction type.');\n        return;\n      }\n      if (_this.formTransaction.value.action == 'Recharge' && _this.formTransaction.value.rechargeType == null) {\n        _this.msg.error('Please select the transaction type.');\n        return;\n      }\n      try {\n        yield firstValueFrom(_this.createTransactionGQL.mutate({\n          input: _this.formTransaction.value\n        }));\n        _this.msg.success('Transaction Submitted.');\n        _this.routerHelper.refresh(_this.route);\n        _this.formTransaction.patchValue({});\n      } catch (error) {\n        _this.msg.error(error.message);\n      }\n    })();\n  }\n  static {\n    this.ɵfac = function FleetViewFinancialsComponent_Factory(t) {\n      return new (t || FleetViewFinancialsComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.TagColorService), i0.ɵɵdirectiveInject(i3.TableService), i0.ɵɵdirectiveInject(i4.UntypedFormBuilder), i0.ɵɵdirectiveInject(i5.NzMessageService), i0.ɵɵdirectiveInject(i6.RouterHelperService), i0.ɵɵdirectiveInject(i7.CreateFleetTransactionGQL));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: FleetViewFinancialsComponent,\n      selectors: [[\"app-fleet-view-financials\"]],\n      decls: 44,\n      vars: 20,\n      consts: [[\"fxLayout\", \"row\", \"fxLayoutGap\", \"4px\", 1, \"dt-actionbar\"], [\"nzTitle\", \"Transactions Records\", \"nzShowSizeChanger\", \"\", \"nzBordered\", \"\", 3, \"nzFrontPagination\", \"nzData\", \"nzTotal\", \"nzQueryParams\", 4, \"ngIf\"], [\"nzTitle\", \"Wallet Summary\", \"nzBordered\", \"\", \"class\", \"mt-2\", 3, \"nzFrontPagination\", \"nzData\", \"nzTotal\", 4, \"ngIf\"], [1, \"mt-2\", 3, \"nzTitle\"], [\"nz-form\", \"\", 3, \"formGroup\", \"ngSubmit\"], [1, \"lg:grid\", \"lg:grid-cols-2\", \"lg:gap-2\"], [\"nzRequired\", \"\"], [\"formControlName\", \"action\", \"nzRequired\", \"\"], [\"nzLabel\", \"Deduct\", \"nzValue\", \"Deduct\"], [\"nzLabel\", \"Recharge\", \"nzValue\", \"Recharge\"], [4, \"ngIf\"], [\"nzRequired\", \"\", \"nzFor\", \"amount\"], [\"formControlName\", \"amount\", \"id\", \"amount\", \"required\", \"\", 1, \"w-full\"], [\"formControlName\", \"currency\", \"id\", \"currency\", \"required\", \"\"], [3, \"nzLabel\", \"nzValue\", 4, \"ngFor\", \"ngForOf\"], [\"nzFor\", \"refrenceNumber\"], [\"nz-input\", \"\", \"formControlName\", \"refrenceNumber\", \"id\", \"refrenceNumber\"], [\"nzFor\", \"description\"], [\"nz-input\", \"\", \"formControlName\", \"description\", \"id\", \"description\"], [\"nz-button\", \"\", \"nzType\", \"primary\", \"type\", \"submit\", 1, \"float-right\", \"mt-2\", 3, \"disabled\"], [\"nzTitle\", \"Transactions Records\", \"nzShowSizeChanger\", \"\", \"nzBordered\", \"\", 3, \"nzFrontPagination\", \"nzData\", \"nzTotal\", \"nzQueryParams\"], [\"table\", \"\"], [\"nzShowSort\", \"\", \"nzColumnKey\", \"transactionTime\"], [\"nzShowSort\", \"\", \"nzColumnKey\", \"transactionType\"], [1, \"hidden\", \"lg:table-cell\"], [1, \"hidden\", \"xl:table-cell\"], [4, \"ngFor\", \"ngForOf\"], [3, \"nz-tooltip\"], [3, \"ngClass\"], [3, \"routerLink\", 4, \"ngIf\"], [3, \"routerLink\"], [\"nzTitle\", \"Wallet Summary\", \"nzBordered\", \"\", 1, \"mt-2\", 3, \"nzFrontPagination\", \"nzData\", \"nzTotal\"], [\"walletTable\", \"\"], [\"formControlName\", \"rechargeType\"], [3, \"nzLabel\", \"nzValue\"], [\"formControlName\", \"deductType\"]],\n      template: function FleetViewFinancialsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelement(0, \"div\", 0);\n          i0.ɵɵtemplate(1, FleetViewFinancialsComponent_nz_table_1_Template, 24, 22, \"nz-table\", 1);\n          i0.ɵɵpipe(2, \"async\");\n          i0.ɵɵtemplate(3, FleetViewFinancialsComponent_nz_table_3_Template, 8, 3, \"nz-table\", 2);\n          i0.ɵɵpipe(4, \"async\");\n          i0.ɵɵelementStart(5, \"nz-card\", 3);\n          i0.ɵɵpipe(6, \"translate\");\n          i0.ɵɵelementStart(7, \"form\", 4);\n          i0.ɵɵlistener(\"ngSubmit\", function FleetViewFinancialsComponent_Template_form_ngSubmit_7_listener() {\n            return ctx.onSubmitTransaction();\n          });\n          i0.ɵɵelementStart(8, \"div\", 5)(9, \"nz-form-item\")(10, \"nz-form-label\", 6);\n          i0.ɵɵtext(11, \"Type\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"nz-form-control\")(13, \"nz-select\", 7);\n          i0.ɵɵelement(14, \"nz-option\", 8)(15, \"nz-option\", 9);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵtemplate(16, FleetViewFinancialsComponent_div_16_Template, 1, 0, \"div\", 10)(17, FleetViewFinancialsComponent_nz_form_item_17_Template, 6, 1, \"nz-form-item\", 10)(18, FleetViewFinancialsComponent_nz_form_item_18_Template, 6, 1, \"nz-form-item\", 10);\n          i0.ɵɵelementStart(19, \"nz-form-item\")(20, \"nz-form-label\", 11);\n          i0.ɵɵtext(21, \"Amount\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(22, \"nz-form-control\");\n          i0.ɵɵelement(23, \"nz-input-number\", 12);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(24, \"nz-form-item\")(25, \"nz-form-label\", 6);\n          i0.ɵɵtext(26, \"Currency\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(27, \"nz-form-control\")(28, \"nz-select\", 13);\n          i0.ɵɵtemplate(29, FleetViewFinancialsComponent_nz_option_29_Template, 1, 2, \"nz-option\", 14);\n          i0.ɵɵpipe(30, \"async\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(31, \"nz-form-item\")(32, \"nz-form-label\", 15);\n          i0.ɵɵtext(33, \"Document Number\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(34, \"nz-form-control\");\n          i0.ɵɵelement(35, \"input\", 16);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(36, \"nz-form-item\")(37, \"nz-form-label\", 17);\n          i0.ɵɵtext(38, \"Description\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(39, \"nz-form-control\");\n          i0.ɵɵelement(40, \"input\", 18);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(41, \"button\", 19);\n          i0.ɵɵtext(42);\n          i0.ɵɵpipe(43, \"translate\");\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          let tmp_0_0;\n          let tmp_1_0;\n          let tmp_7_0;\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", (tmp_0_0 = i0.ɵɵpipeBind1(2, 10, ctx.query)) == null ? null : tmp_0_0.data == null ? null : tmp_0_0.data.fleet == null ? null : tmp_0_0.data.fleet.transactions);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", (tmp_1_0 = i0.ɵɵpipeBind1(4, 12, ctx.query)) == null ? null : tmp_1_0.data == null ? null : tmp_1_0.data.fleet == null ? null : tmp_1_0.data.fleet.wallets);\n          i0.ɵɵadvance(2);\n          i0.ɵɵpropertyInterpolate(\"nzTitle\", i0.ɵɵpipeBind1(6, 14, \"profile.insertTransaction\"));\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"formGroup\", ctx.formTransaction);\n          i0.ɵɵadvance(9);\n          i0.ɵɵproperty(\"ngIf\", ctx.formTransaction.value.action === null);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.formTransaction.value.action === \"Recharge\");\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.formTransaction.value.action === \"Deduct\");\n          i0.ɵɵadvance(11);\n          i0.ɵɵproperty(\"ngForOf\", ctx.getUniquieCurrencies((tmp_7_0 = i0.ɵɵpipeBind1(30, 16, ctx.query)) == null ? null : tmp_7_0.data == null ? null : tmp_7_0.data.regions == null ? null : tmp_7_0.data.regions.nodes));\n          i0.ɵɵadvance(12);\n          i0.ɵɵproperty(\"disabled\", !ctx.formTransaction.valid);\n          i0.ɵɵadvance();\n          i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(43, 18, \"profile.submit\"));\n        }\n      },\n      dependencies: [i1.RouterLink, i8.NgClass, i8.NgForOf, i8.NgIf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.FormGroupDirective, i4.FormControlName, i9.NzTableComponent, i9.NzThAddOnComponent, i9.NzTableCellDirective, i9.NzThMeasureDirective, i9.NzTheadComponent, i9.NzTbodyComponent, i9.NzTrDirective, i10.NzInputDirective, i11.NzButtonComponent, i12.ɵNzTransitionPatchDirective, i13.NzWaveDirective, i14.NzColDirective, i14.NzRowDirective, i15.NzFormDirective, i15.NzFormItemComponent, i15.NzFormLabelComponent, i15.NzFormControlComponent, i16.NzOptionComponent, i16.NzSelectComponent, i17.NzCardComponent, i18.NzInputNumberComponent, i19.NzTooltipDirective, i8.AsyncPipe, i8.CurrencyPipe, i8.DatePipe, i20.TranslatePipe, i21.TimeagoPipe],\n      encapsulation: 2\n    });\n  }\n}","map":{"version":3,"names":["UntypedFormBuilder","Validators","ActivatedRoute","CreateFleetTransactionGQL","ProviderDeductTransactionType","ProviderRechargeTransactionType","RouterHelperService","TableService","TagColorService","NzMessageService","firstValueFrom","map","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵproperty","data_r9","operatorId","ɵɵadvance","ɵɵtextInterpolate","ɵɵpipeBind1","requestId","ɵɵtemplate","FleetViewFinancialsComponent_nz_table_1_tr_23_a_17_Template","FleetViewFinancialsComponent_nz_table_1_tr_23_a_18_Template","ɵɵpipeBind2","transactionTimestamp","action","deductType","rechargeType","ɵɵtextInterpolate2","amount","currency","refrenceNumber","description","ɵɵlistener","FleetViewFinancialsComponent_nz_table_1_Template_nz_table_nzQueryParams_0_listener","ɵɵrestoreView","_r15","ctx_r14","ɵɵnextContext","ɵɵresetView","tableService","onTableQueryParamsChange","FleetViewFinancialsComponent_nz_table_1_tr_23_Template","transactions_r6","nodes","totalCount","ɵɵtextInterpolate1","_r7","data","item_r19","balance","FleetViewFinancialsComponent_nz_table_3_tr_7_Template","wallets_r16","length","_r17","ɵɵelement","type_r21","FleetViewFinancialsComponent_nz_form_item_17_nz_option_5_Template","ctx_r3","rechargeTypes","type_r23","FleetViewFinancialsComponent_nz_form_item_18_nz_option_5_Template","ctx_r4","deductTypes","currency_r24","FleetViewFinancialsComponent","constructor","route","tagColor","fb","msg","routerHelper","createTransactionGQL","formTransaction","group","required","Object","keys","ngOnInit","query","pipe","financials","getUniquieCurrencies","currencies","undefined","Set","onSubmitTransaction","_this","_asyncToGenerator","value","fleetId","parent","snapshot","params","id","error","mutate","input","success","refresh","patchValue","message","ɵɵdirectiveInject","i1","i2","i3","i4","i5","i6","i7","selectors","decls","vars","consts","template","FleetViewFinancialsComponent_Template","rf","ctx","FleetViewFinancialsComponent_nz_table_1_Template","FleetViewFinancialsComponent_nz_table_3_Template","FleetViewFinancialsComponent_Template_form_ngSubmit_7_listener","FleetViewFinancialsComponent_div_16_Template","FleetViewFinancialsComponent_nz_form_item_17_Template","FleetViewFinancialsComponent_nz_form_item_18_Template","FleetViewFinancialsComponent_nz_option_29_Template","tmp_0_0","fleet","transactions","tmp_1_0","wallets","ɵɵpropertyInterpolate","tmp_7_0","regions","valid"],"sources":["/Users/obiechina/Documents/ridy-flutter-full-taxi-solution 2/apps/admin-panel/src/app/cms/management/management-fleets/fleet-view/fleet-view-financials/fleet-view-financials.component.ts","/Users/obiechina/Documents/ridy-flutter-full-taxi-solution 2/apps/admin-panel/src/app/cms/management/management-fleets/fleet-view/fleet-view-financials/fleet-view-financials.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { UntypedFormBuilder, Validators } from '@angular/forms';\nimport { ActivatedRoute } from '@angular/router';\nimport { ApolloQueryResult } from '@apollo/client/core';\nimport { CreateFleetTransactionGQL, FleetFinancialsQuery, ProviderDeductTransactionType, ProviderRechargeTransactionType } from '@ridy/admin-panel/generated/graphql';\nimport { RouterHelperService } from '@ridy/admin-panel/src/app/@services/router-helper.service';\nimport { TableService } from '@ridy/admin-panel/src/app/@services/table-service';\nimport { TagColorService } from '@ridy/admin-panel/src/app/@services/tag-color/tag-color.service';\nimport { NzMessageService } from 'ng-zorro-antd/message';\nimport { firstValueFrom, map, Observable } from 'rxjs';\n\n@Component({\n  selector: 'app-fleet-view-financials',\n  templateUrl: './fleet-view-financials.component.html'\n})\nexport class FleetViewFinancialsComponent implements OnInit {\n  query?: Observable<ApolloQueryResult<FleetFinancialsQuery>>;\n  formTransaction = this.fb.group({\n    action: [null, Validators.required],\n    rechargeType: [null],\n    deductType: [null],\n    amount: [0, Validators.required],\n    currency: [null, Validators.required],\n    description: [null],\n    refrenceNumber: [null]\n  });\n  deductTypes = Object.keys(ProviderDeductTransactionType);\n  rechargeTypes = Object.keys(ProviderRechargeTransactionType);\n  \n  constructor(\n    private route: ActivatedRoute,\n    public tagColor: TagColorService,\n    public tableService: TableService,\n    private fb: UntypedFormBuilder,\n    private msg: NzMessageService,\n    private routerHelper: RouterHelperService,\n    private createTransactionGQL: CreateFleetTransactionGQL) { }\n\n  ngOnInit(): void {\n    this.query = this.route.data.pipe(map(data => data.financials)); \n  }\n\n  getUniquieCurrencies(currencies: {currency: string}[] | undefined) {\n    if(currencies == undefined) return [];\n    return [...new Set(currencies)];\n  }\n  \n  async onSubmitTransaction() {\n    this.formTransaction.value.fleetId = this.route.parent?.snapshot.params.id;\n    if(this.formTransaction.value.action == 'Deduct' && this.formTransaction.value.deductType == null) {\n      this.msg.error('Please select the transaction type.');\n      return;\n    }\n    if(this.formTransaction.value.action == 'Recharge' && this.formTransaction.value.rechargeType == null) {\n      this.msg.error('Please select the transaction type.');\n      return;\n    }\n    try {\n      await firstValueFrom(this.createTransactionGQL.mutate({input: this.formTransaction.value}));\n      this.msg.success('Transaction Submitted.');\n      this.routerHelper.refresh(this.route);\n      this.formTransaction.patchValue({});\n    } catch(error: any) {\n      this.msg.error(error.message);\n    }\n  }\n}\n","<div fxLayout=\"row\" fxLayoutGap=\"4px\" class=\"dt-actionbar\">\n  <!--<button nz-button nzType=\"primary\"><i nz-icon nzType=\"plus\"></i>Add</button>-->\n</div>\n<nz-table #table nzTitle=\"Transactions Records\" nzShowSizeChanger [nzFrontPagination]=\"false\" *ngIf=\"(query | async)?.data?.fleet?.transactions as transactions\"\n  [nzData]=\"transactions.nodes\" [nzTotal]=\"transactions.totalCount\" (nzQueryParams)=\"tableService.onTableQueryParamsChange\" nzBordered>\n  <thead>\n    <tr>\n      <th nzShowSort nzColumnKey=\"transactionTime\">\n        {{ 'profile.dateTime' | translate }}\n      </th>\n      <th nzShowSort nzColumnKey=\"transactionType\">\n        {{ 'profile.transactionType' | translate }}\n      </th>\n      <th>\n        {{ 'profile.amount' | translate }}\n      </th>\n      <th class=\"hidden lg:table-cell\">\n        {{ 'profile.documentNumber' | translate }}\n      </th>\n      <th class=\"hidden xl:table-cell\">\n        {{ 'profile.details' | translate }}\n      </th>\n      <th>{{ 'profile.actions' | translate }}</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr *ngFor=\"let data of table.data\">\n      <td [nz-tooltip]=\"data.transactionTimestamp | date:'short'\">{{ data.transactionTimestamp | timeago }}</td>\n      <td>{{ data.action === 'Deduct' ? ('enum.transactionType.' + data.deductType | translate) :\n        ('enum.transactionType.' + data.rechargeType | translate) }}</td>\n      <td [ngClass]=\"data.action === 'Recharge' ? 'text-green-500' : 'text-red-500'\">{{data.action === 'Recharge' ? '+' : ''}}{{ data.amount | currency: data.currency }}</td>\n      <td class=\"hidden lg:table-cell\">{{ data.refrenceNumber }}</td>\n      <td class=\"hidden xl:table-cell\">{{ data.description }}</td>\n      <td>\n        <a *ngIf=\"data.operatorId !== null\"\n          [routerLink]=\"'/management/users/view/' + data.operatorId\">{{ 'table.viewOperator' | translate\n          }}</a>\n        <a *ngIf=\"data.requestId !== null\" [routerLink]=\"'/requests/view/' + data.requestId\">{{ 'table.viewRequest'\n          | translate }}</a>\n      </td>\n    </tr>\n  </tbody>\n</nz-table>\n<nz-table #walletTable *ngIf=\"(query | async)?.data?.fleet?.wallets as wallets\" nzTitle=\"Wallet Summary\"\n  [nzFrontPagination] [nzData]=\"wallets\" [nzTotal]=\"wallets.length\" nzBordered class=\"mt-2\">\n  <thead>\n    <tr>\n      <th>Amount</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr *ngFor=\"let item of walletTable.data\">\n      <td>{{ item.balance | currency: item.currency }}</td>\n    </tr>\n  </tbody>\n</nz-table>\n<nz-card nzTitle=\"{{ 'profile.insertTransaction' | translate }}\" class=\"mt-2\">\n  <form nz-form [formGroup]=\"formTransaction\" (ngSubmit)=\"onSubmitTransaction()\">\n    <div class=\"lg:grid lg:grid-cols-2 lg:gap-2\">\n    <nz-form-item>\n      <nz-form-label nzRequired>Type</nz-form-label>\n      <nz-form-control>\n        <nz-select formControlName=\"action\" nzRequired>\n          <nz-option nzLabel=\"Deduct\" nzValue=\"Deduct\"></nz-option>\n          <nz-option nzLabel=\"Recharge\" nzValue=\"Recharge\"></nz-option>\n        </nz-select>\n      </nz-form-control>\n    </nz-form-item>\n    <div *ngIf=\"formTransaction.value.action === null\"></div>\n    <nz-form-item *ngIf=\"formTransaction.value.action === 'Recharge'\">\n      <nz-form-label>Recharge Type</nz-form-label>\n      <nz-form-control>\n        <nz-select formControlName=\"rechargeType\">\n          <nz-option *ngFor=\"let type of rechargeTypes\" [nzLabel]=\"('enum.transactionType.' + type) | translate\" [nzValue]=\"type\"></nz-option>\n        </nz-select>\n      </nz-form-control>\n    </nz-form-item>\n    <nz-form-item *ngIf=\"formTransaction.value.action === 'Deduct'\">\n      <nz-form-label>Deduct Type</nz-form-label>\n      <nz-form-control>\n        <nz-select formControlName=\"deductType\">\n          <nz-option *ngFor=\"let type of deductTypes\" [nzLabel]=\"('enum.transactionType.' + type) | translate\" [nzValue]=\"type\"></nz-option>\n        </nz-select>\n      </nz-form-control>\n    </nz-form-item>\n    <nz-form-item>\n      <nz-form-label nzRequired nzFor=\"amount\">Amount</nz-form-label>\n      <nz-form-control>\n        <nz-input-number formControlName=\"amount\" id=\"amount\" class=\"w-full\" required></nz-input-number>\n      </nz-form-control>\n    </nz-form-item>\n    <nz-form-item>\n      <nz-form-label nzRequired>Currency</nz-form-label>\n      <nz-form-control>\n        <nz-select formControlName=\"currency\" id=\"currency\" required>\n          <nz-option *ngFor=\"let currency of getUniquieCurrencies((query | async)?.data?.regions?.nodes)\" [nzLabel]=\"currency.currency\" [nzValue]=\"currency.currency\"></nz-option>\n        </nz-select>\n      </nz-form-control>\n    </nz-form-item>\n    <nz-form-item>\n      <nz-form-label nzFor=\"refrenceNumber\">Document Number</nz-form-label>\n      <nz-form-control>\n        <input nz-input formControlName=\"refrenceNumber\" id=\"refrenceNumber\">\n      </nz-form-control>\n    </nz-form-item>\n    <nz-form-item>\n      <nz-form-label nzFor=\"description\">Description</nz-form-label>\n      <nz-form-control>\n        <input nz-input formControlName=\"description\" id=\"description\">\n      </nz-form-control>\n    </nz-form-item>\n  </div>\n    <button class=\"float-right mt-2\" nz-button nzType=\"primary\" type=\"submit\" [disabled]=\"!formTransaction.valid\">{{\n      'profile.submit' | translate }}</button>\n  </form>\n  \n</nz-card>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}